<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1200px;
            position: relative;
            z-index: 2;
        }

        /* Contenedor de logo mejorado */
        .logo-container {
            position: relative;
            display: inline-block;
        }

        .logo-glow {
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            filter: blur(10px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .logo-item:hover .logo-glow {
            opacity: 1;
        }

        /* Labels de logo mejorados */
        .logo-label {
            margin-top: 8px;
            text-align: center;
        }

        .logo-text {
            display: block;
            font-size: 1.1rem;
            font-weight: 700;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .logo-subtitle {
            display: block;
            font-size: 0.8rem;
            opacity: 0.9;
            font-weight: 400;
            margin-top: 2px;
        }

        /* Título principal mejorado */
        .title-container {
            position: relative;
        }

        .main-title {
            margin-bottom: 8px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 3px 10px rgba(0, 0, 0, 0.4);
            letter-spacing: 2px;
            font-family: 'Inter', sans-serif;
            line-height: 1.1;
        }

        .title-highlight {
            display: block;
            font-size: 1.2rem;
            font-weight: 500;
            opacity: 0.9;
            margin-bottom: 5px;
            letter-spacing: 3px;
        }

        .title-main {
            display: block;
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Badge de versión */
        .title-badge {
            display: inline-block;
            margin-top: 8px;
        }

        .badge-text {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            border: 1px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
        }

        /* Barra de estado */
        .header-status {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
            padding: 10px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 2;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            opacity: 0.9;
            transition: opacity 0.3s ease;
        }

        .status-item:hover {
            opacity: 1;
        }

        .status-item i {
            font-size: 1rem;
        }

        /* Responsividad mejorada para el header profesional */
        @media (max-width: 768px) {
            header {
                padding: 30px 15px 15px 15px;
                min-height: 160px;
            }

            .header-main {
                flex-direction: row;
                gap: 10px;
                margin-bottom: 20px;
                max-width: 600px;
                padding: 0 10px;
            }

            .title-section {
                margin: 0 15px;
                order: 0;
            }

            .main-title {
                font-size: 2.2rem;
                letter-spacing: 1px;
            }

            .title-highlight {
                font-size: 1rem;
                letter-spacing: 2px;
            }

            .title-main {
                font-size: 2rem;
            }

            .header-subtitle {
                font-size: 0.9rem;
            }

            .logo-item img {
                width: 50px;
                height: 50px;
            }

            .logo-text {
                font-size: 0.9rem;
            }

            .logo-subtitle {
                font-size: 0.7rem;
            }

            .header-status {
                gap: 20px;
                margin-top: 10px;
            }

            .status-item {
                font-size: 0.8rem;
            }

            .decoration-circle {
                display: none; /* Ocultar decoraciones en móvil */
            }
        }

        @media (max-width: 480px) {
            header {
                padding: 25px 10px 10px 10px;
                min-height: 140px;
            }

            .header-main {
                gap: 8px;
                margin-bottom: 15px;
                padding: 0 5px;
            }

            .main-title {
                font-size: 1.8rem;
            }

            .title-highlight {
                font-size: 0.9rem;
                letter-spacing: 1px;
            }

            .title-main {
                font-size: 1.6rem;
            }

            .header-subtitle {
                font-size: 0.8rem;
            }

            .logo-item img {
                width: 40px;
                height: 40px;
            }

            .logo-text {
                font-size: 0.8rem;
            }

            .logo-subtitle {
                font-size: 0.6rem;
            }

            .header-status {
                gap: 15px;
                margin-top: 8px;
                flex-wrap: wrap;
            }

            .status-item {
                font-size: 0.7rem;
            }

            .badge-text {
                font-size: 0.7rem;
                padding: 3px 8px;
            }
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="theme-color" content="#FF6B35">
    <title>SISTEMA PAE DIGITAL - INVENTARIO SIMPLE</title>
    
    <!-- Favicon PAE Digital -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="favicon.svg">
    <link rel="shortcut icon" href="favicon.svg">
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- SweetAlert2 CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <style>
        /* Variables CSS para el esquema de colores de la Alcaldía de Envigado */
        :root {
            --primary-color: #FF6B35; /* Naranja principal */
            --secondary-color: #4CAF50; /* Verde principal */
            --accent-color: #FF8C42; /* Naranja secundario */
            --success-color: #45B649; /* Verde éxito */
            --warning-color: #FFA726; /* Naranja advertencia */
            --info-color: #66BB6A; /* Verde información */
            --light-bg: #F8F9FA;
            --dark-bg: #2E7D32;
            --text-primary: #2E2E2E;
            --text-secondary: #666666;
            --border-color: #E0E0E0;
            --shadow-light: 0 2px 10px rgba(255, 107, 53, 0.1);
            --shadow-medium: 0 4px 20px rgba(76, 175, 80, 0.15);
            --shadow-heavy: 0 8px 30px rgba(255, 107, 53, 0.2);
            --gradient-primary: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            --gradient-secondary: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
            --gradient-success: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            --gradient-warm: linear-gradient(135deg, #FF6B35 0%, #FFA726 100%);
            --gradient-cool: linear-gradient(135deg, #4CAF50 0%, #66BB6A 100%);
        }

        /* Reset y estilos base mejorados */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #fafbfc 0%, #f8fafc 100%);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header profesional con efectos modernos */
        header {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 25%, #4CAF50 75%, #45B649 100%);
            color: white;
            text-align: center;
            padding: 40px 20px 20px 20px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            position: relative;
            overflow: hidden;
            border-bottom: 4px solid rgba(255, 255, 255, 0.2);
            min-height: 200px;
        }

        /* Elementos decorativos de fondo */
        .header-decoration {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
        }

        .decoration-circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            animation: float 6s ease-in-out infinite;
        }

        .circle-1 {
            width: 80px;
            height: 80px;
            top: 20px;
            left: 10%;
            animation-delay: 0s;
        }

        .circle-2 {
            width: 120px;
            height: 120px;
            top: 60px;
            right: 15%;
            animation-delay: 2s;
        }

        .circle-3 {
            width: 60px;
            height: 60px;
            bottom: 30px;
            left: 20%;
            animation-delay: 4s;
        }

        .decoration-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);
            animation: wave 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        @keyframes wave {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        /* Estilos para el header principal */
        .header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 0;
            margin: 0 auto;
            padding: 0 20px;
            max-width: 1000px;
            position: relative;
            z-index: 2;
        }

        /* Estilos para la sección del título */
        .title-section {
            text-align: center;
            flex: 1;
            margin: 0 40px;
        }

        .title-section h1 {
            margin-bottom: 10px;
            font-size: 2.8rem;
            font-weight: 700;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            letter-spacing: 1.5px;
            font-family: 'Inter', sans-serif;
        }

        .header-subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
            font-weight: 500;
            letter-spacing: 0.5px;
            font-weight: 300;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
        }

        /* Logos mejorados con efectos profesionales */
        .logo-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .logo-item:hover {
            transform: translateY(-5px);
        }

        .logo-item img {
            height: 90px;
            width: auto;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.95);
            padding: 12px;
            border-radius: 15px;
            box-shadow: var(--shadow-medium);
            transition: all 0.3s ease;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .logo-item:hover img {
            box-shadow: var(--shadow-heavy);
            transform: scale(1.05);
            border-color: rgba(255, 255, 255, 0.6);
        }

        .logo-label {
            font-size: 0.9rem;
            font-weight: 600;
            color: white;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        /* Contenedor principal con diseño moderno */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(76, 175, 80, 0.2);
        }

        /* Navegación mejorada */
        .nav-menu {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .nav-button:hover::before {
            left: 100%;
        }

        .nav-button:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-medium);
        }

        .nav-button.active {
            background: var(--gradient-warm);
            box-shadow: var(--shadow-medium);
        }

        /* Secciones de contenido con diseño profesional */
        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .section:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .section h2 {
            color: var(--primary-color);
            font-size: 1.8rem;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--secondary-color);
            position: relative;
        }

        .section h2::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--primary-color);
        }

        /* Formularios mejorados */
        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
            transform: translateY(-1px);
        }

        .form-control:hover {
            border-color: var(--secondary-color);
        }

        /* Botones mejorados */
        .btn {
            background: var(--gradient-secondary); /* Gradiente verde */
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        .btn-primary {
            background: var(--gradient-warm); /* Gradiente naranja */
        }

        .btn-danger {
            background: linear-gradient(135deg, #FF6B35, #FF8C42); /* Gradiente naranja intenso */
        }

        /* Tablas mejoradas */
        .table-container {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }

        th {
            background: var(--gradient-cool); /* Gradiente verde para encabezados */
            color: white;
            padding: 15px 12px;
            text-align: left;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-size: 0.9rem;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: var(--light-bg);
        }

        /* Estados y prioridades mejorados */
        .estado-urgente {
            background: linear-gradient(135deg, var(--primary-color), var(--accent-color)); /* Naranja intenso */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-pronto {
            background: linear-gradient(135deg, var(--warning-color), var(--accent-color)); /* Naranja cálido */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-atencion {
            background: linear-gradient(135deg, var(--info-color), var(--secondary-color)); /* Verde azulado */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .estado-sin-vencimiento {
            background: linear-gradient(135deg, var(--success-color), var(--secondary-color)); /* Verde éxito */
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Alertas y mensajes mejorados */
        .alert {
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(76, 175, 80, 0.1);
            border-color: var(--success-color);
            color: var(--success-color);
        }

        .alert-warning {
            background: rgba(255, 167, 38, 0.1);
            border-color: var(--warning-color);
            color: var(--warning-color);
        }

        .alert-danger {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }

        /* Responsive para móviles */
        @media (max-width: 768px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 15px; /* Reducir gap para móvil */
                margin-bottom: 25px;
                max-width: 600px;
                padding: 0 15px;
            }

            .title-section {
                margin: 0 20px; /* Reducir márgenes */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 2rem; /* Tamaño intermedio */
            }

            .logo-item img {
                height: 70px; /* Tamaño intermedio */
                padding: 10px;
            }

            .nav-menu {
                gap: 15px;
            }

            .nav-button {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            .section {
                padding: 20px;
                margin-bottom: 20px;
            }

            .section h2 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .header-main {
                flex-direction: row; /* Mantener disposición horizontal */
                gap: 10px; /* Gap más pequeño para móviles muy pequeños */
                margin-bottom: 20px;
                padding: 0 10px;
                max-width: 400px;
            }

            .title-section {
                margin: 0 15px; /* Márgenes más pequeños */
                order: 0; /* Mantener orden original */
            }

            .title-section h1 {
                font-size: 1.6rem; /* Tamaño más pequeño pero legible */
            }

            .logo-item img {
                height: 60px; /* Tamaño más pequeño */
                padding: 8px;
            }

            .nav-menu {
                gap: 10px;
            }

            .nav-button {
                padding: 10px 16px;
                font-size: 0.8rem;
            }

            .section {
                padding: 15px;
                margin-bottom: 15px;
            }

            .section h2 {
                font-size: 1.3rem;
            }
        }
        
        /* Media queries mejoradas para la grilla de botones */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
                gap: 20px;
                padding: 0 15px;
            }
            
            .boton-menu {
                padding: 28px 20px;
                font-size: 1em;
                min-height: 150px;
                border-radius: 20px;
            }
            
            .icono-boton {
                font-size: 2.2em;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .menu-botones {
                grid-template-columns: repeat(2, 1fr);
                gap: 25px;
                padding: 0 20px;
            }
            
            .boton-menu {
                min-height: 170px;
            }
        }
        
        @media (min-width: 1400px) {
            .menu-botones {
                grid-template-columns: repeat(3, 1fr);
                max-width: 1600px;
            }
            
            .boton-menu {
                min-height: 200px;
                padding: 40px 30px;
            }
            
            .icono-boton {
                font-size: 3em;
            }
        }
        
        @media (max-width: 480px) {
            .menu-botones {
                gap: 15px;
                padding: 0 10px;
            }
            
            .boton-menu {
                padding: 25px 15px;
                min-height: 130px;
                font-size: 0.95em;
            }
            
            .icono-boton {
                font-size: 2em;
            }
        }
        
        /* Estilos específicos para la sección de stock */
        .stock-table {
            font-size: 0.9rem;
        }
        
        .stock-table th {
            background: linear-gradient(135deg, #4CAF50 0%, #45B649 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .stock-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .stock-table tbody tr:hover {
            background-color: rgba(76, 175, 80, 0.05);
        }
        
        .badge-urgente {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-pronto {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .badge-atencion {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-sin-vencimiento {
            background: linear-gradient(135deg, #6c757d, #5a6268);
            color: white;
            font-weight: 600;
        }
        
        .stock-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .stock-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .stock-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border-left: 4px solid #4CAF50;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Stock */
        @media (max-width: 768px) {
            .container-fluid {
                padding: 10px;
            }
            
            /* Header más compacto */
            .row.mb-4:first-child {
                margin-bottom: 1rem !important;
            }
            
            .row.mb-4:first-child h2 {
                font-size: 1.5rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.9rem;
                margin-bottom: 0.5rem;
            }
            
            /* Filtros más compactos */
            .card-body {
                padding: 1rem;
            }
            
            .card-header h5 {
                font-size: 1rem;
            }
            
            .form-label {
                font-size: 0.9rem;
                margin-bottom: 0.25rem;
            }
            
            .form-control, .form-select {
                font-size: 0.9rem;
                padding: 0.5rem;
            }
            
            /* Botones más pequeños */
            .btn {
                font-size: 0.85rem;
                padding: 0.5rem 0.75rem;
            }
            
            /* Tabla más compacta */
            .stock-table {
                font-size: 0.8rem;
            }
            
            .stock-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .stock-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .stock-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .container-fluid {
                padding: 5px;
            }
            
            /* Header ultra compacto */
            .row.mb-4:first-child h2 {
                font-size: 1.3rem;
            }
            
            .row.mb-4:first-child p {
                font-size: 0.8rem;
            }
            
            /* Filtros en una sola columna */
            .col-md-4 {
                margin-bottom: 0.5rem;
            }
            
            /* Botones apilados */
            .d-flex.gap-2 {
                flex-direction: column;
                gap: 0.5rem !important;
            }
            
            .btn {
                width: 100%;
                font-size: 0.8rem;
            }
            
            /* Tabla ultra compacta */
            .stock-table {
                font-size: 0.75rem;
            }
            
            .stock-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .stock-table td {
                padding: 4px 2px;
            }
            
            /* Cards más compactas */
            .card {
                margin-bottom: 0.5rem;
            }
            
            .card-body {
                padding: 0.75rem;
            }
        }
        
        /* Estilos específicos para la sección de historial */
        .historial-table {
            font-size: 0.9rem;
        }
        
        .historial-table th {
            background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%);
            color: white;
            font-weight: 600;
            text-align: center;
            vertical-align: middle;
            border: none;
            padding: 12px 8px;
        }
        
        .historial-table td {
            vertical-align: middle;
            padding: 10px 8px;
            border-bottom: 1px solid #e9ecef;
        }
        
        .historial-table tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.05);
        }
        
        .badge-entrada {
            background: linear-gradient(135deg, #28a745, #1e7e34);
            color: white;
            font-weight: 600;
        }
        
        .badge-salida {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            font-weight: 600;
        }
        
        .badge-devolucion {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #212529;
            font-weight: 600;
        }
        
        .historial-card {
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-radius: 12px;
        }
        
        .historial-card .card-header {
            border-radius: 12px 12px 0 0;
            border-bottom: none;
        }
        
        .historial-info {
            background: linear-gradient(135deg, #fff3e0 0%, #fce4ec 100%);
            border-left: 4px solid #FF6B35;
            border-radius: 8px;
        }
        
        /* Responsividad mejorada para móviles - Sección Historial */
        @media (max-width: 768px) {
            .historial-table {
                font-size: 0.8rem;
            }
            
            .historial-table th {
                padding: 8px 4px;
                font-size: 0.8rem;
            }
            
            .historial-table td {
                padding: 6px 4px;
            }
            
            /* Ocultar columnas menos importantes en móvil */
            .historial-table .d-none-mobile {
                display: none !important;
            }
        }
        
        @media (max-width: 480px) {
            .historial-table {
                font-size: 0.75rem;
            }
            
            .historial-table th {
                padding: 6px 2px;
                font-size: 0.75rem;
            }
            
            .historial-table td {
                padding: 4px 2px;
            }
        }

        /* Animaciones y transiciones */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Efectos de hover para elementos interactivos */
        .form-control:hover,
        .btn:hover,
        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* Estilos para elementos específicos del sistema */
        .stock-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-card:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-card h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .search-container {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .search-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        /* Estilos para el reporte */
        .reporte-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .reporte-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--secondary-color);
        }

        .reporte-title {
            color: var(--primary-color);
            font-size: 2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .reporte-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        /* Estilos para filtros */
        .filtros-container {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filtro-item {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .filtro-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.9rem;
        }

        /* Estilos para botones de acción */
        .acciones-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .btn-exportar {
            background: var(--gradient-success);
        }

        .btn-limpiar {
            background: var(--gradient-secondary);
        }

        .btn-imprimir {
            background: var(--gradient-warm);
        }

        /* Estilos para estadísticas */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--gradient-warm);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: var(--shadow-medium);
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Estilos para el historial */
        .historial-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .historial-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .historial-title {
            color: var(--primary-color);
            font-size: 1.8rem;
            font-weight: 700;
        }

        /* Estilos para movimientos */
        .movimiento-item {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--secondary-color);
            transition: all 0.3s ease;
        }

        .movimiento-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-light);
        }

        .movimiento-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .movimiento-tipo {
            background: var(--gradient-secondary);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .movimiento-fecha {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .movimiento-detalles {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 10px;
        }

        .detalle-item {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .detalle-label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .detalle-valor {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Estilos para lotes */
        .lote-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .lote-resultado {
            background: var(--light-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-color);
        }

        .lote-sede {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
        }

        .lote-sede h4 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        /* Estilos para stock */
        .stock-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stock-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-3px);
        }

        .stock-producto {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 15px;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
        }

        .stock-lotes {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .stock-lote {
            background: var(--light-bg);
            border-radius: 8px;
            padding: 12px;
            border-left: 3px solid var(--info-color);
        }

        .stock-lote-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .stock-lote-numero {
            font-weight: 600;
            color: var(--primary-color);
        }

        .stock-lote-cantidad {
            background: var(--gradient-success);
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stock-lote-sede {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .stock-lote-vencimiento {
            margin-top: 8px;
            font-size: 0.8rem;
        }

        /* Estilos para el reporte mensual */
        .reporte-mensual-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow-light);
            border: 1px solid var(--border-color);
        }

        .mes-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .mes-input {
            padding: 12px 16px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .mes-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }

        /* Estilos para el botón de prueba */
        .btn-prueba {
            background: var(--gradient-secondary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-prueba:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* Estilos para SweetAlert2 personalizados */
        .swal2-popup {
            border-radius: 20px !important;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif !important;
        }

        .swal2-title {
            color: var(--primary-color) !important;
            font-weight: 700 !important;
        }

        .swal2-confirm {
            background: var(--gradient-success) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        .swal2-cancel {
            background: var(--gradient-secondary) !important;
            border-radius: 25px !important;
            padding: 12px 30px !important;
            font-weight: 600 !important;
            text-transform: uppercase !important;
            letter-spacing: 0.5px !important;
        }

        /* Estilos para scrollbars personalizados */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light-bg);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gradient-primary);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--gradient-secondary);
        }

        /* Estilos para focus visible */
        .form-control:focus-visible,
        .btn:focus-visible,
        .nav-button:focus-visible {
            outline: 2px solid var(--secondary-color);
            outline-offset: 2px;
        }

        /* Estilos para elementos deshabilitados */
        .form-control:disabled,
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Estilos para tooltips */
        [title] {
            position: relative;
            cursor: help;
        }

        /* Estilos para elementos de carga */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--light-bg);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Estilos para notificaciones */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--gradient-success);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: var(--shadow-medium);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: var(--gradient-secondary);
        }

        .notification.warning {
            background: var(--gradient-secondary);
        }

        .notification.info {
            background: var(--gradient-primary);
        }

        /* RESTAURAR CLASES CSS ORIGINALES NECESARIAS */
        
        /* INDICADORES DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            border: 2px solid;
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border-color: #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border-color: #f5c6cb;
        }
        
        .indicador-conexion.sincronizando {
            background: #fff3cd;
            color: #856404;
            border-color: #ffeaa7;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }
        
        /* MENÚ PRINCIPAL PROFESIONAL */
        .menu-principal {
            padding: 40px 20px;
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            border-radius: 24px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin: 20px 0;
        }

        .menu-botones {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 50px;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
            padding: 0 20px;
        }

        .boton-menu {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            color: var(--text-primary);
            border: 3px solid transparent;
            padding: 35px 25px;
            border-radius: 24px;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 18px;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            min-height: 180px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }

        .boton-menu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1) 0%, rgba(255, 255, 255, 0.05) 100%);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .boton-menu:hover::before {
            opacity: 1;
        }

        .boton-menu:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 255, 255, 1) 0%, rgba(248, 250, 252, 1) 100%);
        }

        .boton-menu:active {
            transform: translateY(-3px);
        }

        .boton-menu.entrada {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.entrada:hover {
            border-color: var(--success-color);
            background: linear-gradient(135deg, rgba(69, 182, 73, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.salida {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.salida:hover {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, rgba(255, 107, 53, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.devolucion {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.devolucion:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        .boton-menu.ver-stock {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.05) 0%, rgba(76, 175, 80, 0.05) 100%);
        }

        .boton-menu.ver-stock:hover {
            border-color: var(--info-color);
            background: linear-gradient(135deg, rgba(102, 187, 106, 0.1) 0%, rgba(76, 175, 80, 0.1) 100%);
        }

        .boton-menu.ver-historial {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.05) 0%, rgba(255, 167, 38, 0.05) 100%);
        }

        .boton-menu.ver-historial:hover {
            border-color: var(--accent-color);
            background: linear-gradient(135deg, rgba(255, 140, 66, 0.1) 0%, rgba(255, 167, 38, 0.1) 100%);
        }

        .boton-menu.buscar-lotes {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, rgba(102, 187, 106, 0.05) 100%);
        }

        .boton-menu.buscar-lotes:hover {
            border-color: var(--secondary-color);
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.1) 0%, rgba(102, 187, 106, 0.1) 100%);
        }

        .icono-boton {
            font-size: 2.5em;
            color: var(--primary-color);
            transition: all 0.3s ease;
        }
        
        .boton-menu:hover .icono-boton {
            transform: scale(1.1);
            color: var(--secondary-color);
        }

        /* SECCIONES OCULTAS */
        .seccion {
            display: none;
            padding: 20px;
        }

        .seccion.activa {
            display: block;
        }

        /* FORMULARIOS SIMPLIFICADOS */
        .formulario-simple {
            background: white;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid var(--border-color);
            max-width: 600px;
            margin: 0 auto;
            box-shadow: var(--shadow-light);
        }

        .formulario-simple h2 {
            color: var(--primary-color);
            margin-bottom: 25px;
            text-align: center;
            font-size: 1.8em;
            border-bottom: 3px solid var(--secondary-color);
            padding-bottom: 15px;
        }

        .campo-formulario {
            margin-bottom: 20px;
        }

        .campo-formulario label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1em;
        }

        .campo-formulario input,
        .campo-formulario select,
        .campo-formulario textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 1.1em;
            transition: border-color 0.3s ease;
            background: white;
        }

        .campo-formulario input:focus,
        .campo-formulario select:focus,
        .campo-formulario textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .checkbox-container {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-container input[type="checkbox"] {
            width: auto;
            transform: scale(1.5);
        }

        .checkbox-container label {
            margin-bottom: 0;
            font-weight: 500;
        }

        /* BOTONES DE ACCIÓN */
        .botones-accion {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .boton-accion {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .boton-accion.principal {
            background: var(--gradient-success);
            color: white;
        }

        .boton-accion.secundario {
            background: var(--gradient-cool);
            color: white;
        }

        .boton-accion.peligro {
            background: var(--gradient-warm);
            color: white;
        }

        .boton-accion:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* BOTÓN VOLVER */
        .boton-volver {
            background: var(--gradient-cool);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .boton-volver:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-medium);
        }

        /* TABLA DE STOCK SIMPLIFICADA */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-stock th,
        .tabla-stock td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 1.1em;
        }

        .tabla-stock tr:hover {
            background: var(--light-bg);
        }

        /* FILTROS SIMPLES */
        .filtros-simples {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            text-align: center;
        }

        .filtros-simples select {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            margin: 0 10px;
            min-width: 150px;
        }

        .campo-busqueda {
            position: relative;
            display: inline-block;
            margin: 0 10px;
        }

        .campo-busqueda input {
            padding: 10px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1em;
            min-width: 200px;
            background: white;
        }

        .campo-busqueda input:focus {
            border-color: var(--secondary-color);
            outline: none;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .boton-limpiar-filtro {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .boton-limpiar-filtro:hover {
            background: var(--accent-color);
            transform: translateY(-50%) scale(1.1);
        }

        .campo-busqueda input {
            padding-right: 35px; /* Espacio para el botón */
        }

        .info-filtros {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success-color);
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 0.9em;
            border-left: 4px solid var(--success-color);
        }

        .detalles-movimiento {
            max-width: 300px;
            line-height: 1.4;
            font-size: 0.9em;
        }

        .detalles-movimiento br {
            margin-bottom: 2px;
        }

        /* Estilos para resaltar información importante en salidas */
        .tabla-stock tr:hover .detalles-movimiento {
            background: rgba(76, 175, 80, 0.05);
            border-radius: 4px;
            padding: 4px;
        }

        .descripcion-funcion {
            color: var(--text-secondary);
            font-style: italic;
            margin-bottom: 20px;
            text-align: center;
        }

        .resultado-header {
            background: var(--light-bg);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--secondary-color);
        }

        .resultado-header h3 {
            margin: 0 0 10px 0;
            color: var(--primary-color);
        }

        #info-busqueda-lotes {
            font-size: 0.9em;
            color: var(--text-secondary);
        }

        .lote-sede-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            box-shadow: var(--shadow-light);
        }

        .lote-sede-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .lote-sede-sede {
            font-weight: bold;
            color: var(--secondary-color);
            font-size: 1.1em;
        }

        .lote-sede-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .lote-sede-detalles {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            font-size: 0.9em;
        }

        .lote-sede-detalle {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .lote-sede-detalle .icono {
            font-size: 1.2em;
        }

        /* Estilos para la sección de stock */
        .stock-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: var(--shadow-light);
            transition: all 0.3s ease;
        }

        .stock-item:hover {
            box-shadow: var(--shadow-medium);
            transform: translateY(-2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light-bg);
        }

        .stock-producto {
            font-size: 1.2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stock-cantidad {
            background: var(--secondary-color);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 1.1em;
        }

        .stock-sede {
            color: var(--secondary-color);
            font-weight: 600;
            font-size: 1.1em;
        }

        .stock-lotes {
            margin-top: 15px;
        }

        .stock-lotes-titulo {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .lote-item {
            background: var(--light-bg);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            margin-bottom: 8px;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr auto;
            gap: 10px;
            align-items: center;
        }

        .lote-item:last-child {
            margin-bottom: 0;
        }

        .lote-numero {
            font-weight: bold;
            color: var(--primary-color);
        }

        .lote-cantidad {
            text-align: center;
            font-weight: 600;
        }

        .lote-vencimiento {
            text-align: center;
        }

        .lote-prioridad {
            text-align: center;
            font-weight: bold;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        .prioridad-urgente {
            background: #f8d7da;
            color: #721c24;
        }

        .prioridad-pronto {
            background: #fff3cd;
            color: #856404;
        }

        .prioridad-atencion {
            background: #d1ecf1;
            color: #0c5460;
        }

        .prioridad-sin-vencimiento {
            background: #e2e3e5;
            color: #383d41;
        }

        .stock-sin-lotes {
            background: var(--light-bg);
            border: 1px dashed var(--border-color);
            border-radius: 6px;
            padding: 15px;
            text-align: center;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* MENSAJES DE ESTADO */
        .mensaje-estado {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: 600;
        }

        /* SISTEMA DE NOTIFICACIONES MEJORADO */
        .notificacion {
            background: white;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid;
            overflow: hidden;
            min-width: 320px;
            max-width: 400px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .notificacion-exito {
            border-left-color: var(--success-color);
        }
        
        .notificacion-error {
            border-left-color: var(--primary-color);
        }
        
        .notificacion-info {
            border-left-color: var(--info-color);
        }
        
        .notificacion-warning {
            border-left-color: var(--warning-color);
        }
        
        .notificacion-header {
            display: flex;
            align-items: center;
            padding: 15px 20px 10px 20px;
            gap: 10px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .notificacion-icono {
            font-size: 20px;
        }
        
        .notificacion-titulo {
            font-weight: 600;
            color: var(--text-primary);
            flex-grow: 1;
        }
        
        .notificacion-cerrar {
            background: none;
            border: none;
            font-size: 20px;
            color: #999;
            cursor: pointer;
            padding: 0;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .notificacion-cerrar:hover {
            background: #f0f0f0;
            color: #666;
        }
        
        .notificacion-mensaje {
            padding: 15px 20px;
            color: var(--text-primary);
            line-height: 1.6;
            font-size: 14px;
            white-space: pre-line;
        }
        
        .notificacion-progreso {
            height: 3px;
            background: #e0e0e0;
            width: 100%;
            position: relative;
        }
        
        .notificacion-progreso::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, var(--success-color), var(--info-color));
            animation: progresoNotificacion 8s linear forwards;
        }
        
        .notificacion-exito .notificacion-progreso::after {
            background: var(--success-color);
        }
        
        .notificacion-error .notificacion-progreso::after {
            background: var(--primary-color);
        }
        
        .notificacion-info .notificacion-progreso::after {
            background: var(--info-color);
        }
        
        .notificacion-warning .notificacion-progreso::after {
            background: var(--warning-color);
        }
        
        /* Animaciones para las notificaciones */
        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes slideOutRight {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }
        
        @keyframes progresoNotificacion {
            from {
                width: 100%;
            }
            to {
                width: 0%;
            }
        }
        
        /* Mantener estilos antiguos para compatibilidad */
        .mensaje-exito {
            background: rgba(39, 174, 96, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .mensaje-error {
            background: rgba(231, 76, 60, 0.1);
            color: var(--accent-color);
            border: 1px solid var(--accent-color);
        }

        .mensaje-info {
            background: rgba(23, 162, 184, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        /* SISTEMA DE AUTOCOMPLETADO */
        .autocomplete-container {
            position: relative;
            width: 100%;
        }

        .sugerencias-lista {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid var(--secondary-color);
            border-top: none;
            border-radius: 0 0 10px 10px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
            display: none;
        }

        .sugerencia-item {
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:hover {
            background: rgba(76, 175, 80, 0.1);
        }

        .sugerencia-item:last-child {
            border-bottom: none;
        }

        .sugerencia-item.seleccionada {
            background: var(--secondary-color);
            color: white;
        }

        .sugerencia-categoria {
            font-size: 0.9em;
            color: var(--text-secondary);
            font-style: italic;
        }

        /* INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            border-radius: 25px;
            font-weight: 600;
            z-index: 1000;
            box-shadow: var(--shadow-medium);
        }

        .conectado {
            background: var(--success-color);
            color: white;
        }

        .desconectado {
            background: var(--primary-color);
            color: white;
        }
        


        /* ESTILOS PARA ALERTAS DE VENCIMIENTO */
        .alerta-vencimiento-popup {
            font-family: 'Segoe UI', sans-serif;
        }

        .alerta-vencimiento-popup .swal2-title {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container {
            text-align: left;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .alerta-vencimiento-popup .swal2-html-container strong {
            color: var(--primary-color);
        }

        .alerta-vencimiento-popup .swal2-html-container .urgente {
            color: var(--primary-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .pronto {
            color: var(--warning-color);
            font-weight: 700;
        }

        .alerta-vencimiento-popup .swal2-html-container .atencion {
            color: var(--success-color);
            font-weight: 700;
        }

        /* ESTILOS PARA REPORTE DIARIO */
        .reporte-header {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 2px solid var(--border-color);
        }

        .reporte-header h3 {
            color: var(--primary-color);
            margin: 0 0 10px 0;
            text-align: center;
            font-size: 1.5em;
        }

        .reporte-header p {
            color: var(--text-secondary);
            margin: 0;
            text-align: center;
            font-size: 1.1em;
        }

        .reporte-footer {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid var(--border-color);
        }

        .estado-reporte {
            margin-bottom: 20px;
        }

        .estado-reporte label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .checkbox-estado {
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .checkbox-estado input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin: 0;
        }

        .checkbox-estado label {
            margin: 0;
            font-weight: normal;
            cursor: pointer;
        }

        .observaciones label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .observaciones textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-family: inherit;
            resize: vertical;
        }

        .tabla-reporte {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .tabla-reporte th,
        .tabla-reporte td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .tabla-reporte th {
            background: var(--secondary-color);
            color: white;
        }

        .tabla-reporte tr:hover {
            background: var(--light-bg);
        }

        .tabla-reporte tr:last-child td {
            border-bottom: none;
        }

        /* ESTILOS PARA SELECTOR DE INSTITUCIÓN */
        #institucion-reporte {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            color: var(--text-primary);
            transition: border-color 0.3s ease;
        }

        #institucion-reporte:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        #institucion-reporte option {
            padding: 8px;
            font-size: 14px;
        }

        /* Estilos para botón de exportar a Excel */
        .boton-accion.secundario[onclick*="exportarReporteExcel"] {
            background: var(--gradient-success);
            border-color: var(--success-color);
        }

        .boton-accion.secundario[onclick*="exportarReporteExcel"]:hover {
            background: linear-gradient(135deg, #45B649 0%, #4CAF50 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(76, 175, 80, 0.3);
        }

        /* ESTILOS PARA REPORTE AGRUPADO POR SEDES */
        .sede-grupo {
            margin-bottom: 30px;
            border: 2px solid var(--border-color);
            border-radius: 15px;
            overflow: hidden;
            background: white;
        }

        .sede-titulo {
            background: var(--gradient-warm);
            color: white;
            margin: 0;
            padding: 15px 20px;
            font-size: 1.3em;
            font-weight: 600;
        }

        .sede-resumen {
            background: var(--light-bg);
            margin: 0;
            padding: 10px 20px;
            color: var(--text-secondary);
            font-size: 0.95em;
            border-bottom: 1px solid var(--border-color);
        }

        .estado-recepcion {
            min-width: 200px;
        }

        .estado-opciones {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .estado-radio {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 0.9em;
        }

        .estado-radio input[type="radio"] {
            margin: 0;
            cursor: pointer;
        }

        .cantidad-recibida {
            margin-top: 10px;
            padding: 8px;
            background: var(--light-bg);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .cantidad-recibida label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.85em;
            color: var(--text-secondary);
        }

        .cantidad-recibida input[type="number"] {
            width: 80px;
            padding: 4px 8px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 0.9em;
        }

        /* ESTILOS PARA ESTADOS DE RECEPCIÓN */
        .estado-llego {
            background: rgba(76, 175, 80, 0.1) !important;
            border-left: 4px solid var(--success-color);
        }

        .estado-no-llego {
            background: rgba(255, 107, 53, 0.1) !important;
            border-left: 4px solid var(--primary-color);
        }

        .estado-parcial {
            background: rgba(255, 167, 38, 0.1) !important;
            border-left: 4px solid var(--warning-color);
        }

        .cantidad-cell {
            font-weight: 600;
            color: var(--primary-color);
            text-align: center;
        }

        @media print {
            .boton-volver, .botones-accion, .estado-reporte, .observaciones {
                display: none !important;
            }
            
            .reporte-header, .reporte-footer {
                border: 1px solid #000;
            }
            
            .tabla-reporte {
                box-shadow: none;
                border: 1px solid #000;
            }
            
            .tabla-reporte th {
                background: #ccc !important;
                color: #000 !important;
            }
            
            .sede-titulo {
                background: #ccc !important;
                color: #000 !important;
                -webkit-print-color-adjust: exact;
                color-adjust: exact;
            }
            
            .estado-llego {
                background: rgba(76, 175, 80, 0.1) !important;
                border-left: 4px solid var(--success-color) !important;
            }
            
            .estado-no-llego {
                background: rgba(255, 107, 53, 0.1) !important;
                border-left: 4px solid var(--primary-color) !important;
            }
            
            .estado-parcial {
                background: rgba(255, 167, 38, 0.1) !important;
                border-left: 4px solid var(--warning-color) !important;
            }
            
            body {
                font-size: 12px;
            }
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .menu-botones {
                grid-template-columns: 1fr;
            }
            
            .botones-accion {
                flex-direction: column;
            }
            
            .boton-accion {
                width: 100%;
            }
            
            .filtros-simples select {
                width: 100%;
                margin: 5px 0;
                padding: 18px 15px;
                font-size: 16px;
                min-width: auto;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
                background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right 15px center;
                background-size: 20px;
                padding-right: 50px;
            }

            /* Mejoras adicionales para formularios en móviles */
            .formulario-simple {
                padding: 20px;
                margin: 0 10px;
                max-width: none;
            }

            .campo-formulario input,
            .campo-formulario select,
            .campo-formulario textarea {
                padding: 18px 15px;
                font-size: 16px;
                border-radius: 12px;
                -webkit-appearance: none;
                -moz-appearance: none;
                appearance: none;
            }

            .campo-formulario select {
                background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
                background-repeat: no-repeat;
                background-position: right 15px center;
                background-size: 20px;
                padding-right: 50px;
            }

            /* Mejoras para filtros en móviles */
            .filtros-simples {
                padding: 15px;
                flex-direction: column;
                gap: 15px;
            }

            /* Mejoras para botones en móviles */
            .boton-accion {
                padding: 18px 30px;
                font-size: 1.1em;
                min-height: 50px;
            }

            /* Mejoras para menú de navegación */
            .menu-botones {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 15px;
                padding: 0 10px;
            }

            .boton-menu {
                padding: 20px 15px;
                font-size: 0.9em;
                min-height: 80px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                text-align: center;
            }

            .icono-boton {
                font-size: 1.5em;
                margin-bottom: 8px;
            }

            /* Mejoras para tablas en móviles */
            .tabla-stock,
            .tabla-reporte {
                font-size: 14px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .tabla-stock th,
            .tabla-stock td,
            .tabla-reporte th,
            .tabla-reporte td {
                padding: 12px 8px;
                white-space: nowrap;
            }

            /* Mejoras para campos de búsqueda */
            .campo-busqueda {
                width: 100%;
                margin: 10px 0;
            }

            .campo-busqueda input {
                width: 100%;
                min-width: auto;
                padding: 18px 15px;
                font-size: 16px;
            }
        }

        /* Mejoras adicionales para dispositivos táctiles */
        @media (hover: none) and (pointer: coarse) {
            /* Dispositivos táctiles */
            .boton-menu:hover,
            .boton-accion:hover,
            .nav-button:hover {
                transform: none;
                box-shadow: none;
            }

            .boton-menu:active,
            .boton-accion:active,
            .nav-button:active {
                transform: scale(0.95);
                transition: transform 0.1s ease;
            }

            .sugerencia-item:hover {
                background-color: var(--light-bg);
            }

            .sugerencia-item:active {
                background-color: var(--secondary-color);
                color: white;
            }
        }

        /* Mejoras para pantallas muy pequeñas */
        @media (max-width: 360px) {
            .header-main {
                padding: 0 5px;
                gap: 8px;
            }

            .title-section h1 {
                font-size: 1.4rem;
            }

            .logo-item img {
                height: 50px;
                padding: 5px;
            }

            .menu-botones {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .boton-menu {
                padding: 15px 10px;
                font-size: 0.8em;
                min-height: 70px;
            }

            .formulario-simple {
                padding: 15px;
                margin: 0 5px;
            }

            .campo-formulario input,
            .campo-formulario select,
            .campo-formulario textarea {
                padding: 15px 12px;
                font-size: 16px;
            }

            .filtros-simples select {
                padding: 15px 12px;
                font-size: 16px;
            }
        }

        /* Mejoras para orientación landscape en móviles */
        @media (max-width: 768px) and (orientation: landscape) {
            .header-main {
                margin-bottom: 15px;
            }

            .menu-botones {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }

            .boton-menu {
                padding: 15px 10px;
                font-size: 0.8em;
                min-height: 60px;
            }

            .icono-boton {
                font-size: 1.2em;
                margin-bottom: 4px;
            }
        }

        .alert-info {
            background: rgba(102, 187, 106, 0.1);
            border-color: var(--info-color);
            color: var(--info-color);
        }

        /* Estilos para la sección de restablecer inventario */
        .info-adicional {
            background: rgba(255, 107, 53, 0.05);
            border: 1px solid rgba(255, 107, 53, 0.2);
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
        }

        .info-adicional h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .info-adicional ul {
            margin: 0;
            padding-left: 20px;
        }

        .info-adicional li {
            margin-bottom: 8px;
            color: var(--text-secondary);
        }

        .info-adicional li:last-child {
            margin-bottom: 0;
        }

        /* Estilos específicos para el botón de restablecer */
        .boton-menu.restablecer {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.05) 0%, rgba(255, 140, 66, 0.05) 100%);
        }

        .boton-menu.restablecer:hover {
            border-color: var(--warning-color);
            background: linear-gradient(135deg, rgba(255, 167, 38, 0.1) 0%, rgba(255, 140, 66, 0.1) 100%);
        }

        /* Estilos para el campo de clave */
        #clave-restablecer {
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
            text-align: center;
            font-weight: bold;
        }

        #clave-restablecer:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);
        }
        
        /* ESTILOS PARA EL INDICADOR DE CONEXIÓN */
        .indicador-conexion {
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .indicador-conexion.conectado {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .indicador-conexion.desconectado {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .indicador-conexion.verificando {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        /* ===== ESTILOS MEJORADOS PARA TABLA DE STOCK ===== */
        
        /* Contenedor de la tabla con diseño moderno */
        .tabla-stock-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            border: 2px solid #e0e0e0;
            overflow: visible;
            margin: 25px 0;
            backdrop-filter: blur(20px);
            position: relative;
            width: 100%;
            display: block;
            padding: 0;
        }

        .tabla-stock-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            border-radius: 20px 20px 0 0;
        }

        /* Contenedor interno para scroll */
        .tabla-stock-scroll {
            overflow-x: auto;
            border-radius: 20px;
        }

        /* Tabla principal */
        .tabla-stock {
            width: 100%;
            border-collapse: collapse;
            margin: 0;
            background: transparent;
            font-size: 0.95rem;
            position: relative;
            table-layout: fixed;
            min-width: 800px;
            border-radius: 20px;
            overflow: hidden;
        }

        /* Encabezados de tabla */
        .tabla-stock th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 700;
            font-size: 0.85rem;
            padding: 20px 15px;
            text-align: left;
            border: none;
            position: sticky;
            top: 0;
            z-index: 10;
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        }

        .tabla-stock th:first-child {
            border-top-left-radius: 20px;
            text-align: center;
        }

        .tabla-stock th:last-child {
            border-top-right-radius: 20px;
            text-align: center;
        }

        /* Celdas de datos */
        .tabla-stock td {
            padding: 18px 15px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            vertical-align: middle;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        /* Filas con efectos hover */
        .tabla-stock tr {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .tabla-stock tr:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .tabla-stock tr:hover td {
            border-color: rgba(102, 126, 234, 0.2);
        }

        .tabla-stock tr:last-child td {
            border-bottom: none;
        }

        /* Estilos específicos para columnas */
        .tabla-stock th:first-child,
        .tabla-stock td:first-child {
            text-align: center;
            width: 60px;
            padding: 15px 10px;
        }

        .tabla-stock th:nth-child(2),
        .tabla-stock td:nth-child(2) {
            font-weight: 700;
            color: #2c3e50;
            font-size: 1rem;
            width: 25%;
        }

        .tabla-stock th:nth-child(3),
        .tabla-stock td:nth-child(3) {
            font-weight: 700;
            color: #27ae60;
            font-size: 1.1rem;
            width: 15%;
        }

        .tabla-stock th:nth-child(4),
        .tabla-stock td:nth-child(4) {
            color: #7f8c8d;
            font-weight: 500;
            width: 20%;
        }

        .tabla-stock th:nth-child(5),
        .tabla-stock td:nth-child(5) {
            word-wrap: break-word;
            line-height: 1.4;
            width: 30%;
            max-width: none;
        }

        .tabla-stock th:last-child,
        .tabla-stock td:last-child {
            text-align: center;
            width: 10%;
            padding: 15px 10px;
        }

        /* Checkbox personalizado */
        .checkbox-producto {
            width: 20px;
            height: 20px;
            accent-color: #667eea;
            cursor: pointer;
            transform: scale(1.3);
            transition: all 0.3s ease;
        }

        .checkbox-producto:hover {
            transform: scale(1.4);
            filter: brightness(1.2);
        }

        /* Botones de acción en la tabla */
        .tabla-stock .boton-accion {
            padding: 10px 14px;
            font-size: 0.8rem;
            margin: 3px;
            border-radius: 12px;
            border: none;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }

        .tabla-stock .boton-accion::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .tabla-stock .boton-accion:hover::before {
            left: 100%;
        }

        .tabla-stock .boton-accion:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .tabla-stock .boton-accion:active {
            transform: translateY(-1px);
        }

        /* Estilos para comentarios en la tabla */
        .comentario-en-tabla {
            background: rgba(255, 255, 255, 0.8);
            border-radius: 12px;
            padding: 12px;
            margin: 5px 0;
            border-left: 4px solid;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .comentario-en-tabla:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }

        /* ===== RESPONSIVIDAD MEJORADA ===== */
        
        /* Tablets */
        @media (max-width: 1024px) {
            .tabla-stock-container {
                margin: 20px 10px;
                border-radius: 15px;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 15px 12px;
            }
            
            .tabla-stock th {
                font-size: 0.8rem;
            }
            
            .tabla-stock td:nth-child(5) {
                max-width: 250px;
            }
        }

        /* Móviles grandes */
        @media (max-width: 768px) {
            .tabla-stock-container {
                margin: 15px 5px;
                border-radius: 12px;
                width: calc(100% - 10px);
                display: block;
            }
            
            .tabla-stock-scroll {
                overflow-x: auto;
                border-radius: 12px;
            }
            
            .tabla-stock {
                min-width: 800px;
                width: 100%;
                table-layout: fixed;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 12px 10px;
                font-size: 0.85rem;
            }
            
            .tabla-stock th {
                font-size: 0.75rem;
                padding: 15px 8px;
            }
            
            .tabla-stock td:nth-child(5) {
                max-width: 200px;
            }
            
            .tabla-stock .boton-accion {
                padding: 8px 10px;
                font-size: 0.7rem;
                margin: 2px;
            }
        }

        /* Móviles pequeños */
        @media (max-width: 480px) {
            .tabla-stock-container {
                margin: 10px 0;
                border-radius: 10px;
                width: 100%;
                display: block;
            }
            
            .tabla-stock-scroll {
                overflow-x: auto;
                border-radius: 10px;
            }
            
            .tabla-stock {
                min-width: 800px;
                width: 100%;
                table-layout: fixed;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 10px 8px;
                font-size: 0.8rem;
            }
            
            .tabla-stock th {
                font-size: 0.7rem;
                padding: 12px 6px;
            }
            
            .tabla-stock td:nth-child(5) {
                max-width: 150px;
                font-size: 0.75rem;
            }
            
            .tabla-stock .boton-accion {
                padding: 6px 8px;
                font-size: 0.65rem;
                margin: 1px;
            }
            
            .checkbox-producto {
                width: 18px;
                height: 18px;
                transform: scale(1.2);
            }
        }

        /* Móviles muy pequeños */
        @media (max-width: 360px) {
            .tabla-stock-container {
                margin: 5px 0;
                width: 100%;
                display: block;
            }
            
            .tabla-stock-scroll {
                overflow-x: auto;
                border-radius: 8px;
            }
            
            .tabla-stock {
                min-width: 800px;
                width: 100%;
                table-layout: fixed;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 8px 6px;
                font-size: 0.75rem;
            }
            
            .tabla-stock th {
                font-size: 0.65rem;
                padding: 10px 4px;
            }
            
            .tabla-stock td:nth-child(5) {
                max-width: 120px;
                font-size: 0.7rem;
            }
        }

        /* ===== RESPONSIVIDAD PARA FILTROS DE STOCK ===== */
        
        /* Tablets - Filtros */
        @media (max-width: 1024px) {
            .filtros-simples {
                padding: 15px;
                margin-bottom: 15px;
            }
            
            .filtros-simples select {
                min-width: 120px;
                margin: 5px;
                font-size: 0.9rem;
            }
        }

        /* Móviles grandes - Filtros */
        @media (max-width: 768px) {
            .filtros-simples {
                padding: 10px;
                margin-bottom: 10px;
                display: flex;
                flex-direction: column;
                gap: 10px;
            }
            
            .filtros-simples select {
                width: 100%;
                min-width: auto;
                margin: 0;
                font-size: 0.9rem;
                padding: 12px 15px;
            }
            
            .formulario-simple {
                padding: 15px;
                margin: 10px;
                max-width: none;
            }
            
            .formulario-simple h2 {
                font-size: 1.5rem;
                margin-bottom: 15px;
            }
        }

        /* Móviles pequeños - Filtros */
        @media (max-width: 480px) {
            .filtros-simples {
                padding: 8px;
                margin-bottom: 8px;
            }
            
            .filtros-simples select {
                font-size: 0.85rem;
                padding: 10px 12px;
            }
            
            .formulario-simple {
                padding: 10px;
                margin: 5px;
            }
            
            .formulario-simple h2 {
                font-size: 1.3rem;
                margin-bottom: 10px;
            }
        }

        /* Móviles muy pequeños - Filtros */
        @media (max-width: 360px) {
            .filtros-simples {
                padding: 5px;
                margin-bottom: 5px;
            }
            
            .filtros-simples select {
                font-size: 0.8rem;
                padding: 8px 10px;
            }
            
            .formulario-simple {
                padding: 8px;
                margin: 2px;
            }
            
            .formulario-simple h2 {
                font-size: 1.2rem;
                margin-bottom: 8px;
            }
        }

        /* ===== RESPONSIVIDAD PARA BOTONES DE ACCIÓN ===== */
        
        /* Móviles grandes - Botones */
        @media (max-width: 768px) {
            .botones-accion-stock {
                flex-direction: column;
                gap: 10px;
                margin: 15px 0;
            }
            
            .botones-accion-stock .boton-accion {
                width: 100%;
                padding: 12px 15px;
                font-size: 0.9rem;
                margin: 0;
            }
        }

        /* Móviles pequeños - Botones */
        @media (max-width: 480px) {
            .botones-accion-stock {
                margin: 10px 0;
                gap: 8px;
            }
            
            .botones-accion-stock .boton-accion {
                padding: 10px 12px;
                font-size: 0.85rem;
            }
        }

        /* Móviles muy pequeños - Botones */
        @media (max-width: 360px) {
            .botones-accion-stock {
                margin: 8px 0;
                gap: 6px;
            }
            
            .botones-accion-stock .boton-accion {
                padding: 8px 10px;
                font-size: 0.8rem;
            }
        }

        /* ===== RESPONSIVIDAD PARA BOTÓN VOLVER ===== */
        
        /* Móviles grandes */
        @media (max-width: 768px) {
            .boton-volver {
                width: 100%;
                margin-bottom: 15px;
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }

        /* Móviles pequeños */
        @media (max-width: 480px) {
            .boton-volver {
                margin-bottom: 10px;
                padding: 10px 12px;
                font-size: 0.85rem;
            }
        }

        /* Móviles muy pequeños */
        @media (max-width: 360px) {
            .boton-volver {
                margin-bottom: 8px;
                padding: 8px 10px;
                font-size: 0.8rem;
            }
        }

        /* ===== RESPONSIVIDAD PARA INFORMACIÓN DE STOCK ===== */
        
        /* Móviles grandes */
        @media (max-width: 768px) {
            .info-filtros {
                padding: 10px 15px;
                font-size: 0.9rem;
                margin: 10px 0;
            }
        }

        /* Móviles pequeños */
        @media (max-width: 480px) {
            .info-filtros {
                padding: 8px 12px;
                font-size: 0.85rem;
                margin: 8px 0;
            }
        }

        /* Móviles muy pequeños */
        @media (max-width: 360px) {
            .info-filtros {
                padding: 6px 10px;
                font-size: 0.8rem;
                margin: 6px 0;
            }
        }

        /* Scroll horizontal suave */
        .tabla-stock-scroll::-webkit-scrollbar {
            height: 8px;
        }

        /* ===== MEJORAS ADICIONALES DE RESPONSIVIDAD ===== */
        
        /* Indicador de scroll para móviles */
        @media (max-width: 768px) {
            .tabla-stock-container::after {
                content: "← Desliza horizontalmente para ver más columnas →";
                position: absolute;
                bottom: -25px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(255, 107, 53, 0.9);
                color: white;
                padding: 5px 10px;
                border-radius: 15px;
                font-size: 0.7rem;
                font-weight: 600;
                white-space: nowrap;
                z-index: 10;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            }
        }

        /* Mejorar el contraste en móviles */
        @media (max-width: 480px) {
            .tabla-stock th {
                background: var(--primary-color) !important;
                color: white !important;
                font-weight: 700;
            }
            
            .tabla-stock tr:nth-child(even) {
                background: rgba(255, 107, 53, 0.05);
            }
            
            .tabla-stock tr:hover {
                background: rgba(255, 107, 53, 0.1) !important;
            }
        }

        /* Optimización para pantallas muy pequeñas */
        @media (max-width: 360px) {
            .tabla-stock-container::after {
                font-size: 0.65rem;
                padding: 4px 8px;
                bottom: -20px;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                border: 1px solid rgba(0,0,0,0.1);
            }
        }

        /* ===== ESTILOS PARA BOTÓN ELIMINAR MOVIMIENTO ===== */
        
        .boton-eliminar-movimiento {
            background: linear-gradient(135deg, #ff4757 0%, #ff3838 100%);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(255, 71, 87, 0.3);
            min-width: 40px;
            height: 35px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .boton-eliminar-movimiento:hover {
            background: linear-gradient(135deg, #ff3838 0%, #ff2f2f 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 71, 87, 0.4);
        }

        .boton-eliminar-movimiento:active {
            transform: translateY(0);
            box-shadow: 0 2px 6px rgba(255, 71, 87, 0.3);
        }

        /* Responsividad para botón eliminar */
        @media (max-width: 768px) {
            .boton-eliminar-movimiento {
                padding: 6px 10px;
                font-size: 0.8rem;
                min-width: 35px;
                height: 30px;
            }
        }

        @media (max-width: 480px) {
            .boton-eliminar-movimiento {
                padding: 5px 8px;
                font-size: 0.75rem;
                min-width: 30px;
                height: 28px;
            }
        }

        .tabla-stock-scroll::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 4px;
        }

        .tabla-stock-scroll::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
        }

        .tabla-stock-scroll::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(90deg, #5a6fd8, #6a4190);
        }

        /* Estilos adicionales para mejoras móviles */
        .select-movil {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .select-movil:focus {
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.2);
            transform: scale(1.02);
        }

        .tiene-contenido {
            border-color: var(--secondary-color) !important;
            background-color: rgba(76, 175, 80, 0.05) !important;
        }

        /* Mejoras para scroll suave en móviles */
        .tabla-stock,
        .tabla-reporte {
            scroll-behavior: smooth;
        }

        /* Mejoras para contenedores de tablas */
        .tabla-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin: 10px 0;
        }

        /* Mejoras para elementos táctiles */
        .elemento-tactil {
            -webkit-tap-highlight-color: rgba(76, 175, 80, 0.2);
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Mejoras para botones en dispositivos táctiles */
        .boton-menu,
        .boton-accion,
        .nav-button {
            -webkit-tap-highlight-color: rgba(76, 175, 80, 0.2);
            -webkit-touch-callout: none;
        }

        /* Mejoras para campos de entrada en móviles */
        input[type="text"],
        input[type="number"],
        input[type="date"],
        textarea {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        /* Mejoras para checkboxes y radio buttons en móviles */
        input[type="checkbox"],
        input[type="radio"] {
            transform: scale(1.2);
            margin: 8px;
        }

        /* Mejoras para elementos de sugerencia */
        .sugerencia-item {
            -webkit-tap-highlight-color: rgba(76, 175, 80, 0.2);
            transition: background-color 0.2s ease;
        }

        .sugerencia-item:active {
            background-color: var(--secondary-color) !important;
            color: white !important;
        }
        
        /* CONTENEDOR DE TABLA STOCK */
        .tabla-stock-container {
            width: 100%;
            overflow-x: auto;
            border-radius: 10px;
            box-shadow: var(--shadow-light);
            position: relative;
        }
        
        .tabla-stock-container::after {
            content: "← Desliza para ver más →";
            position: absolute;
            bottom: 5px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7em;
            opacity: 0.8;
            pointer-events: none;
        }
        
        @media (min-width: 1200px) {
            .tabla-stock-container::after {
                display: none;
            }
        }
        
        .tabla-stock-scroll {
            min-width: 100%;
            overflow-x: auto;
        }
        
        .tabla-stock {
            width: 100%;
            min-width: 900px; /* Aumentar ancho mínimo para dar espacio a acciones */
            border-collapse: collapse;
            margin: 0;
            background: white;
        }
        
        .tabla-stock th,
        .tabla-stock td {
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
            white-space: nowrap;
        }
        
        .tabla-stock th {
            background: var(--gradient-cool);
            color: white;
            font-weight: 600;
            font-size: 0.9em;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .tabla-stock td {
            font-size: 0.85em;
        }
        
        .tabla-stock tr:hover {
            background: var(--light-bg);
        }
        
        /* RESPONSIVE PARA TABLA DE STOCK */
        @media (max-width: 1200px) {
            .tabla-stock {
                min-width: 800px;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 10px 6px;
                font-size: 0.8em;
            }
        }
        
        @media (max-width: 768px) {
            .tabla-stock {
                min-width: 700px;
                font-size: 14px;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 8px 4px;
                font-size: 0.75em;
            }
            
            .tabla-stock th:nth-child(5),
            .tabla-stock td:nth-child(5) {
                display: none; /* Ocultar columna de comentarios en móvil */
            }
            
        .tabla-stock th:nth-child(6),
        .tabla-stock td:nth-child(6) {
            width: 140px; /* Aumentar ancho de acciones */
            min-width: 140px;
        }
            
            .boton-accion {
                padding: 4px 6px !important;
                font-size: 10px !important;
                margin: 1px !important;
            }
        }
        
        @media (max-width: 480px) {
            .tabla-stock {
                min-width: 600px;
            }
            
            .tabla-stock th:nth-child(4),
            .tabla-stock td:nth-child(4) {
                display: none; /* Ocultar columna de sede en móvil pequeño */
            }
            
            .tabla-stock th:nth-child(6),
            .tabla-stock td:nth-child(6) {
                width: 120px;
                min-width: 120px;
            }
            
            .tabla-stock th,
            .tabla-stock td {
                padding: 6px 3px;
                font-size: 0.7em;
            }
        }
        
        /* Estilos específicos para botones de acciones en tabla */
        .tabla-stock .boton-accion {
            padding: 4px 8px !important;
            font-size: 11px !important;
            margin: 2px 1px !important;
            min-width: 60px;
            text-align: center;
            white-space: nowrap;
        }
        
        .tabla-stock td:nth-child(6) {
            text-align: center;
            vertical-align: middle;
        }
    </style>
    
    <!-- Firebase Configuration -->
    <script type="module" src="firebase-config.js?v=2"></script>
    
    <!-- Firebase Styles -->
    <link rel="stylesheet" href="firebase-styles.css">
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header>
            <!-- Elementos decorativos de fondo -->
            <div class="header-decoration">
                <div class="decoration-circle circle-1"></div>
                <div class="decoration-circle circle-2"></div>
                <div class="decoration-circle circle-3"></div>
                <div class="decoration-wave"></div>
            </div>
            
            <div class="header-main">
                <!-- Logo CIS -->
                <div class="logo-item">
                    <div class="logo-container">
                        <img src="img/logo cis .jpg" alt="Logo CIS" title="Centro de Innovación Social">
                        <div class="logo-glow"></div>
                    </div>
                    <div class="logo-label">
                        <span class="logo-text">CIS</span>
                        <span class="logo-subtitle">Interuniversitaria de Servicios </span>
                    </div>
                </div>
                
                <!-- Título Principal -->
                <div class="title-section">
                    <div class="title-container">
                        <h1 class="main-title">
                            <span class="title-highlight">SISTEMA</span>
                            <span class="title-main">PAE DIGITAL</span>
                        </h1>
                        <p class="header-subtitle">
                            <i class="bi bi-shield-check"></i>
                            Control de Inventario 
                        </p>
                        <div class="title-badge">
                            <span class="badge-text">Versión 3.0</span>
                        </div>
                    </div>
                </div>
                
                <!-- Logo Alcaldía -->
                <div class="logo-item">
                    <div class="logo-container">
                        <img src="img/alcaldia .png" alt="Logo Alcaldía" title="Alcaldía Municipal">
                        <div class="logo-glow"></div>
                    </div>
                    <div class="logo-label">
                        <span class="logo-text">ALCALDÍA DE ENVIGADO</span>
                        <span class="logo-subtitle">PAE</span>
                    </div>
                </div>
            </div>
            
            <!-- Barra de estado -->
            <div class="header-status">
                <div class="status-item">
                    <i class="bi bi-wifi"></i>
                    <span>Conectado</span>
                </div>
                <div class="status-item">
                    <i class="bi bi-clock"></i>
                    <span id="current-time"></span>
                </div>
                <div class="status-item">
                    <i class="bi bi-calendar-check"></i>
                    <span id="current-date"></span>
                </div>
            </div>
        </header>
        
        <!-- MENÚ PRINCIPAL -->
        <div id="menu-principal" class="menu-principal">
            
            <!-- INDICADOR DE ESTADO DE CONEXIÓN -->
            <div id="indicador-conexion-container" style="margin-bottom: 20px; text-align: center;">
                <div id="indicador-conexion" class="firebase-status disconnected" style="display: inline-block; padding: 8px 16px; border-radius: 20px; font-weight: 600; font-size: 14px;">
                    🔥 Firebase: Conectando...
                </div>
                <div style="margin-top: 8px; font-size: 12px; color: #666;">
                    <span id="firebase-status-text">Verificando conexión con Firebase...</span>
                </div>
            </div>
            
            <div class="menu-botones">
                <button class="boton-menu entrada" onclick="mostrarSeccion('entrada')">
                    <i class="bi bi-box-arrow-in-down icono-boton"></i>
                    <span>ENTRADA DE PRODUCTOS</span>
                </button>
                
                <button class="boton-menu salida" onclick="mostrarSeccion('salida')">
                    <i class="bi bi-box-arrow-up icono-boton"></i>
                    <span>SALIDA/CONSUMO DE PRODUCTOS</span>
                </button>
                
                <button class="boton-menu devolucion" onclick="mostrarSeccion('devolucion')">
                    <i class="bi bi-arrow-return-left icono-boton"></i>
                    <span>DEVOLUCIÓN</span>
                </button>
                
                <button class="boton-menu ver-stock" onclick="mostrarSeccion('stock')">
                    <i class="bi bi-bar-chart icono-boton"></i>
                    <span>VER STOCK</span>
                </button>
                
                <button class="boton-menu ver-historial" onclick="mostrarSeccion('historial')">
                    <i class="bi bi-clipboard-data icono-boton"></i>
                    <span>VER HISTORIAL</span>
                </button>
                
                
                <button class="boton-menu buscar-lotes" onclick="mostrarSeccion('buscar-lotes')">
                    <i class="bi bi-search icono-boton"></i>
                    <span>BUSCAR LOTES</span>
                </button>
                
                <button class="boton-menu restablecer" onclick="mostrarSeccion('restablecer')">
                    <i class="bi bi-arrow-clockwise icono-boton"></i>
                    <span>RESTABLECER INVENTARIO</span>
                </button>
                
                <button class="boton-menu firebase" onclick="reiniciarSincronizacion()" style="display: none;">
                    <i class="bi bi-cloud-arrow-up icono-boton"></i>
                    <span>SYNC FIREBASE</span>
                </button>
                
                <button class="boton-menu debug" onclick="debugFirebase()" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); display: none;">
                    <i class="bi bi-bug icono-boton"></i>
                    <span>DEBUG FIREBASE</span>
                </button>
                
                <button class="boton-menu inventario" onclick="actualizarInventarioDesdeFirebase()" style="background: linear-gradient(135deg, #4ecdc4 0%, #44a08d 100%); display: none;">
                    <i class="bi bi-arrow-clockwise icono-boton"></i>
                    <span>ACTUALIZAR STOCK</span>
                </button>
                
                <button class="boton-menu restablecer-productos" onclick="restablecerSoloProductos()" style="background: linear-gradient(135deg, #ff9a56 0%, #ff6b6b 100%); display: none;">
                    <i class="bi bi-trash icono-boton"></i>
                    <span>RESTABLECER STOCK</span>
                </button>
                
                <button class="boton-menu debug-inventario" onclick="debugInventario()" style="background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%); display: none;">
                    <i class="bi bi-search icono-boton"></i>
                    <span>DEBUG INVENTARIO</span>
                </button>
                
                <button class="boton-menu forzar-sync" onclick="forzarSincronizacionInventario()" style="background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%); display: none;">
                    <i class="bi bi-arrow-repeat icono-boton"></i>
                    <span>FORZAR SYNC</span>
                </button>
                
                <button class="boton-menu verificar-productos" onclick="verificarProductosFirebase()" style="background: linear-gradient(135deg, #f39c12 0%, #e67e22 100%); display: none;">
                    <i class="bi bi-check-circle icono-boton"></i>
                    <span>VERIFICAR PRODUCTOS</span>
                </button>
            
            </div>
        </div>
        
        <!-- SECCIÓN ENTRADA -->
        <div id="seccion-entrada" class="seccion">
            <button class="boton-volver" onclick="volverMenu()">← VOLVER AL MENÚ</button>
            
            <div class="formulario-simple">
                <h2>📥 ENTRADA DE PRODUCTOS</h2>
                
                <div class="campo-formulario">
                    <label for="producto-entrada">¿Qué producto estás recibiendo?</label>
                    <div class="autocomplete-container">
                        <input type="text" id="producto-entrada" placeholder="Escribe el nombre del producto...">
                        <div id="sugerencias-entrada" class="sugerencias-lista"></div>
                    </div>
                </div>
                
                <div class="campo-formulario">
                    <label for="cantidad-entrada">¿Qué cantidad?</label>
                    <input type="number" id="cantidad-entrada" placeholder="Ejemplo: 10" min="1">
                </div>
                
                <div class="campo-formulario">
                    <label for="sede-entrada">¿En qué sede?</label>
                    <select id="sede-entrada">
                        <option value="">Selecciona una sede</option>
                        <option value="BODEGA CENTRAL">BODEGA CENTRAL</option>
                        <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                        <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                        <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                        <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                        <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                        <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                        <option value="IE El Salado">IE El Salado</option>
                        <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                        <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                        <option value="IE La Paz">IE La Paz</option>
                        <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                        <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                        <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                        <option value="IE Las Palmas">IE Las Palmas</option>
                        <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                        <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                        <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                        <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                        <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                        <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                        <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                        <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                        <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                        <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                    </select>
                </div>
                
                <div class="campo-formulario">
                    <label for="descripcion-entrada">Descripción (opcional)</label>
                    <textarea id="descripcion-entrada" placeholder="Ejemplo: Arroz blanco de 1kg, marca X..."></textarea>
                </div>
                
                <div class="campo-formulario">
                    <label for="modalidad-entrada">¿Qué modalidad de servicio?</label>
                    <select id="modalidad-entrada">
                        <option value="">Selecciona la modalidad</option>
                        <option value="Desayuno">Desayuno</option>
                        <option value="RI">RI</option>
                        <option value="Almuerzo">Almuerzo</option>
                        <option value="RPS">RPS</option>
                        <option value="Paquetes">Paquetes</option>
                    </select>
                </div>
                
                <div class="campo-formulario">
                    <label for="fecha-vencimiento-entrada">Fecha de vencimiento</label>
                    <input type="date" id="fecha-vencimiento-entrada">
                    <div class="checkbox-container">
                        <input type="checkbox" id="fecha-no-aplica-entrada">
                        <label for="fecha-no-aplica-entrada">No aplica (ej: verduras frescas)</label>
                    </div>
                </div>
                
                <div class="campo-formulario">
                    <label for="lote-entrada">Número de lote</label>
                    <input type="text" id="lote-entrada" placeholder="Ejemplo: LOTE-2024-001">
                    <div class="checkbox-container">
                        <input type="checkbox" id="lote-no-aplica-entrada">
                        <label for="lote-no-aplica-entrada">No aplica (ej: productos frescos)</label>
                    </div>
                </div>
                
                <div class="campo-formulario">
                    <label for="responsable-entrada">👤 Responsable del movimiento</label>
                    <div class="campo-busqueda">
                        <input type="text" id="responsable-entrada" placeholder="Escribe el nombre o cédula del responsable..." autocomplete="off" required>
                        <div id="sugerencias-responsable-entrada" class="sugerencias-lista"></div>
                    </div>
                </div>
                
                <div class="botones-accion">
                    <button class="boton-accion principal" onclick="registrarEntrada()">✅ REGISTRAR ENTRADA</button>
                    <button class="boton-accion secundario" onclick="limpiarFormularioEntrada()">🧹 LIMPIAR</button>
                </div>
            </div>
        </div>
        
        <!-- SECCIÓN SALIDA -->
        <div id="seccion-salida" class="seccion">
            <button class="boton-volver" onclick="volverMenu()">← VOLVER AL MENÚ</button>
            
            <div class="formulario-simple">
                <h2>📤 SALIDA/CONSUMO DE PRODUCTOS</h2>
                
                <div class="campo-formulario">
                    <label for="sede-salida">¿De qué sede?</label>
                    <select id="sede-salida" onchange="cargarProductosPorSede()">
                        <option value="">Selecciona una sede</option>
                        <option value="BODEGA CENTRAL">BODEGA CENTRAL</option>
                        <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                        <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                        <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                        <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                        <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                        <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                        <option value="IE El Salado">IE El Salado</option>
                        <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                        <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                        <option value="IE La Paz">IE La Paz</option>
                        <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                        <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                        <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                        <option value="IE Las Palmas">IE Las Palmas</option>
                        <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                        <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                        <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                        <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                        <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                        <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                        <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                        <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                        <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                        <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                    </select>
                </div>
                
                <div class="campo-formulario" id="campo-producto-salida" style="display: none;">
                    <label for="producto-salida">¿Qué producto estás sacando?</label>
                    <div class="campo-busqueda">
                        <input type="text" id="producto-salida" placeholder="Escribe el nombre del producto..." autocomplete="off">
                        <div id="sugerencias-salida" class="sugerencias-lista"></div>
                    </div>
                </div>
                
                <div class="campo-formulario" id="campo-cantidad-salida" style="display: none;">
                    <label for="cantidad-salida">¿Qué cantidad?</label>
                    <input type="number" id="cantidad-salida" placeholder="Ejemplo: 5" min="1">
                </div>
                
                <div class="campo-formulario" id="campo-agregar-salida" style="display: none;">
                    <button type="button" onclick="agregarProductoSalida()" class="boton-accion secundario" style="width: 100%; margin-top: 10px;">
                        ➕ AGREGAR PRODUCTO A LA LISTA
                    </button>
                </div>
                
                <!-- LISTA DE PRODUCTOS SELECCIONADOS -->
                <div id="lista-productos-salida" style="margin-top: 20px; display: none;">
                    <h4>📋 PRODUCTOS SELECCIONADOS</h4>
                    <div id="productos-seleccionados" style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 15px;">
                        <!-- Aquí se mostrarán los productos seleccionados -->
                    </div>
                    <div style="margin-top: 15px; text-align: center;">
                        <button type="button" onclick="limpiarListaProductos()" class="boton-accion secundario" style="background: #dc3545;">
                            🗑️ LIMPIAR LISTA
                        </button>
                    </div>
                </div>
                
                <div class="campo-formulario" id="campo-destino" style="display: none;">
                    <label for="sede-destino">¿Para qué sede va?</label>
                    <select id="sede-destino">
                        <option value="">Selecciona la sede destino</option>
                        <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                        <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                        <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                        <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                        <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                        <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                        <option value="IE El Salado">IE El Salado</option>
                        <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                        <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                        <option value="IE La Paz">IE La Paz</option>
                        <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                        <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                        <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                        <option value="IE Las Palmas">IE Las Palmas</option>
                        <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                        <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                        <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                        <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                        <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                        <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                        <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                        <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                        <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                        <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                        <option value="PAQUETES">📦 PAQUETES (Usuario Final)</option>
                        <option value="CLEI">🎓 CLEI (Usuario Final)</option>
                    </select>
                </div>
                
                <div class="campo-formulario">
                    <label for="tipo-uso">¿Qué Modalidad?</label>
                    <select id="tipo-uso">
                        <option value="">Selecciona el tipo de servicio</option>
                        <option value="Desayuno">Desayuno</option>
                        <option value="RI">RI</option>
                        <option value="Almuerzo">Almuerzo</option>
                        <option value="RPS">RPS</option>
                        <option value="Paquetes">Paquetes</option>
                    </select>
                </div>
                
                <div class="campo-formulario">
                    <label for="responsable-salida">👤 Responsable del movimiento</label>
                    <div class="campo-busqueda">
                        <input type="text" id="responsable-salida" placeholder="Escribe el nombre o cédula del responsable..." autocomplete="off" required>
                        <div id="sugerencias-responsable-salida" class="sugerencias-lista"></div>
                    </div>
                </div>
                
                <div class="campo-formulario" id="campo-cupos-modalidad">
                    <label for="cupos-modalidad">👥 Cupos para esta modalidad</label>
                    <input type="number" id="cupos-modalidad" placeholder="Ejemplo: 150" min="1" style="background: #e8f5e8;">
                    <small style="color: #666; font-size: 0.9em;">Número total de personas que se beneficiarán con esta salida</small>
                </div>
                
                <div class="botones-accion">
                    <button class="boton-accion principal" onclick="hacerSalidaSimple()">✅ REGISTRAR SALIDA SIMPLE</button>
                    <button class="boton-accion secundario" onclick="registrarSalida()">📦 REGISTRAR SALIDA MÚLTIPLE</button>
                    <button class="boton-accion secundario" onclick="limpiarFormularioSalida()">🧹 LIMPIAR</button>
                </div>
            </div>
        </div>
        
        <!-- SECCIÓN DEVOLUCIÓN -->
        <div id="seccion-devolucion" class="seccion">
            <button class="boton-volver" onclick="volverMenu()">← VOLVER AL MENÚ</button>
            
            <div class="formulario-simple">
                <h2>↩️ DEVOLUCIÓN DE PRODUCTOS</h2>
                <p class="descripcion-funcion">Devuelve productos de una sede a la bodega principal</p>
                
                <div class="campo-formulario">
                    <label for="sede-devolucion">¿De qué sede estás devolviendo?</label>
                    <select id="sede-devolucion" onchange="cargarProductosPorSedeDevolucion()">
                        <option value="">Selecciona la sede</option>
                        <option value="BODEGA CENTRAL">BODEGA CENTRAL</option>
                        <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                        <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                        <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                        <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                        <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                        <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                        <option value="IE El Salado">IE El Salado</option>
                        <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                        <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                        <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                        <option value="IE La Paz">IE La Paz</option>
                        <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                        <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                        <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                        <option value="IE Las Palmas">IE Las Palmas</option>
                        <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                        <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                        <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                        <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                        <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                        <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                        <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                        <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                        <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                        <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                    </select>
                </div>
                
                <div class="campo-formulario" id="campo-producto-devolucion" style="display: none;">
                    <label for="producto-devolucion">¿Qué producto estás devolviendo?</label>
                    <div class="campo-busqueda">
                        <input type="text" id="producto-devolucion" placeholder="Escribe el nombre del producto..." autocomplete="off">
                        <div id="sugerencias-devolucion" class="sugerencias-lista"></div>
                    </div>
                </div>
                
                <div class="campo-formulario" id="campo-cantidad-devolucion" style="display: none;">
                    <label for="cantidad-devolucion">¿Qué cantidad?</label>
                    <input type="number" id="cantidad-devolucion" placeholder="Ejemplo: 2" min="1">
                </div>
                
                <div class="campo-formulario" id="campo-motivo-devolucion" style="display: none;">
                    <label for="motivo-devolucion">¿Por qué se devuelve?</label>
                    <select id="motivo-devolucion" onchange="mostrarCampoOtroMotivo()">
                        <option value="">Selecciona el motivo</option>
                        <option value="Cancelaciones">Cancelaciones</option>
                        <option value="Disminución de cupos">Disminución de cupos</option>
                        <option value="Pérdidas de características organolépticas">Pérdidas de características organolépticas</option>
                        <option value="Producto no conforme">Producto no conforme</option>
                        <option value="Otro">Otro</option>
                    </select>
                    <div id="campo-otro-motivo" style="display: none; margin-top: 10px;">
                        <label for="motivo-otro-devolucion">Especifica el motivo:</label>
                        <textarea id="motivo-otro-devolucion" placeholder="Describe el motivo específico..."></textarea>
                    </div>
                </div>
                
                <div class="campo-formulario" id="campo-modalidad-devolucion" style="display: none;">
                    <label for="modalidad-devolucion">¿Qué modalidad de servicio?</label>
                    <select id="modalidad-devolucion">
                        <option value="">Selecciona la modalidad</option>
                        <option value="Desayuno">Desayuno</option>
                        <option value="RI">RI</option>
                        <option value="Almuerzo">Almuerzo</option>
                        <option value="RPS">RPS</option>
                        <option value="Paquetes">Paquetes</option>
                    </select>
                </div>
                
                <div class="campo-formulario" id="campo-responsable-devolucion" style="display: none;">
                    <label for="responsable-devolucion">👤 Responsable del movimiento</label>
                    <div class="campo-busqueda">
                        <input type="text" id="responsable-devolucion" placeholder="Escribe el nombre del responsable..." autocomplete="off">
                        <div id="sugerencias-responsable-devolucion" class="sugerencias-lista"></div>
                    </div>
                </div>
                
                <div class="botones-accion">
                    <button class="boton-accion principal" onclick="registrarDevolucion()">✅ REGISTRAR DEVOLUCIÓN</button>
                    <button class="boton-accion secundario" onclick="limpiarFormularioDevolucion()">🧹 LIMPIAR</button>
                </div>
            </div>
        </div>
        
        <!-- SECCIÓN STOCK -->
        <div id="seccion-stock" class="seccion">
            <div class="container-fluid">
                <!-- Header de la sección -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="d-flex justify-content-between align-items-center flex-wrap">
                            <button class="btn btn-outline-secondary btn-sm" onclick="volverMenu()">
                                <i class="bi bi-arrow-left"></i> <span class="d-none d-sm-inline">VOLVER AL MENÚ</span>
                            </button>
                            <h2 class="mb-0 text-primary text-center flex-grow-1">
                                <i class="bi bi-bar-chart"></i> <span class="d-none d-sm-inline">INVENTARIO ACTUAL</span><span class="d-sm-none">STOCK</span>
                            </h2>
                        </div>
                        <p class="text-muted mt-2 small d-none d-md-block">Visualiza el stock actual de todos los productos con información detallada de lotes</p>
                    </div>
                </div>

                <!-- Filtros con Bootstrap -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-primary text-white py-2">
                                <h6 class="mb-0"><i class="bi bi-funnel"></i> <span class="d-none d-sm-inline">FILTROS DE BÚSQUEDA</span><span class="d-sm-none">FILTROS</span></h6>
                            </div>
                            <div class="card-body py-2">
                                <div class="row g-2">
                                    <!-- Búsqueda por producto -->
                                    <div class="col-12 col-md-4">
                                        <label for="filtro-producto-stock" class="form-label small">Buscar Producto</label>
                                        <div class="input-group input-group-sm">
                                            <input type="text" class="form-control" id="filtro-producto-stock" 
                                                   placeholder="Producto..." oninput="filtrarStock()">
                                            <button class="btn btn-outline-secondary" type="button" onclick="limpiarFiltroStock()" title="Limpiar filtro">
                                                <i class="bi bi-x-circle"></i>
                                            </button>
                                        </div>
                                        <div id="sugerencias-producto-stock" class="sugerencias-lista" style="display: none;"></div>
                                    </div>
                                    
                                    <!-- Filtro por sede -->
                                    <div class="col-12 col-md-4">
                                        <label for="filtro-sede-stock" class="form-label small">Sede</label>
                                        <select class="form-select form-select-sm" id="filtro-sede-stock" onchange="filtrarStock()">
                                            <option value="">Todas las sedes</option>
                                            <option value="BODEGA CENTRAL">BODEGA CENTRAL</option>
                                            <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                                            <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                                            <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                                            <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                                            <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                                            <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                                            <option value="IE El Salado">IE El Salado</option>
                                            <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                                            <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                                            <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                                            <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                                            <option value="IE La Paz">IE La Paz</option>
                                            <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                                            <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                                            <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                                            <option value="IE Las Palmas">IE Las Palmas</option>
                                            <option value="IE Martín Eduardo Rios Llano">IE Martín Eduardo Rios Llano</option>
                                            <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                                            <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                                            <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                                            <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                                            <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                                            <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                                            <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                                            <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                                            <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                                            <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Filtro por prioridad -->
                                    <div class="col-12 col-md-4">
                                        <label for="filtro-prioridad-stock" class="form-label small">Prioridad</label>
                                        <select class="form-select form-select-sm" id="filtro-prioridad-stock" onchange="filtrarStock()">
                                            <option value="">Todas las prioridades</option>
                                            <option value="urgente">🔴 Urgente (≤ 7 días)</option>
                                            <option value="pronto">🟡 Pronto (8-30 días)</option>
                                            <option value="atencion">🟢 Atención (> 30 días)</option>
                                            <option value="sin-vencimiento">⚪ Sin vencimiento</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de acción -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-success btn-sm" onclick="exportarStockExcel()">
                                <i class="bi bi-file-earmark-excel"></i> <span class="d-none d-sm-inline">EXPORTAR A EXCEL</span><span class="d-sm-none">EXCEL</span>
                            </button>
                            <button class="btn btn-danger btn-sm" onclick="confirmarLimpiarInventario()">
                                <i class="bi bi-trash"></i> <span class="d-none d-sm-inline">LIMPIAR TODO</span><span class="d-sm-none">LIMPIAR</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Información del stock -->
                <div id="info-stock" class="alert alert-info" style="display: none;">
                    <!-- Aquí se mostrará información del stock -->
                </div>

                <!-- Tabla de stock -->
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-body p-0">
                                <div id="tabla-stock-container">
                                    <!-- Aquí se mostrará la tabla de stock -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
                
                <!-- SECCIÓN DE COMENTARIOS DEL STOCK -->
                <div id="seccion-comentarios-stock" style="display: none;">
                    <div class="section" style="margin-top: 30px;">
                        <h3>💬 COMENTARIOS Y NOTAS DEL STOCK</h3>
                        <p class="descripcion-funcion">Los administradores pueden dejar comentarios y notas para otros usuarios sobre productos específicos</p>
                        
                        <div class="formulario-simple" style="max-width: 800px;">
                            <h4>📝 AGREGAR NUEVO COMENTARIO</h4>
                            
                            <div class="campo-formulario">
                                <label for="producto-comentario">Producto para comentar</label>
                                <div class="autocomplete-container">
                                    <input type="text" id="producto-comentario" placeholder="Escribe el nombre del producto...">
                                    <div id="sugerencias-producto-comentario" class="sugerencias-lista"></div>
                                </div>
                            </div>
                            
                            <div class="campo-formulario">
                                <label for="sede-comentario">Sede del producto</label>
                                <select id="sede-comentario">
                                    <option value="">Selecciona una sede</option>
                                    <option value="BODEGA CENTRAL">BODEGA CENTRAL</option>
                                    <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                                    <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                                    <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                                    <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                                    <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                                    <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                                    <option value="IE El Salado">IE El Salado</option>
                                    <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                                    <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                                    <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                                    <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                                    <option value="IE La Paz">IE La Paz</option>
                                    <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                                    <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                                    <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                                    <option value="IE Las Palmas">IE Las Palmas</option>
                                    <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                                    <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                                    <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                                    <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                                    <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                                    <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                                    <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                                    <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                                    <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                                    <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                                </select>
                            </div>
                            
                            <div class="campo-formulario">
                                <label for="autor-comentario">Autor del comentario</label>
                                <select id="autor-comentario" required>
                                    <option value="">Selecciona el autor</option>
                                    <option value="LOPEZ ZAPATA MARIA DEL PILAR">LOPEZ ZAPATA MARIA DEL PILAR</option>
                                    <option value="CORREA ALVAREZ BRAYAN">CORREA ALVAREZ BRAYAN</option>
                                    <option value="ARROYAVE JARAMILLO PAOLA ANDREA">ARROYAVE JARAMILLO PAOLA ANDREA</option>
                                    <option value="GARCIA BOTERO YESICA JANETH">GARCIA BOTERO YESICA JANETH</option>
                                    <option value="HINCAPIE POSADA MANUELA">HINCAPIE POSADA MANUELA</option>
                                    <option value="LOPEZ CHALARCA STEFANY">LOPEZ CHALARCA STEFANY</option>
                                    <option value="NARANJO HENAO MARIA ISABEL">NARANJO HENAO MARIA ISABEL</option>
                                    <option value="TEJADA DELGADO CATERINNE ANDREA">TEJADA DELGADO CATERINNE ANDREA</option>
                                    <option value="TORO AGUDELO TATIANA">TORO AGUDELO TATIANA</option>
                        
                            </div>
                            
                            <div class="campo-formulario">
                                <label for="tipo-comentario">Tipo de comentario</label>
                                <select id="tipo-comentario">
                                    <option value="general">📋 General</option>
                                    <option value="urgente">🚨 Urgente</option>
                                    <option value="informacion">ℹ️ Información</option>
                                    <option value="advertencia">⚠️ Advertencia</option>
                                    <option value="recordatorio">🔔 Recordatorio</option>
                                </select>
                            </div>
                            
                            <div class="campo-formulario">
                                <label for="texto-comentario">Comentario o nota</label>
                                <textarea id="texto-comentario" placeholder="Escribe tu comentario, nota o mensaje para otros usuarios..." rows="4" required></textarea>
                            </div>
                            
                            <div class="botones-accion">
                                <button class="boton-accion principal" onclick="agregarComentarioStock()">💬 AGREGAR COMENTARIO</button>
                                <button class="boton-accion secundario" onclick="limpiarFormularioComentario()">🧹 LIMPIAR</button>
                                <button class="boton-accion secundario" onclick="ocultarComentariosStock()">❌ CERRAR</button>
                            </div>
                        </div>
                        
                        <div id="lista-comentarios-stock" style="margin-top: 30px;">
                            <!-- Aquí se mostrarán los comentarios existentes -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SECCIÓN HISTORIAL -->
        <div id="seccion-historial" class="seccion">
            <div class="container-fluid">
                <!-- Header de la sección -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="d-flex justify-content-between align-items-center flex-wrap">
                            <button class="btn btn-outline-secondary btn-sm" onclick="volverMenu()">
                                <i class="bi bi-arrow-left"></i> <span class="d-none d-sm-inline">VOLVER AL MENÚ</span>
                            </button>
                            <h2 class="mb-0 text-primary text-center flex-grow-1">
                                <i class="bi bi-clipboard-data"></i> <span class="d-none d-sm-inline">HISTORIAL DE MOVIMIENTOS</span><span class="d-sm-none">HISTORIAL</span>
                            </h2>
                        </div>
                        <p class="text-muted mt-2 small d-none d-md-block">Consulta todos los movimientos de entrada, salida y devolución del inventario</p>
                    </div>
                </div>

                <!-- Filtros con Bootstrap -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-header bg-primary text-white py-2">
                                <h6 class="mb-0"><i class="bi bi-funnel"></i> <span class="d-none d-sm-inline">FILTROS DE BÚSQUEDA</span><span class="d-sm-none">FILTROS</span></h6>
                            </div>
                            <div class="card-body py-2">
                                <div class="row g-2">
                                    <!-- Filtro por tipo de movimiento -->
                                    <div class="col-12 col-md-3">
                                        <label for="filtro-tipo-historial" class="form-label small">Tipo de Movimiento</label>
                                        <select class="form-select form-select-sm" id="filtro-tipo-historial" onchange="filtrarHistorial()">
                                            <option value="">Todos los movimientos</option>
                                            <option value="entrada">📥 Solo entradas</option>
                                            <option value="salida">📤 Solo salidas</option>
                                            <option value="devolucion">↩️ Solo devoluciones</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Filtro por sede -->
                                    <div class="col-12 col-md-3">
                                        <label for="filtro-sede-historial" class="form-label small">Sede</label>
                                        <select class="form-select form-select-sm" id="filtro-sede-historial" onchange="filtrarHistorial()">
                                            <option value="">Todas las sedes</option>
                                            <option value="BODEGA CENTRAL">BODEGA CENTRAL</option>
                                            <option value="IE Alejandro Vélez Barrientos">IE Alejandro Vélez Barrientos</option>
                                            <option value="IE San Vicente Sede Alto las Flores">IE San Vicente Sede Alto las Flores</option>
                                            <option value="IE Comercial de Envigado">IE Comercial de Envigado</option>
                                            <option value="IE Comercial de Envigado Sede Pio XII">IE Comercial de Envigado Sede Pio XII</option>
                                            <option value="IE Comercial de Envigado Sede San Rafael">IE Comercial de Envigado Sede San Rafael</option>
                                            <option value="IE Darío de Bedout">IE Darío de Bedout</option>
                                            <option value="IE El Salado">IE El Salado</option>
                                            <option value="IE El Salado Sede La Morena">IE El Salado Sede La Morena</option>
                                            <option value="IE José Manuel Restrepo Vélez (JOMAR)">IE José Manuel Restrepo Vélez (JOMAR)</option>
                                            <option value="IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González">IE José Manuel Restrepo Vélez (JOMAR) Sede Fernando González</option>
                                            <option value="IE José Miguel de la Calle">IE José Miguel de la Calle</option>
                                            <option value="IE La Paz">IE La Paz</option>
                                            <option value="IE La Paz Sede El Trianón">IE La Paz Sede El Trianón</option>
                                            <option value="IE John F. Keneddy">IE John F. Keneddy</option>
                                            <option value="IE Leticia Arango de Avendaño">IE Leticia Arango de Avendaño</option>
                                            <option value="IE Las Palmas">IE Las Palmas</option>
                                            <option value="IE Martín Eduardo Rios Llano (Pantanillo)">IE Martín Eduardo Rios Llano (Pantanillo)</option>
                                            <option value="IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)">IE Martín Eduardo Rios Llano Sede La Cruz del Porvenir (Perico)</option>
                                            <option value="IE Manuel Uribe Ángel (MUA)">IE Manuel Uribe Ángel (MUA)</option>
                                            <option value="IE Manuel Uribe Ángel Sede Marceliano Vélez">IE Manuel Uribe Ángel Sede Marceliano Vélez</option>
                                            <option value="IE Normal Superior de Envigado">IE Normal Superior de Envigado</option>
                                            <option value="IE Marie Poussepin">IE Marie Poussepin</option>
                                            <option value="Centro vida alto de los sueños">Centro vida alto de los sueños</option>
                                            <option value="Comedor comunitario la Mina">Comedor comunitario la Mina</option>
                                            <option value="Comedor Comunitario Uribe Angel">Comedor Comunitario Uribe Angel</option>
                                            <option value="Comedor Comunitario Santa Gertrudis">Comedor Comunitario Santa Gertrudis</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Filtro por fecha -->
                                    <div class="col-12 col-md-3">
                                        <label for="filtro-fecha-historial" class="form-label small">Período</label>
                                        <select class="form-select form-select-sm" id="filtro-fecha-historial" onchange="filtrarHistorial()">
                                            <option value="">Todas las fechas</option>
                                            <option value="hoy">📅 Hoy</option>
                                            <option value="ayer">📅 Ayer</option>
                                            <option value="semana">📅 Esta semana</option>
                                            <option value="mes">📅 Este mes</option>
                                        </select>
                                    </div>
                                    
                                    <!-- Filtro por responsable -->
                                    <div class="col-12 col-md-3">
                                        <label for="filtro-responsable-historial" class="form-label small">Responsable</label>
                                        <select class="form-select form-select-sm" id="filtro-responsable-historial" onchange="filtrarHistorial()">
                                            <option value="">Todos los responsables</option>
                    <option value="1003127498 - ACEVEDO SEVERICHE LEIDY LORENA">1003127498 - ACEVEDO SEVERICHE LEIDY LORENA</option>
                    <option value="35115807 - AGAMEZ MORENO YUDIS PATRICIA">35115807 - AGAMEZ MORENO YUDIS PATRICIA</option>
                    <option value="1037666291 - AGUDELO ARTEAGA MELISSA">1037666291 - AGUDELO ARTEAGA MELISSA</option>
                    <option value="1035834116 - AGUIRRE BARRIENTOS DANIELA">1035834116 - AGUIRRE BARRIENTOS DANIELA</option>
                    <option value="32244199 - AGUIRRE RUIZ LINA MARIA">32244199 - AGUIRRE RUIZ LINA MARIA</option>
                    <option value="43076559 - ALARCON MUÑOZ MARIA EUGENIA">43076559 - ALARCON MUÑOZ MARIA EUGENIA</option>
                    <option value="42888120 - ARENAS ZAPATA OLGA LUCIA">42888120 - ARENAS ZAPATA OLGA LUCIA</option>
                    <option value="43866637 - ARROYAVE CALLE ANGELA MILENA">43866637 - ARROYAVE CALLE ANGELA MILENA</option>
                    <option value="43300406 - ARROYAVE JARAMILLO PAOLA ANDREA">43300406 - ARROYAVE JARAMILLO PAOLA ANDREA</option>
                    <option value="1037570362 - BARRIOS PAYARES KATHERINE">1037570362 - BARRIOS PAYARES KATHERINE</option>
                    <option value="43728904 - BEDOYA RESTREPO BEATRIZ ELENA">43728904 - BEDOYA RESTREPO BEATRIZ ELENA</option>
                    <option value="1037595607 - BENITEZ BETANCUR LINA GISELA">1037595607 - BENITEZ BETANCUR LINA GISELA</option>
                    <option value="43742064 - BERRIO MADRID SANDRA PATRICIA">43742064 - BERRIO MADRID SANDRA PATRICIA</option>
                    <option value="43725573 - BLANDON ROJAS AYDE">43725573 - BLANDON ROJAS AYDE</option>
                    <option value="1128457139 - BOTERO HERNANDEZ SINDY YULIANA">1128457139 - BOTERO HERNANDEZ SINDY YULIANA</option>
                    <option value="1035970298 - BUSTAMANTE YEPES MAICOL">1035970298 - BUSTAMANTE YEPES MAICOL</option>
                    <option value="1037657025 - CAICEDO GALLEGO CAMILA ANDREA">1037657025 - CAICEDO GALLEGO CAMILA ANDREA</option>
                    <option value="42889261 - CASTAÑEDA GRAJALES ALBA LUCIA">42889261 - CASTAÑEDA GRAJALES ALBA LUCIA</option>
                    <option value="42890241 - CASTAÑO CANO MARIA LOURDES">42890241 - CASTAÑO CANO MARIA LOURDES</option>
                    <option value="1037602914 - CASTRILLON PARRA PAULA ANDREA">1037602914 - CASTRILLON PARRA PAULA ANDREA</option>
                    <option value="43926496 - CASTRO GUTIERREZ VERONICA MARIA">43926496 - CASTRO GUTIERREZ VERONICA MARIA</option>
                    <option value="43759859 - CEBALLOS CRUZ NORELIA">43759859 - CEBALLOS CRUZ NORELIA</option>
                    <option value="43758525 - CEBALLOS VANEGAS ARACELY DEL SOCORR">43758525 - CEBALLOS VANEGAS ARACELY DEL SOCORR</option>
                    <option value="43757443 - CORREA ESPINOSA LINA MARIA">43757443 - CORREA ESPINOSA LINA MARIA</option>
                    <option value="1001539926 - CORREA URREGO MELANY">1001539926 - CORREA URREGO MELANY</option>
                    <option value="42883063 - DIAZ DIAZ MARGARITA MARIA">42883063 - DIAZ DIAZ MARGARITA MARIA</option>
                    <option value="1097488599 - DIAZ FAJARDO MARIA PAULA">1097488599 - DIAZ FAJARDO MARIA PAULA</option>
                    <option value="43166205 - ESCOBAR HERNANDEZ SANDRA MILENA">43166205 - ESCOBAR HERNANDEZ SANDRA MILENA</option>
                    <option value="1037589433 - ESCOBAR LOPEZ SANDRA">1037589433 - ESCOBAR LOPEZ SANDRA</option>
                    <option value="43167733 - ESPINAL VASQUEZ EDITH JOANNA">43167733 - ESPINAL VASQUEZ EDITH JOANNA</option>
                    <option value="43752506 - ESPINOSA VELEZ FLOR ANGELA">43752506 - ESPINOSA VELEZ FLOR ANGELA</option>
                    <option value="1037576571 - ESPINOSA VELEZ YESSICA ALEJANDRA">1037576571 - ESPINOSA VELEZ YESSICA ALEJANDRA</option>
                    <option value="43731174 - FRANCO ACEVEDO SANDRA DURLEY">43731174 - FRANCO ACEVEDO SANDRA DURLEY</option>
                    <option value="21527824 - GALEANO ARANGO GLADYS ELENA">21527824 - GALEANO ARANGO GLADYS ELENA</option>
                    <option value="43752714 - GALLEGO RAMIREZ CIELO MARIA">43752714 - GALLEGO RAMIREZ CIELO MARIA</option>
                    <option value="1001145221 - GARCES MORENO VANESA">1001145221 - GARCES MORENO VANESA</option>
                    <option value="32297143 - GARCIA ARANGO MARIA YURY">32297143 - GARCIA ARANGO MARIA YURY</option>
                    <option value="1040050254 - GARCIA BOTERO YESICA JANETH">1040050254 - GARCIA BOTERO YESICA JANETH</option>
                    <option value="42780362 - GIRALDO FERNANDEZ CLEMENCIA DE LA C">42780362 - GIRALDO FERNANDEZ CLEMENCIA DE LA C</option>
                    <option value="43745370 - GOMEZ CASTRILLON PAULA ANDREA">43745370 - GOMEZ CASTRILLON PAULA ANDREA</option>
                    <option value="1193148139 - GRAJALES ATEHORTUA MARIANA">1193148139 - GRAJALES ATEHORTUA MARIANA</option>
                    <option value="43752552 - GRISALES GIRALDO MARY SOL">43752552 - GRISALES GIRALDO MARY SOL</option>
                    <option value="21562707 - GUTIERREZ JARAMILLO LEIDY JURENY">21562707 - GUTIERREZ JARAMILLO LEIDY JURENY</option>
                    <option value="1148434878 - GUZMAN PEÑA SILDIS ESTHER">1148434878 - GUZMAN PEÑA SILDIS ESTHER</option>
                    <option value="43818536 - HENAO CARDONA MARIA RUBIELA">43818536 - HENAO CARDONA MARIA RUBIELA</option>
                    <option value="1037571909 - HENAO CASTRO VERONICA">1037571909 - HENAO CASTRO VERONICA</option>
                    <option value="1018350109 - HINCAPIE POSADA MANUELA">1018350109 - HINCAPIE POSADA MANUELA</option>
                    <option value="43872655 - HERNANDEZ CALLE LIST JOHANA">43872655 - HERNANDEZ CALLE LIST JOHANA</option>
                    <option value="4627459 - HERNANDEZ MEZA EYUDILITN MARIELBIS">4627459 - HERNANDEZ MEZA EYUDILITN MARIELBIS</option>
                    <option value="1037655225 - HERNANDEZ QUINTERO ESTEFANIA">1037655225 - HERNANDEZ QUINTERO ESTEFANIA</option>
                    <option value="1036448237 - HERNANDEZ ROJAS VALENTINA">1036448237 - HERNANDEZ ROJAS VALENTINA</option>
                    <option value="42786650 - HERNANDEZ ZAPATA DIANA MARIA">42786650 - HERNANDEZ ZAPATA DIANA MARIA</option>
                    <option value="43875255 - HERRERA RAMIREZ JOHANNA VANESSA">43875255 - HERRERA RAMIREZ JOHANNA VANESSA</option>
                    <option value="43871502 - HURTADO ARANGO PAULA ANDREA">43871502 - HURTADO ARANGO PAULA ANDREA</option>
                    <option value="43747809 - ISAZA GUZMAN MARTHA LUCIA">43747809 - ISAZA GUZMAN MARTHA LUCIA</option>
                    <option value="43734010 - JARAMILLO GOMEZ YORLADIS">43734010 - JARAMILLO GOMEZ YORLADIS</option>
                    <option value="43743327 - JARAMILLO SANCHEZ ADRIANA MARIA">43743327 - JARAMILLO SANCHEZ ADRIANA MARIA</option>
                    <option value="43729653 - JURADO CASTAÑEDA BEATRIZ EUGENIA">43729653 - JURADO CASTAÑEDA BEATRIZ EUGENIA</option>
                    <option value="1037636930 - JURADO CASTAÑEDA YENIFER LORENA">1037636930 - JURADO CASTAÑEDA YENIFER LORENA</option>
                    <option value="43200273 - LONDOÑO CORTES LENY MARIA">43200273 - LONDOÑO CORTES LENY MARIA</option>
                    <option value="43872371 - LONDOÑO QUINTANA CLAUDIA MILENA">43872371 - LONDOÑO QUINTANA CLAUDIA MILENA</option>
                    <option value="42895791 - LONDOÑO SOTO ALEXANDRA MARIA">42895791 - LONDOÑO SOTO ALEXANDRA MARIA</option>
                    <option value="1216713115 - LOPEZ CHALARCA STEFANY">1216713115 - LOPEZ CHALARCA STEFANY</option>
                    <option value="21856512 - LOPEZ LOPEZ LEIDY JOHANNA">21856512 - LOPEZ LOPEZ LEIDY JOHANNA</option>
                    <option value="32297731 - LOPEZ SANCHEZ MARIA CRISTINA">32297731 - LOPEZ SANCHEZ MARIA CRISTINA</option>
                    <option value="32110364 - LOPEZ ZAPATA MARIA DEL PILAR">32110364 - LOPEZ ZAPATA MARIA DEL PILAR</option>
                    <option value="43757583 - MARTINEZ SANCHEZ CLAUDIA PATRICIA">43757583 - MARTINEZ SANCHEZ CLAUDIA PATRICIA</option>
                    <option value="43588724 - MARULANDA NIDIA ESNIT">43588724 - MARULANDA NIDIA ESNIT</option>
                    <option value="1037612619 - MEJIA HURTADO ALBA YULIANA">1037612619 - MEJIA HURTADO ALBA YULIANA</option>
                    <option value="39011102 - MENESES JIMENEZ MAYRA">39011102 - MENESES JIMENEZ MAYRA</option>
                    <option value="32296524 - MESA HERNANDEZ CAROLINA">32296524 - MESA HERNANDEZ CAROLINA</option>
                    <option value="1112482631 - MINA VASQUEZ CARMEN YAJAIRA">1112482631 - MINA VASQUEZ CARMEN YAJAIRA</option>
                    <option value="1037644943 - MOLINA JARAMILLO ISAMAR">1037644943 - MOLINA JARAMILLO ISAMAR</option>
                    <option value="1037672572 - MOLINA RUEDA ELOANA CRISTINA">1037672572 - MOLINA RUEDA ELOANA CRISTINA</option>
                    <option value="43720893 - MONTOYA ESTRADA ADRIANA MARIA">43720893 - MONTOYA ESTRADA ADRIANA MARIA</option>
                    <option value="32180857 - MONTOYA NARANJO OLGA INES">32180857 - MONTOYA NARANJO OLGA INES</option>
                    <option value="42885983 - MONTOYA RODRIGUEZ LUZ DARY">42885983 - MONTOYA RODRIGUEZ LUZ DARY</option>
                    <option value="1026151438 - MORALES HENAO YURLEY ANDREA">1026151438 - MORALES HENAO YURLEY ANDREA</option>
                    <option value="1152444891 - MORENO ARDILA CINDY STEFANIA">1152444891 - MORENO ARDILA CINDY STEFANIA</option>
                    <option value="1047994629 - MUÑOZ MEJIA LUIS NORBERTO">1047994629 - MUÑOZ MEJIA LUIS NORBERTO</option>
                    <option value="1017185977 - NARANJO HENAO MARIA ISABEL">1017185977 - NARANJO HENAO MARIA ISABEL</option>
                    <option value="43864907 - NARANJO JURADO MARLENY DEL CARMEN">43864907 - NARANJO JURADO MARLENY DEL CARMEN</option>
                    <option value="30332239 - NARANJO VASQUEZ LINA MARIA">30332239 - NARANJO VASQUEZ LINA MARIA</option>
                    <option value="30296309 - OROZCO MARULANDA GUADALUPE">30296309 - OROZCO MARULANDA GUADALUPE</option>
                    <option value="1037579889 - PEREZ ROJAS MAIRA ALEJANDRA">1037579889 - PEREZ ROJAS MAIRA ALEJANDRA</option>
                    <option value="1037605293 - PEREZ VALENCIA DIANA CATALINA">1037605293 - PEREZ VALENCIA DIANA CATALINA</option>
                    <option value="32183343 - PEREZ ZULETA LUZ MARLENY">32183343 - PEREZ ZULETA LUZ MARLENY</option>
                    <option value="43799216 - PINO HENAO LEDY DEL SOCORRO">43799216 - PINO HENAO LEDY DEL SOCORRO</option>
                    <option value="43871106 - PINO OSPINA CLAUDIA PATRICIA">43871106 - PINO OSPINA CLAUDIA PATRICIA</option>
                    <option value="32241682 - PINO OSPINA YUDI ANDREA">32241682 - PINO OSPINA YUDI ANDREA</option>
                    <option value="43925860 - QUIRAMA COLORADO TERESA DE JESUS">43925860 - QUIRAMA COLORADO TERESA DE JESUS</option>
                    <option value="42896366 - RAMIREZ RESTREPO LINA MARIA">42896366 - RAMIREZ RESTREPO LINA MARIA</option>
                    <option value="43727298 - RESTREPO AGUDELO DIANA PATRICIA">43727298 - RESTREPO AGUDELO DIANA PATRICIA</option>
                    <option value="1037570985 - RESTREPO RESTREPO FLOR ALBA">1037570985 - RESTREPO RESTREPO FLOR ALBA</option>
                    <option value="32299282 - RESTREPO RESTREPO SANDRA MILENA">32299282 - RESTREPO RESTREPO SANDRA MILENA</option>
                    <option value="1036601662 - RESTREPO RIOS TATIANA ANDREA">1036601662 - RESTREPO RIOS TATIANA ANDREA</option>
                    <option value="43740639 - RESTREPO SANCHEZ ANGELA MARIA">43740639 - RESTREPO SANCHEZ ANGELA MARIA</option>
                    <option value="1037594844 - RIAZA DIAZ DEISY ALEJANDRA">1037594844 - RIAZA DIAZ DEISY ALEJANDRA</option>
                    <option value="21588455 - RIVAS ESQUIVEL CLAUDIA">21588455 - RIVAS ESQUIVEL CLAUDIA</option>
                    <option value="1451388 - ROCCA RENDON GERALDINE DAYANA">1451388 - ROCCA RENDON GERALDINE DAYANA</option>
                    <option value="42899427 - ROJAS PIEDRAHITA MARTA CECILIA">42899427 - ROJAS PIEDRAHITA MARTA CECILIA</option>
                    <option value="4093163 - ROSALES DAXIBEL JOSEFINA">4093163 - ROSALES DAXIBEL JOSEFINA</option>
                    <option value="1037642233 - RUIZ GONZALEZ JULIET ANDREA">1037642233 - RUIZ GONZALEZ JULIET ANDREA</option>
                    <option value="42897026 - RUIZ PALACIO RUBIELA MARIA">42897026 - RUIZ PALACIO RUBIELA MARIA</option>
                    <option value="43739285 - SANCHEZ TAMAYO PAOLA ANDREA">43739285 - SANCHEZ TAMAYO PAOLA ANDREA</option>
                    <option value="1037652108 - SERNA RAMIREZ YESSICA">1037652108 - SERNA RAMIREZ YESSICA</option>
                    <option value="1036931359 - SOTO GRAJALES BIVIANA MARCELA">1036931359 - SOTO GRAJALES BIVIANA MARCELA</option>
                    <option value="1036938070 - SOTO PATIÑO MARIA JULIETH">1036938070 - SOTO PATIÑO MARIA JULIETH</option>
                    <option value="42797496 - SUAREZ RAMIREZ NIDIAN LUCIA">42797496 - SUAREZ RAMIREZ NIDIAN LUCIA</option>
                    <option value="1037591063 - TABORDA ESCOBAR KELY JOHANA">1037591063 - TABORDA ESCOBAR KELY JOHANA</option>
                    <option value="32559224 - TORRES ADRIANA MARIA">32559224 - TORRES ADRIANA MARIA</option>
                    <option value="1037631956 - TORRES ESTRADA JULIANA ANDREA">1037631956 - TORRES ESTRADA JULIANA ANDREA</option>
                    <option value="43758288 - USMA MORALES SANDRA MILENA">43758288 - USMA MORALES SANDRA MILENA</option>
                    <option value="1037612432 - VASCO ZAPATA ERIKA NATALIA">1037612432 - VASCO ZAPATA ERIKA NATALIA</option>
                    <option value="43729379 - ZAPATA BEDOYA BIBIANA MARIA">43729379 - ZAPATA BEDOYA BIBIANA MARIA</option>
                    <option value="43875282 - ZAPATA CORREA JACQUELINE">43875282 - ZAPATA CORREA JACQUELINE</option>
                    <option value="43677486 - ZAPATA TABARES ALBA LUCIA">43677486 - ZAPATA TABARES ALBA LUCIA</option>
                    <option value="1036615145 - CORREA ALVAREZ BRAYAN">1036615145 - CORREA ALVAREZ BRAYAN</option>
                    <option value="1037661901 - SANCHEZ GOMEZ MARIANA">1037661901 - SANCHEZ GOMEZ MARIANA</option>
                    <option value="43300406 - ARROYAVE JARAMILLO PAOLA ANDREA">43300406 - ARROYAVE JARAMILLO PAOLA ANDREA</option>
                    <option value="32110364 - LOPEZ ZAPATA MARIA DEL PILAR">32110364 - LOPEZ ZAPATA MARIA DEL PILAR</option>
                    <option value="1040050254 - GARCIA BOTERO YESICA JANETH">1040050254 - GARCIA BOTERO YESICA JANETH</option>
                    <option value="1018350109 - HINCAPIE POSADA MANUELA">1018350109 - HINCAPIE POSADA MANUELA</option>
                    <option value="1216713115 - LOPEZ CHALARCA STEFANY">1216713115 - LOPEZ CHALARCA STEFANY</option>
                    <option value="1017185977 - NARANJO HENAO MARIA ISABEL">1017185977 - NARANJO HENAO MARIA ISABEL</option>
                                            <option value="102614513 - TEJADA DELGADO CATERINNE ANDREA">102614513 - TEJADA DELGADO CATERINNE ANDREA</option>
                                            <option value="1001249553 - TORO AGUDELO TATIANA">1001249553 - TORO AGUDELO TATIANA</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Búsqueda por producto -->
                                <div class="row g-2 mt-2">
                                    <div class="col-12">
                                        <label for="filtro-producto-historial" class="form-label small">Buscar Producto</label>
                                        <div class="input-group input-group-sm">
                                            <input type="text" class="form-control" id="filtro-producto-historial" 
                                                   placeholder="Producto..." oninput="filtrarPorProducto()">
                                            <button class="btn btn-outline-secondary" type="button" onclick="limpiarFiltroProducto()" title="Limpiar filtro">
                                                <i class="bi bi-x-circle"></i>
                                            </button>
                                        </div>
                                        <div id="sugerencias-producto-historial" class="sugerencias-lista" style="display: none;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botones de acción -->
                <div class="row mb-3">
                    <div class="col-12">
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-success btn-sm" onclick="exportarHistorialExcel()">
                                <i class="bi bi-file-earmark-excel"></i> <span class="d-none d-sm-inline">EXPORTAR A EXCEL</span><span class="d-sm-none">EXCEL</span>
                            </button>
                            <button class="btn btn-info btn-sm" onclick="limpiarFiltrosHistorial()">
                                <i class="bi bi-arrow-clockwise"></i> <span class="d-none d-sm-inline">LIMPIAR FILTROS</span><span class="d-sm-none">LIMPIAR</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Tabla de historial -->
                <div class="row">
                    <div class="col-12">
                        <div class="card shadow-sm">
                            <div class="card-body p-0">
                                <div id="tabla-historial-container">
                                    <!-- Aquí se mostrará la tabla de historial -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        
        <!-- SECCIÓN BUSCAR LOTES -->
        <div id="seccion-buscar-lotes" class="seccion">
            <button class="boton-volver" onclick="volverMenu()">← VOLVER AL MENÚ</button>
            
            <div class="formulario-simple">
                <h2>🔍 BUSCAR LOTES POR SEDES</h2>
                <p class="descripcion-funcion">Busca un lote específico y ve en qué sedes hay productos de ese lote</p>
                
                <div class="campo-formulario">
                    <label for="lote-buscar">Número de lote a buscar</label>
                    <div class="campo-busqueda">
                        <input type="text" id="lote-buscar" placeholder="Ejemplo: 2323, LOTE-2024-001..." oninput="buscarLoteEnSedes()">
                        <button type="button" onclick="limpiarBusquedaLote()" class="boton-limpiar-filtro" title="Limpiar búsqueda">🗑️</button>
                        <div id="sugerencias-lote-buscar" class="sugerencias-lista" style="display: none;"></div>
                    </div>
                </div>
                
                <div class="campo-formulario">
                    <label for="producto-lote-buscar">Producto específico (opcional)</label>
                    <input type="text" id="producto-lote-buscar" placeholder="Filtrar por producto específico..." oninput="buscarLoteEnSedes()">
                </div>
                
                <div class="botones-accion">
                    <button class="boton-accion principal" onclick="buscarLoteEnSedes()">🔍 BUSCAR LOTE</button>
                    <button class="boton-accion secundario" onclick="mostrarTodosLosLotes()">📋 VER TODOS LOS LOTES</button>
                    <button class="boton-accion secundario" onclick="exportarLotesExcel()">📊 EXPORTAR A EXCEL</button>
                </div>
                
                <div id="resultado-busqueda-lotes" style="display: none;">
                    <div class="resultado-header">
                        <h3>📦 RESULTADOS DE BÚSQUEDA</h3>
                        <div id="info-busqueda-lotes"></div>
                    </div>
                    
                    <div id="tabla-lotes-sedes">
                        <!-- Aquí se mostrará la tabla de resultados -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- SECCIÓN RESTABLECER INVENTARIO -->
        <div id="seccion-restablecer" class="seccion">
            <button class="boton-volver" onclick="volverMenu()">← VOLVER AL MENÚ</button>
            
            <div class="formulario-simple">
                <h2>🔄 RESTABLECER INVENTARIO</h2>
                <p class="descripcion-funcion">⚠️ <strong>ATENCIÓN:</strong> Esta acción borrará TODOS los datos del sistema y reiniciará desde cero</p>
                
                <div class="alert alert-warning">
                    <h4>⚠️ ADVERTENCIA IMPORTANTE</h4>
                    <p>Al restablecer el inventario se eliminará:</p>
                    <ul>
                        <li>📦 Todo el inventario actual</li>
                        <li>📋 Todo el historial de movimientos</li>
                        <li>📊 Todos los contadores y estadísticas</li>
                        <li>📅 Todas las fechas de vencimiento</li>
                        <li>🏷️ Todos los lotes registrados</li>
                    </ul>
                    <p><strong>Esta acción es IRREVERSIBLE y no se puede deshacer.</strong></p>
                </div>
                
                <div class="campo-formulario">
                    <label for="clave-restablecer">Clave de Administrador</label>
                    <input type="password" id="clave-restablecer" placeholder="Ingresa la clave de administrador" maxlength="10">
                    <small>Se requiere la clave de administrador para confirmar esta acción</small>
                </div>
                
                <div class="botones-accion">
                    <button class="boton-accion principal" onclick="restablecerInventario()">🔄 RESTABLECER INVENTARIO</button>
                    <button class="boton-accion secundario" onclick="limpiarFormularioRestablecer()">🧹 LIMPIAR</button>
                </div>
                
                <div class="info-adicional">
                    <h4>📋 Cuándo usar esta función:</h4>
                    <ul>
                        <li>🔄 Al finalizar el año fiscal</li>
                        <li>🆕 Al iniciar un nuevo período</li>
                        <li>🧹 Para limpiar datos de prueba</li>
                        <li>📊 Para reiniciar estadísticas</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- INDICADOR DE CONEXIÓN FLOTANTE (ELIMINADO - CONFLICTO CON EL PRINCIPAL) -->
    <!-- El indicador principal está en el menú principal -->
    
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <!-- SheetJS para exportar a Excel -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    
    <!-- Aplicación sin base de datos en línea -->
    
    <script>
        // VARIABLES GLOBALES
        let inventario = {};
        let historial = [];
        let contadores = { entradas: 0, salidas: 0, devoluciones: 0 };
        let fechasVencimiento = {};
        let lotes = {};
        let sedeActual = 'BODEGA CENTRAL';
        let comentariosStock = {};
        let productosSeleccionadosSalida = [];
        
        // Inicializar aplicación cuando se carga la página
        document.addEventListener('DOMContentLoaded', function() {
            // Cargar datos desde localStorage
            cargarDatos();
            console.log('✅ Aplicación inicializada - Modo local');
        });
        
        // LISTA DE RESPONSABLES
        const responsablesLista = [
            '1003127498 - ACEVEDO SEVERICHE LEIDY LORENA',
            '35115807 - AGAMEZ MORENO YUDIS PATRICIA',
            '1037666291 - AGUDELO ARTEAGA MELISSA',
            '1035834116 - AGUIRRE BARRIENTOS DANIELA',
            '32244199 - AGUIRRE RUIZ LINA MARIA',
            '43076559 - ALARCON MUÑOZ MARIA EUGENIA',
            '42888120 - ARENAS ZAPATA OLGA LUCIA',
            '43866637 - ARROYAVE CALLE ANGELA MILENA',
            '43300406 - ARROYAVE JARAMILLO PAOLA ANDREA',
            '1037570362 - BARRIOS PAYARES KATHERINE',
            '43728904 - BEDOYA RESTREPO BEATRIZ ELENA',
            '1037595607 - BENITEZ BETANCUR LINA GISELA',
            '43742064 - BERRIO MADRID SANDRA PATRICIA',
            '43725573 - BLANDON ROJAS AYDE',
            '1128457139 - BOTERO HERNANDEZ SINDY YULIANA',
            '1035970298 - BUSTAMANTE YEPES MAICOL',
            '1037657025 - CAICEDO GALLEGO CAMILA ANDREA',
            '42889261 - CASTAÑEDA GRAJALES ALBA LUCIA',
            '42890241 - CASTAÑO CANO MARIA LOURDES',
            '1037602914 - CASTRILLON PARRA PAULA ANDREA',
            '43926496 - CASTRO GUTIERREZ VERONICA MARIA',
            '43759859 - CEBALLOS CRUZ NORELIA',
            '43758525 - CEBALLOS VANEGAS ARACELY DEL SOCORR',
            '43757443 - CORREA ESPINOSA LINA MARIA',
            '1001539926 - CORREA URREGO MELANY',
            '42883063 - DIAZ DIAZ MARGARITA MARIA',
            '1097488599 - DIAZ FAJARDO MARIA PAULA',
            '43166205 - ESCOBAR HERNANDEZ SANDRA MILENA',
            '1037602914 - GARCIA LOPEZ CARLOS ANDRES',
            '1040050254 - GARCIA BOTERO YESICA JANETH',
            '43759859 - GOMEZ MARTINEZ ANA LUCIA',
            '43758525 - HERNANDEZ RODRIGUEZ MARIA FERNANDA',
            '1018350109 - HINCAPIE POSADA MANUELA',
            '43757443 - JIMENEZ TORRES DIEGO ALEJANDRO',
            '1001539926 - LOPEZ GARCIA SANDRA MILENA',
            '1216713115 - LOPEZ CHALARCA STEFANY',
            '32110364 - LOPEZ ZAPATA MARIA DEL PILAR',
            '42883063 - MARTINEZ HERNANDEZ CARLOS EDUARDO',
            '1097488599 - MORALES CASTRO LINA MARIA',
            '43166205 - NAVARRO SILVA ANDRES FELIPE',
            '1017185977 - NARANJO HENAO MARIA ISABEL',
            '1037602914 - OCHOA RAMIREZ MARIA ALEJANDRA',
            '43759859 - PEREZ GUTIERREZ JUAN CARLOS',
            '43758525 - QUINTERO VARGAS ANA MARIA',
            '43757443 - RAMIREZ CASTRO CARLOS ALBERTO',
            '1001539926 - RODRIGUEZ MARTINEZ SANDRA PATRICIA',
            '42883063 - SILVA NAVARRO DIEGO FERNANDO',
            '102614513 - TEJADA DELGADO CATERINNE ANDREA',
            '1097488599 - TORRES JIMENEZ MARIA FERNANDA',
            '1001249553 - TORO AGUDELO TATIANA',
            '43166205 - VARGAS QUINTERO ANDRES FELIPE',
            '1037602914 - ZAPATA ARENAS CARLOS EDUARDO',
            '43759859 - ADMINISTRADOR SISTEMA',
            '43758525 - SUPERVISOR PAE',
            '43757443 - COORDINADOR INVENTARIO',
            '1001539926 - AUXILIAR BODEGA',
            '42883063 - OPERADOR SISTEMA',
            '1097488599 - SUPERVISOR GENERAL',
            '43166205 - COORDINADOR GENERAL',
            'RPS',
            'Paquetes'
        ];

        // LISTA DE PRODUCTOS SUGERIDOS
        const productosSugeridos = {
            'Verduras y Hortalizas': [
                'Ahuyama 1000 grs', 'Cabeza de ajo 1000 grs', 'Albahaca 1000 grs', 'Apio 1000 grs',
                'Arracacha 1000 grs', 'Cebolla de huevo blanca 1000 grs', 'Cebolla de huevo morada 1000 grs',
                'Cebolla de rama 1000 grs', 'Cilantro 1000 grs', 'Espinaca 1000 grs', 'Guasca 1000 grs',
                'Habichuela 1000 grs', 'Lechuga batavia 1000 grs', 'Papa capira 1000 grs', 'Papa criolla 1000 grs',
                'Papa nevada 1000 grs', 'Pepino cohombro 1000 grs', 'Pimenton rojo 1000 grs', 'Remolacha 1000 grs',
                'Repollo blanco 1000 grs', 'Tomate 1000 grs', 'Yuca 1000 grs', 'Zanahoria 1000 grs',
                'Zuccini Amarillo 1000 grs'
            ],
            'Frutas': [
                'Banano criollo 1000 grs', 'Fresa 1000 grs', 'Granadilla 1000 grs', 'Guineo 1000 grs',
                'Limon tahiti 1000 grs', 'Mandarina oneco 1000 grs', 'Mango tomy 1000 grs',
                'Manzana roja tipo gala 1000 grs', 'Papaya 1000 grs', 'Pera 1000 grs', 'Piña manzana 1000 grs',
                'Piña oro miel 1000 grs', 'Platano maduro 1000 grs', 'Platano pinton 1000 grs',
                'Platano verde 1000 grs', 'Uvas red globe 1000 grs'
            ],
            'Legumbres': [
                'Fríjol 1000 Gramos Cargamanto blanco', 'Frijol bola roja 1000 grs', 'Lentejas 500 Gramos',
                'Fríjol 500 Gramos Cargamanto blanco', 'Frijol bola roja 500 grs', 'Frijol cargamanto rosado 1000 grs',
                'Frijol cargamanto rosado 500 grs', 'Frijol lima 1000 grs', 'Frijol lima 500 grs',
                'Frijol radical 1000 grs', 'Frijol radical 500 grs', 'Frijol radical catalino 1000 grs',
                'Frijol radical catalino 500 grs'
            ],
            'Cereales y Granos': [
                'Arroz premium 1000 Gramos', 'Arroz premium 500 Gramos', 'Avena UHT 200 ml',
                'Avena instantanea saborizada 180 a 200 grs', 'Avena en hojuelas 200 a 250 grs',
                'Avena instantanea natural 200 a 250 grs', 'Harina de maiz blanco precocida 1000 grs',
                'Harina de maiz blanco precocida 500 grs', 'Harina de trigo 500 grs',
                'Hojuelas de maiz sin azucar 1000 grs', 'Hojuelas de maiz sin azucar 500 grs',
                'Maiz tierno congelado 1000 grs', 'Maiz tierno congelado 200 grs', 'Maiz tierno congelado 500 grs'
            ],
            'Lácteos': [
                'Arequipe sachet individual 20 grs', 'Crema de leche 870 a 900 grs', 'Crema de leche 175 a 200 grs',
                'Kumis 1000 grs', 'Kumis 200 grs', 'Leche en polvo 380 a 400 grs', 'Leche en polvo 900 a 1000 grs',
                'Leche entera liquida UHT 200 ml', 'Leche entera liquida UHT 900 a 1000 ml', 'Leche saborizada 200 ml',
                'Mantequilla sin sal 125 grs', 'Mantequilla sin sal 250 grs', 'Mantequilla sin sal 500 grs',
                'Queso blanco 1000 grs', 'Queso blanco 500 grs', 'Queso blanco 250 grs',
                'Queso mozzarella tajado 2000 grs', 'Queso mozzarella tajado 1000 grs', 'Queso mozzarella tajado 500 grs',
                'Queso mozzarella tajado 250 grs', 'Yogurt de fresa 190 a 200 ml', 'Yogurt de fresa 850 a 900 ml',
                'Yogurt de melocotón 190 a 200 ml', 'Yogurt de melocotón 850 a 900 ml', 'Yogurt de mora 190 a 200 ml',
                'Yogurt de mora 850 a 900 ml', 'Yogurt Grieg (fresa-limón-piña) 125 grs', 'Yogurt Griego Vainilla 125 grs'
            ],
            'Aceites y Condimentos': [
                'Aceite 1000 ml', 'Aceite 250 ml', 'Aceite 500 ml', 'Aceite 3000 ml', 'Achiote 100 grs',
                'Achiote 50 grs', 'Achiote 60 grs', 'Achiote 70 grs', 'Ajo en polvo 20 a 30 grs', 'Ajo en polvo 50 grs',
                'Ajonjoli 100 grs', 'Ajonjoli 20 grs', 'Ajonjoli 50 grs', 'Azucar 1000 grs', 'Azucar 500 grs',
                'Bicarbonato 20 grs', 'Canela en polvo 20 grs', 'Canela en polvo 50 grs', 'Canela en polvo 100 grs',
                'Clavos de olor 100 grs', 'Clavos de olor 20 grs', 'Clavos de olor 50 grs', 'Cocoa en polvo 200 grs',
                'Cocoa en polvo 230 grs', 'Color 20 grs', 'Color 50 grs', 'Color 100 grs', 'Curcuma en polvo 20 a 25 grs',
                'Curcuma en polvo 50 a 55 grs', 'Curry en polvo 100 grs', 'Curry en polvo 20 grs', 'Curry en polvo 50 grs',
                'Esencia de vainilla 165 a 170 ml', 'Finas hierbas 100 grs', 'Finas hierbas 50 grs',
                'Finas hierbas 15 a 20 grs', 'Laurel 100 grs', 'Laurel 50 grs', 'Laurel 10 a 20 grs',
                'Nuez moscada en polvo 15 a 20 grs', 'Nuez moscada en polvo 50 grs', 'Nuez moscada en polvo 100 grs',
                'Pimienta molida 100 grs', 'Pimienta molida 50 grs', 'Pimienta molida 20 grs', 'Sal 1000 grs', 'Sal 500 grs',
                'Vinagre de frutas 500 ml', 'Vinagre blanco 500 ml'
            ],
            'Proteínas': [
                'CARNE DE CERDO 1000 GRS', 'CARNE DE CERDO EN GULASH 1000 GRS', 'CARNE DE RES 1000 GRS',
                'CARNE MOLIDA MIXTA HAMBURGUESA 50 GRS (VALOR KILO)', 'CARNE MOLIDA MIXTA HAMBURGUESA 60 GRS (VALOR KILO)',
                'CARNE MOLIDA MIXTA HAMBURGUESA 70 GRS (VALOR KILO)', 'CARNE MOLIDA MIXTA HAMBURGUESA 80 GRS (VALOR KILO)',
                'CARNE MOLIDA MIXTA 1000 GRS', 'CONTRAMUSLO MARINADO 1000 GRS', 'CONTRAMUSLO SIN MARINAR 1000 GRS',
                'FILETE DE POLLO MARINADO 1000 GRS', 'FILETE DE POLLO SIN MARINAR 1000 GRS',
                'FILETE DE POLLO MARINADO EN GULASH 1000 GRS', 'FILETE DE POLLO SIN MARINAR EN GULASH 1000 GRS',
                'TOCINETA 225 GRS', 'TOCINETA 450 GRS', 'Huevo 1 unidad 55Gr', 'Atun en aceite 150 a 160 grs',
                'Atun en agua 160 a 175 grs', 'Sardina en salsa de tomate 155 grs'
            ],
            'Productos de Panadería': [
                'Arepa de chocolo 320 a 350 grs', 'Arepa de yuca 300 a 320 grs', 'Arepa redonda asada 35 grs',
                'Arepa rellena de queso 400 grs', 'Arepa tela 580 grs', 'Pan hamburguesa 20 gr', 'Pan hamburguesa 40 gr',
                'Pan tajado 440 gr', 'Torta de naranja 30 gr', 'Torta de naranja 50 gr', 'Torta de naranja 70 gr',
                'Almojábana 30 gr', 'Almojábana 60 gr', 'Pandequeso 30 gr', 'Pandequeso 60 gr',
                'Dedito horneado con queso molido (quesudito) 27 gr', 'Brownie 65 gr', 'Brownie 48 gr',
                'Palo de queso Hojaldrado 30 gr', 'Palo de queso Hojaldrado 50 gr', 'Palo de queso Hojaldrado 70 gr',
                'Pan croissant con relleno de chocolate 30 gr', 'Pan croissant con relleno de chocolate 50 gr',
                'Pan croissant con relleno de chocolate 70 gr', 'Torta de vainilla 30 gr', 'Torta de vainilla 50 gr',
                'Torta de vainilla 70 gr', 'Mufinns 30 gr', 'Mufinns 50 gr', 'Mufinns 70 gr',
                'Brownie Relleno de arequipe 10% relleno 65 gr', 'Brownie Relleno de arequipe 10% relleno 48 gr',
                'Waffles de yuca 45 grs', 'Waffles natural 30 grs', 'Waffles natural 50 a 54 grs'
            ],
            'Galletas y Snacks': [
                'Galleta rellena de yogurt griego y acai 23 gr', 'Galleta chips de chocolate 35 gr',
                'Galleta chips de chocolate 40 gr', 'Galletas crackers saladas 25 a 34 grs',
                'Galletas crackers saladas 300 a 400 grs', 'Galleta multicereal con relleno de crema tipo sandwich 23 gr',
                'Galleta salada * 4 tacos 300 gr', 'Galleta salada * 6 tacos 450 gr', 'Mani con cobertura de chocolate 50 grs',
                'Mani dulce 30 grs', 'Mani dulce 60 grs', 'Mani salado 30 grs', 'Mani salado 60 grs',
                'Mantequilla de mani 250 a 300 grs', 'Mezcla frutos secos 30 grs', 'Mezcla frutos secos 60 grs'
            ],
            'Pastas y Cereales': [
                'Pasta (tornillos) 250 grs', 'Pasta alimenticia (espagueti) 250 grs', 'Pasta alimenticia (espagueti) 500 grs',
                'Pasta cabello de angel 250 grs', 'Pasta tipo penne 500 grs', 'Tortilla de harina de trigo extra grande 1 paquete',
                'Tortilla de harina de trigo grande 1 paquete', 'Tortilla de harina de trigo mediana 1 paquete'
            ],
            'Dulces y Mermeladas': [
                'Bocadillo 20 grs', 'Mermelada de mora 200 a 250 grs', 'Mermelada de mora 500 grs',
                'Mermelada de piña 200 a 250 grs', 'Mermelada de piña 500 grs', 'Mermelada sachet individual 15 grs',
                'Miel 200 grs', 'Panela 830 a 1000 grs', 'Chocolate de mesa sin azucar 250 grs'
            ],
            'Pulpas Congeladas': [
                'Pulpa de fresa congelada 1000 grs', 'Pulpa de guanabana congelada 1000 grs', 'Pulpa de guayaba congelada 1000 grs',
                'Pulpa de lulo congelada 1000 grs', 'Pulpa de mandarina congelada 1000 grs', 'Pulpa de mango congelada 1000 grs',
                'Pulpa de maracuya congelada 1000 grs', 'Pulpa de mora congelada 1000 grs', 'Pulpa de piña congelada 1000 grs',
                'Pulpa de tomate de árbol congelada 1000 grs', 'Pulpa de uva congelada 1000 grs'
            ],
            'Bebidas': [
                'Agua 200 ml', 'Refresco de fruta 200 ml'
            ],
            'Productos Preparados': [
                'Pastel de pollo 130 grs', 'Pastel de pollo 30 a 37,5 grs', 'Papa rellena 30 grs'
            ],
            'Suplementos': [
                'Formulas de suplementos para adultos de uso general (mujeres gestantes y lactantes) 400 grs',
                'Polvo instantáneo fortificado con sabor a chocolate 200 grs'
            ],
            'Empaques y Utensilios': [
                'Bolsa de empaque 1 unidad', 'Costal tipo saco de gasa de vuelta 39x45 cm',
                'Costal tipo saco de gasa de vuelta 45x60 cm'
            ],
            'Otros': [
                'Fecula de maiz natural 500 grs', 'Fecula de maiz natural 1000 grs', 'Fecula de maiz saborizada 180 grs',
                'Cafe instantaneo 85 grs'
            ]
        };
        
        // FUNCIONES DE AUTOCOMPLETADO
        function inicializarAutocompletado(inputId, sugerenciasId) {
            const input = document.getElementById(inputId);
            const sugerenciasDiv = document.getElementById(sugerenciasId);
            let sugerenciasActuales = [];
            let indiceSeleccionado = -1;
            
            input.addEventListener('input', function() {
                const valor = this.value.toLowerCase().trim();
                
                if (valor.length < 2) {
                    sugerenciasDiv.style.display = 'none';
                    return;
                }
                
                // Buscar productos que coincidan
                sugerenciasActuales = [];
                Object.keys(productosSugeridos).forEach(categoria => {
                    productosSugeridos[categoria].forEach(producto => {
                        if (producto.toLowerCase().includes(valor)) {
                            sugerenciasActuales.push({
                                nombre: producto,
                                categoria: categoria
                            });
                        }
                    });
                });
                
                // Mostrar sugerencias
                mostrarSugerencias(sugerenciasActuales, sugerenciasDiv);
                indiceSeleccionado = -1;
            });
            
            input.addEventListener('keydown', function(e) {
                if (sugerenciasDiv.style.display === 'block') {
                    if (e.key === 'ArrowDown') {
                        e.preventDefault();
                        indiceSeleccionado = Math.min(indiceSeleccionado + 1, sugerenciasActuales.length - 1);
                        actualizarSeleccion(sugerenciasDiv, indiceSeleccionado);
                    } else if (e.key === 'ArrowUp') {
                        e.preventDefault();
                        indiceSeleccionado = Math.max(indiceSeleccionado - 1, -1);
                        actualizarSeleccion(sugerenciasDiv, indiceSeleccionado);
                    } else if (e.key === 'Enter') {
                        e.preventDefault();
                        if (indiceSeleccionado >= 0 && sugerenciasActuales[indiceSeleccionado]) {
                            this.value = sugerenciasActuales[indiceSeleccionado].nombre;
                            sugerenciasDiv.style.display = 'none';
                        }
                    } else if (e.key === 'Escape') {
                        sugerenciasDiv.style.display = 'none';
                    }
                }
            });
            
            // Cerrar sugerencias al hacer clic fuera
            document.addEventListener('click', function(e) {
                if (!input.contains(e.target) && !sugerenciasDiv.contains(e.target)) {
                    sugerenciasDiv.style.display = 'none';
                }
            });
        }
        
        function mostrarSugerencias(sugerencias, contenedor) {
            if (sugerencias.length === 0) {
                contenedor.style.display = 'none';
                return;
            }
            
            let html = '';
            sugerencias.slice(0, 8).forEach(sugerencia => {
                html += `
                    <div class="sugerencia-item" onclick="seleccionarSugerencia('${sugerencia.nombre}', '${contenedor.id}')">
                        <div>${sugerencia.nombre}</div>
                        <div class="sugerencia-categoria">${sugerencia.categoria}</div>
                    </div>
                `;
            });
            
            contenedor.innerHTML = html;
            contenedor.style.display = 'block';
        }
        
        function actualizarSeleccion(contenedor, indice) {
            const items = contenedor.querySelectorAll('.sugerencia-item');
            items.forEach((item, i) => {
                if (i === indice) {
                    item.classList.add('seleccionada');
                } else {
                    item.classList.remove('seleccionada');
                }
            });
        }
        
        function seleccionarSugerencia(producto, contenedorId) {
            const inputId = contenedorId.replace('sugerencias-', 'producto-');
            document.getElementById(inputId).value = producto;
            document.getElementById(contenedorId).style.display = 'none';
        }
        
        // FUNCIONES DE NAVEGACIÓN
        function mostrarSeccion(seccion) {
            // Ocultar todas las secciones
            document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activa'));
            document.getElementById('menu-principal').style.display = 'none';
            
            // Mostrar la sección seleccionada
            document.getElementById('seccion-' + seccion).classList.add('activa');
            
            // Cargar datos específicos según la sección
            if (seccion === 'stock') {
                mostrarStockActual(); // Mostrar stock actual en lugar del historial
            } else if (seccion === 'historial') {
                cargarHistorial();
                
                // Configurar event listeners para los filtros del historial
                setTimeout(() => {
                    console.log('🔧 Configurando filtros del historial...');
                    const filtrosHistorial = [
                        'filtro-tipo-historial',
                        'filtro-sede-historial', 
                        'filtro-fecha-historial',
                        'filtro-responsable-historial'
                    ];
                    
                    filtrosHistorial.forEach(id => {
                        const elemento = document.getElementById(id);
                        if (elemento) {
                            // Remover event listener existente si lo hay
                            elemento.removeEventListener('change', cargarHistorial);
                            // Agregar nuevo event listener
                            elemento.addEventListener('change', cargarHistorial);
                            console.log(`✅ Event listener configurado para ${id}`);
                        } else {
                            console.log(`❌ Elemento ${id} no encontrado`);
                        }
                    });
                }, 100);
            } else if (seccion === 'salida') {
                // Limpiar campos al abrir la sección de salida
                document.getElementById('sede-salida').value = '';
                cargarProductosPorSede();
                
                // Agregar un pequeño delay para asegurar que los elementos estén disponibles
                setTimeout(() => {
                    console.log('🔧 Verificando elementos de la sección de salida...');
                    const elementos = {
                        'sede-salida': document.getElementById('sede-salida'),
                        'campo-producto-salida': document.getElementById('campo-producto-salida'),
                        'producto-salida': document.getElementById('producto-salida'),
                        'sugerencias-salida': document.getElementById('sugerencias-salida')
                    };
                    
                    Object.keys(elementos).forEach(id => {
                        console.log(`${id}:`, elementos[id] ? '✅ Encontrado' : '❌ No encontrado');
                    });
                }, 100);
            }
        }
        
        function volverMenu() {
            document.querySelectorAll('.seccion').forEach(s => s.classList.remove('activa'));
            document.getElementById('menu-principal').style.display = 'block';
        }
        
        // Función eliminada - ya no se necesita sincronización
        
        // FUNCIONES DE REPORTE MENSUAL
        function generarReporteMensual() {
            try {
                console.log('🔍 Función generarReporteMensual ejecutada');
                
                const mesSeleccionado = document.getElementById('mes-reporte').value;
                console.log('📅 Mes seleccionado:', mesSeleccionado);
                
                if (!mesSeleccionado) {
                    mostrarMensaje('❌ Por favor selecciona un mes', 'error');
                    return;
                }
                
                // Verificar si hay datos en el historial
                console.log('📊 Historial disponible:', historial.length, 'movimientos');
                if (historial.length === 0) {
                    mostrarMensaje('❌ No hay datos de movimientos en el sistema. Primero debes registrar algunas entradas o salidas.', 'error');
                    return;
                }
            
            // Obtener el primer y último día del mes seleccionado
            const [year, month] = mesSeleccionado.split('-');
            const primerDia = `${year}-${month}-01`;
            const ultimoDia = new Date(parseInt(year), parseInt(month), 0).toISOString().split('T')[0];
            
            console.log('📅 Rango de fechas:', primerDia, 'a', ultimoDia);
            
            // Filtrar movimientos del mes seleccionado
            let movimientosFiltrados = historial.filter(movimiento => {
                const fechaMovimiento = new Date(movimiento.timestamp);
                const fechaMovimientoStr = fechaMovimiento.toISOString().split('T')[0];
                const cumpleFiltro = fechaMovimientoStr >= primerDia && fechaMovimientoStr <= ultimoDia;
                if (cumpleFiltro) {
                    console.log('✅ Movimiento incluido:', movimiento.producto, 'fecha:', fechaMovimiento.toLocaleDateString('es-ES'));
                }
                return cumpleFiltro;
            });
            
            console.log('📊 Movimientos filtrados:', movimientosFiltrados.length);
            
            if (movimientosFiltrados.length === 0) {
                // Mostrar información sobre qué meses tienen datos
                const mesesDisponibles = [...new Set(historial.map(mov => {
                    const fecha = new Date(mov.timestamp);
                    // Verificar que la fecha sea válida
                    if (isNaN(fecha.getTime())) {
                        console.warn('⚠️ Fecha inválida encontrada:', mov.timestamp);
                        return null;
                    }
                    return `${fecha.getFullYear()}-${String(fecha.getMonth() + 1).padStart(2, '0')}`;
                }).filter(mes => mes !== null))].sort();
                const mesesRecientes = mesesDisponibles.slice(-3); // Últimos 3 meses
                
                let mensaje = `❌ No hay movimientos en el mes seleccionado (${mesSeleccionado}).`;
                
                if (mesesDisponibles.length > 0) {
                    mensaje += `\n\n📅 Meses disponibles con datos: ${mesesRecientes.join(', ')}`;
                    mensaje += `\n💡 Sugerencia: Selecciona uno de estos meses para generar el reporte.`;
                }
                
                mostrarMensaje(mensaje, 'info');
                return;
            }
            
            // Generar tabla del reporte mensual
            generarTablaReporteMensual(movimientosFiltrados, mesSeleccionado);
            
            // Mostrar el contenido del reporte
            document.getElementById('reporte-contenido').style.display = 'block';
            
            // Mostrar mensaje de éxito
            mostrarMensaje(`✅ Reporte mensual generado exitosamente - ${movimientosFiltrados.length} movimientos encontrados en ${mesSeleccionado}`, 'exito');
            } catch (error) {
                console.error('❌ Error en generarReporteMensual:', error);
                mostrarMensaje(`❌ Error al generar reporte: ${error.message}`, 'error');
            }
        }
        
        function generarTablaReporteMensual(movimientos, mes) {
            try {
                console.log('🔧 Función generarTablaReporteMensual ejecutada');
                console.log('📊 Movimientos recibidos:', movimientos);
                console.log('📅 Mes recibido:', mes);
                
                const tablaContainer = document.getElementById('tabla-reporte');
                const fechaTexto = document.getElementById('fecha-reporte-texto');
                const tituloReporte = document.querySelector('.reporte-header h3');
                
                console.log('📋 Elementos encontrados:', {
                    tablaContainer: tablaContainer,
                    fechaTexto: fechaTexto,
                    tituloReporte: tituloReporte
                });
                
                // Formatear mes
                const [year, month] = mes.split('-');
                const fechaObj = new Date(parseInt(year), parseInt(month) - 1, 1);
                const mesFormateado = fechaObj.toLocaleDateString('es-ES', {
                    year: 'numeric',
                    month: 'long'
                });
                fechaTexto.textContent = `Reporte del mes: ${mesFormateado}`;
                
                // Actualizar título del reporte
                tituloReporte.textContent = 'REPORTE MENSUAL COMPLETO';
            
            // Agrupar movimientos por tipo
            let movimientosAgrupados = {};
            
            movimientos.forEach(movimiento => {
                const tipoMovimiento = movimiento.tipo === 'entrada' ? '📥 Entradas' : 
                                      movimiento.tipo === 'salida' ? '📤 Salidas' : '↩️ Devoluciones';
                if (!movimientosAgrupados[tipoMovimiento]) {
                    movimientosAgrupados[tipoMovimiento] = [];
                }
                movimientosAgrupados[tipoMovimiento].push(movimiento);
            });
            
            // Crear tabla HTML agrupada
            let tablaHTML = '';
            
            Object.keys(movimientosAgrupados).forEach(grupo => {
                // Calcular totales por grupo
                const totalProductos = movimientosAgrupados[grupo].length;
                const totalCantidad = movimientosAgrupados[grupo].reduce((sum, mov) => sum + mov.cantidad, 0);
                
                // Encabezado de grupo con totales
                tablaHTML += `
                    <div class="sede-grupo">
                        <h4 class="sede-titulo">${grupo}</h4>
                        <p class="sede-resumen">Total productos: ${totalProductos} | Total cantidad: ${totalCantidad}</p>
                        
                        <table class="tabla-reporte">
                            <thead>
                                <tr>
                                    <th>Producto</th>
                                    <th>Cantidad</th>
                                    <th>Sede</th>
                                    <th>Fecha</th>
                                    <th>Responsable</th>
                                    <th>Modalidad</th>
                                    <th>Lote</th>
                                    <th>Fecha de Vencimiento</th>
                                </tr>
                            </thead>
                            <tbody>
                `;
                
                // Productos de este grupo
                movimientosAgrupados[grupo].forEach((movimiento, index) => {
                    // Obtener fecha de vencimiento del lote
                    let fechaVencimiento = '-';
                    if (movimiento.lote && movimiento.lote !== 'Sin lote') {
                        const claveInventario = Object.keys(inventario).find(clave => {
                            const item = inventario[clave];
                            return item.producto === movimiento.producto && item.sede === movimiento.sede;
                        });
                        
                        if (claveInventario && lotes[claveInventario]) {
                            const loteEncontrado = lotes[claveInventario].find(lote => lote.lote === movimiento.lote);
                            if (loteEncontrado) {
                                // Usar fechaVencimiento como fuente principal, luego fecha
                                fechaVencimiento = loteEncontrado.fechaVencimiento || loteEncontrado.fecha || 'Sin fecha';
                            }
                        }
                        
                        // Si no se encuentra en lotes, usar la fecha del movimiento
                        if (fechaVencimiento === '-' && movimiento.fechaVencimiento) {
                            fechaVencimiento = movimiento.fechaVencimiento;
                        }
                    }
                    
                    // Determinar sede para mostrar
                    let sedeMostrar = movimiento.sede;
                    if (movimiento.sedeDestino) {
                        sedeMostrar = `${movimiento.sede} → ${movimiento.sedeDestino}`;
                    }
                    
                    tablaHTML += `
                        <tr>
                            <td><strong>${movimiento.producto}</strong></td>
                            <td class="cantidad-cell">${movimiento.cantidad}</td>
                            <td>${sedeMostrar}</td>
                            <td>${new Date(movimiento.timestamp).toLocaleDateString('es-ES')}</td>
                            <td>👤 ${movimiento.responsable || 'No especificado'}</td>
                            <td>${movimiento.modalidad || '-'}</td>
                            <td>${movimiento.lote || '-'}</td>
                            <td>${fechaVencimiento}</td>
                        </tr>
                    `;
                });
                
                tablaHTML += `
                            </tbody>
                        </table>
                    </div>
                `;
            });
            
            console.log('📋 HTML generado:', tablaHTML);
            tablaContainer.innerHTML = tablaHTML;
            console.log('✅ Tabla generada exitosamente');
            } catch (error) {
                console.error('❌ Error en generarTablaReporteMensual:', error);
                mostrarMensaje(`❌ Error al generar tabla: ${error.message}`, 'error');
            }
        }
        
        function imprimirReporte() {
            const reporteContenido = document.getElementById('reporte-contenido');
            
            if (reporteContenido.style.display === 'none') {
                mostrarMensaje('❌ Primero debes generar un reporte', 'error');
                return;
            }
            
            window.print();
        }
        
        // FUNCIONES AUXILIARES PARA EL REPORTE
        function actualizarEstadoRecepcion(rowId, estado) {
            const cantidadRecibidaDiv = document.getElementById(`cantidad-recibida-${rowId}`);
            
            // Ocultar campo de cantidad recibida por defecto
            cantidadRecibidaDiv.style.display = 'none';
            
            // Mostrar campo de cantidad recibida solo si es parcial
            if (estado === 'parcial') {
                cantidadRecibidaDiv.style.display = 'block';
            }
            
            // Actualizar clase de la fila para indicar estado
            const row = document.getElementById(rowId);
            row.className = `estado-${estado}`;
            
            // Guardar estado en localStorage para persistencia
            const reporteData = JSON.parse(localStorage.getItem('reporteEstado') || '{}');
            reporteData[rowId] = { estado: estado };
            localStorage.setItem('reporteEstado', JSON.stringify(reporteData));
        }
        
        function actualizarCantidadRecibida(rowId, cantidad) {
            // Guardar cantidad recibida en localStorage
            const reporteData = JSON.parse(localStorage.getItem('reporteEstado') || '{}');
            if (!reporteData[rowId]) {
                reporteData[rowId] = {};
            }
            reporteData[rowId].cantidadRecibida = parseInt(cantidad);
            localStorage.setItem('reporteEstado', JSON.stringify(reporteData));
        }
        
        function obtenerResumenReporte() {
            const reporteData = JSON.parse(localStorage.getItem('reporteEstado') || '{}');
            let resumen = {
                totalProductos: 0,
                llegaronCompletos: 0,
                noLlegaron: 0,
                llegaronParciales: 0,
                totalCantidadEnviada: 0,
                totalCantidadRecibida: 0
            };
            
            // Contar estados
            Object.values(reporteData).forEach(item => {
                resumen.totalProductos++;
                if (item.estado === 'llego') {
                    resumen.llegaronCompletos++;
                } else if (item.estado === 'no-llego') {
                    resumen.noLlegaron++;
                } else if (item.estado === 'parcial') {
                    resumen.llegaronParciales++;
                }
            });
            
            return resumen;
        }
        
        function mostrarResumenReporte() {
            const reporteContenido = document.getElementById('reporte-contenido');
            
            if (reporteContenido.style.display === 'none') {
                mostrarMensaje('❌ Primero debes generar un reporte', 'error');
                return;
            }
            
            const resumen = obtenerResumenReporte();
            const totalProductos = resumen.totalProductos;
            
            if (totalProductos === 0) {
                mostrarMensaje('ℹ️ No hay productos marcados en el reporte aún', 'info');
                return;
            }
            
            const porcentajeLlegaron = totalProductos > 0 ? Math.round((resumen.llegaronCompletos / totalProductos) * 100) : 0;
            const porcentajeNoLlegaron = totalProductos > 0 ? Math.round((resumen.noLlegaron / totalProductos) * 100) : 0;
            const porcentajeParciales = totalProductos > 0 ? Math.round((resumen.llegaronParciales / totalProductos) * 100) : 0;
            
            const mensajeResumen = `
                <div style="text-align: left; font-size: 1.1em;">
                    <h3 style="color: #2c3e50; margin-bottom: 15px;">📊 RESUMEN DEL REPORTE</h3>
                    
                    <div style="margin-bottom: 15px;">
                        <strong>Total de productos:</strong> ${totalProductos}
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <span style="color: #28a745;">✅ Llegaron completos:</span> ${resumen.llegaronCompletos} (${porcentajeLlegaron}%)
                    </div>
                    
                    <div style="margin-bottom: 10px;">
                        <span style="color: #dc3545;">❌ No llegaron:</span> ${resumen.noLlegaron} (${porcentajeNoLlegaron}%)
                    </div>
                    
                    <div style="margin-bottom: 15px;">
                        <span style="color: #ffc107;">⚠️ Llegaron parciales:</span> ${resumen.llegaronParciales} (${porcentajeParciales}%)
                    </div>
                    
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 8px; border-left: 4px solid #3498db;">
                        <strong>Estado general:</strong> 
                        ${porcentajeLlegaron >= 80 ? '🟢 EXCELENTE' : 
                          porcentajeLlegaron >= 60 ? '🟡 BUENO' : 
                          porcentajeLlegaron >= 40 ? '🟠 REGULAR' : '🔴 REQUIERE ATENCIÓN'}
                    </div>
                </div>
            `;
            
            Swal.fire({
                title: '📈 RESUMEN DEL REPORTE',
                html: mensajeResumen,
                icon: 'info',
                confirmButtonText: 'Entendido',
                confirmButtonColor: '#3498db',
                width: '500px'
            });
        }
        
        function limpiarEstadoReporte() {
            Swal.fire({
                title: '🔄 LIMPIAR ESTADO DEL REPORTE',
                text: '¿Estás seguro de que quieres limpiar todos los estados de recepción marcados?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Sí, limpiar',
                cancelButtonText: 'Cancelar',
                confirmButtonColor: '#dc3545',
                cancelButtonColor: '#6c757d'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Limpiar localStorage
                    localStorage.removeItem('reporteEstado');
                    
                    // Limpiar clases de estado de las filas
                    const filas = document.querySelectorAll('.tabla-reporte tbody tr');
                    filas.forEach(fila => {
                        fila.className = '';
                    });
                    
                    // Desmarcar todos los radio buttons
                    const radioButtons = document.querySelectorAll('.estado-opciones input[type="radio"]');
                    radioButtons.forEach(radio => {
                        radio.checked = false;
                    });
                    
                    // Ocultar campos de cantidad recibida
                    const camposCantidad = document.querySelectorAll('.cantidad-recibida');
                    camposCantidad.forEach(campo => {
                        campo.style.display = 'none';
                    });
                    
                    mostrarMensaje('✅ Estado del reporte limpiado correctamente', 'success');
                }
            });
        }
        
        // FUNCIÓN PARA EXPORTAR REPORTE MENSUAL A EXCEL
        function exportarReporteExcel() {
            const reporteContenido = document.getElementById('reporte-contenido');
            
            if (reporteContenido.style.display === 'none') {
                mostrarMensaje('❌ Primero debes generar un reporte', 'error');
                return;
            }
            
            const mesSeleccionado = document.getElementById('mes-reporte').value;
            
            if (!mesSeleccionado) {
                mostrarMensaje('❌ Faltan datos para generar el reporte', 'error');
                return;
            }
            
            // Obtener el primer y último día del mes seleccionado
            const [year, month] = mesSeleccionado.split('-');
            const primerDia = `${year}-${month}-01`;
            const ultimoDia = new Date(parseInt(year), parseInt(month), 0).toISOString().split('T')[0];
            
            // Obtener todos los movimientos del mes
            let movimientosFiltrados = historial.filter(movimiento => {
                const fechaMovimiento = new Date(movimiento.timestamp);
                const fechaMovimientoStr = fechaMovimiento.toISOString().split('T')[0];
                return fechaMovimientoStr >= primerDia && fechaMovimientoStr <= ultimoDia;
            });
            
            if (movimientosFiltrados.length === 0) {
                mostrarMensaje('❌ No hay datos para exportar', 'error');
                return;
            }
            
            // Función auxiliar para limpiar texto de frases específicas
            function limpiarTextoReporte(texto) {
                if (!texto) return texto;
                return texto
                    .replace(/compra local/gi, '')
                    .replace(/envio para comedor/gi, '')
                    .replace(/envio semanal/gi, '')
                    .replace(/compra mayorista/gi, '')
                    .trim();
            }
            
            // Crear datos para Excel - INCLUYENDO RESPONSABLE
            const datosExcel = [];
            
            // Agregar encabezados de columnas
            datosExcel.push(['Producto', 'Cantidad', 'Fecha', 'Sede o Movimiento', 'Responsable', 'Modalidad']);
            
            // Agregar todos los movimientos del mes
            movimientosFiltrados.forEach(movimiento => {
                // Determinar sede para mostrar
                let sedeMostrar = movimiento.sede;
                if (movimiento.sedeDestino) {
                    sedeMostrar = `${movimiento.sede} → ${movimiento.sedeDestino}`;
                }
                
                datosExcel.push([
                    limpiarTextoReporte(movimiento.producto),
                    movimiento.cantidad,
                    new Date(movimiento.timestamp).toLocaleDateString('es-ES'),
                    limpiarTextoReporte(sedeMostrar),
                    movimiento.responsable || 'No especificado',
                    movimiento.modalidad || 'No especificada'
                ]);
            });
            
            // Crear el archivo Excel con formato
            const ws = XLSX.utils.aoa_to_sheet(datosExcel);
            const wb = XLSX.utils.book_new();
            
            // Aplicar formato a los encabezados (negritas)
            if (!ws['!cols']) ws['!cols'] = [];
            ws['!cols'][0] = { width: 25 }; // Producto
            ws['!cols'][1] = { width: 12 }; // Cantidad
            ws['!cols'][2] = { width: 15 }; // Fecha
            ws['!cols'][3] = { width: 35 }; // Sede o Movimiento
            ws['!cols'][4] = { width: 20 }; // Responsable
            ws['!cols'][5] = { width: 15 }; // Modalidad
            
            // Aplicar negritas a la primera fila (encabezados)
            for (let col = 0; col < 6; col++) {
                const cellRef = XLSX.utils.encode_cell({ r: 0, c: col });
                if (!ws[cellRef]) continue;
                if (!ws[cellRef].s) ws[cellRef].s = {};
                ws[cellRef].s.font = { bold: true };
            }
            
            XLSX.utils.book_append_sheet(wb, ws, 'Reporte');
            
            // Generar nombre del archivo
            const nombreArchivo = `Reporte_Mensual_${mesSeleccionado.replace(/-/g, '_')}.xlsx`;
            
            // Descargar el archivo
            XLSX.writeFile(wb, nombreArchivo);
            
            mostrarMensaje('✅ Reporte exportado a Excel correctamente', 'success');
        }
        
        // FUNCIONES DE FORMULARIOS
        function limpiarFormularioEntrada() {
            document.getElementById('producto-entrada').value = '';
            document.getElementById('cantidad-entrada').value = '';
            document.getElementById('sede-entrada').value = '';
            document.getElementById('descripcion-entrada').value = '';
            document.getElementById('modalidad-entrada').value = '';
            document.getElementById('fecha-vencimiento-entrada').value = '';
            document.getElementById('lote-entrada').value = '';
            document.getElementById('fecha-no-aplica-entrada').checked = false;
            document.getElementById('lote-no-aplica-entrada').checked = false;
            document.getElementById('responsable-entrada').value = '';
        }
        
        function limpiarFormularioSalida() {
            document.getElementById('producto-salida').value = '';
            document.getElementById('cantidad-salida').value = '';
            document.getElementById('sede-salida').value = '';
            document.getElementById('sede-destino').value = '';
            document.getElementById('tipo-uso').value = '';
            document.getElementById('responsable-salida').value = '';
            document.getElementById('cupos-modalidad').value = '';
            document.getElementById('campo-destino').style.display = 'none';
            
            // Limpiar lista de productos múltiples
            limpiarListaProductos();
            
            console.log('Formulario de salida limpiado');
        }
        
        function probarSelectorDestino() {
            console.log('=== PRUEBA DEL SELECTOR DE DESTINO ===');
            const sedeSalida = document.getElementById('sede-salida');
            const campoDestino = document.getElementById('campo-destino');
            
            console.log('Valor actual del selector:', sedeSalida.value);
            console.log('Estado actual del campo destino:', campoDestino.style.display);
            
            // Simular selección de BODEGA CENTRAL
            sedeSalida.value = 'BODEGA CENTRAL';
            console.log('Seleccionando BODEGA CENTRAL...');
            mostrarOcultarDestino();
            
            setTimeout(() => {
                console.log('Estado después de seleccionar BODEGA CENTRAL:', campoDestino.style.display);
                
                // Simular selección de otra sede
                sedeSalida.value = 'IE Alejandro Vélez Barrientos';
                console.log('Seleccionando otra sede...');
                mostrarOcultarDestino();
                
                setTimeout(() => {
                    console.log('Estado después de seleccionar otra sede:', campoDestino.style.display);
                    
                    // Volver a BODEGA CENTRAL
                    sedeSalida.value = 'BODEGA CENTRAL';
                    console.log('Volviendo a BODEGA CENTRAL...');
                    mostrarOcultarDestino();
                    
                    setTimeout(() => {
                        console.log('Estado final:', campoDestino.style.display);
                        console.log('=== FIN DE LA PRUEBA ===');
                    }, 500);
                }, 500);
            }, 500);
        }
        
        function mostrarOcultarDestino() {
            const sedeOrigen = document.getElementById('sede-salida').value;
            const campoDestino = document.getElementById('campo-destino');
            
            console.log('mostrarOcultarDestino ejecutado - Sede origen:', sedeOrigen);
            
            if (sedeOrigen === 'BODEGA CENTRAL') {
                campoDestino.style.display = 'block';
                console.log('Campo destino mostrado');
            } else {
                campoDestino.style.display = 'none';
                document.getElementById('sede-destino').value = '';
                console.log('Campo destino ocultado');
            }
        }
        
        function limpiarFormularioDevolucion() {
            // Limpiar campos
            document.getElementById('sede-devolucion').value = '';
            document.getElementById('producto-devolucion').value = '';
            document.getElementById('cantidad-devolucion').value = '';
            document.getElementById('motivo-devolucion').value = '';
            document.getElementById('motivo-otro-devolucion').value = '';
            document.getElementById('modalidad-devolucion').value = '';
            document.getElementById('responsable-devolucion').value = '';
            
            // Ocultar campos condicionales
            document.getElementById('campo-producto-devolucion').style.display = 'none';
            document.getElementById('campo-cantidad-devolucion').style.display = 'none';
            document.getElementById('campo-motivo-devolucion').style.display = 'none';
            document.getElementById('campo-modalidad-devolucion').style.display = 'none';
            document.getElementById('campo-responsable-devolucion').style.display = 'none';
            document.getElementById('campo-otro-motivo').style.display = 'none';
            
            // Ocultar sugerencias
            document.getElementById('sugerencias-devolucion').style.display = 'none';
            document.getElementById('sugerencias-responsable-devolucion').style.display = 'none';
        }
        
        function mostrarCampoOtroMotivo() {
            const motivoSelect = document.getElementById('motivo-devolucion');
            const campoOtro = document.getElementById('campo-otro-motivo');
            
            if (motivoSelect.value === 'Otro') {
                campoOtro.style.display = 'block';
            } else {
                campoOtro.style.display = 'none';
                document.getElementById('motivo-otro-devolucion').value = '';
            }
        }

        function limpiarFormularioRestablecer() {
            document.getElementById('clave-restablecer').value = '';
        }

        // FUNCIÓN PARA RESTABLECER SOLO PRODUCTOS (MANTENER HISTORIAL)
        async function restablecerSoloProductos() {
            try {
                // Mostrar confirmación
                const result = await Swal.fire({
                    title: '⚠️ Restablecer Solo Stock',
                    html: `
                        <div style="text-align: left;">
                            <p><strong>¿Estás seguro de que quieres restablecer solo el stock?</strong></p>
                            <p>Esta acción eliminará:</p>
                            <ul style="text-align: left; margin: 10px 0;">
                                <li>📦 Todos los productos del inventario</li>
                                <li>📊 Cantidades de stock</li>
                                <li>🏷️ Información de lotes</li>
                            </ul>
                            <p><strong>✅ Se mantendrá:</strong></p>
                            <ul style="text-align: left; margin: 10px 0;">
                                <li>📋 Historial de movimientos</li>
                                <li>📊 Contadores</li>
                                <li>💬 Comentarios</li>
                            </ul>
                            <p style="color: #ff6b6b; font-weight: bold;">⚠️ Esta acción se sincronizará en todos los dispositivos.</p>
                        </div>
                    `,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonText: '✅ SÍ, RESTABLECER',
                    cancelButtonText: '❌ CANCELAR',
                    confirmButtonColor: '#ff6b6b',
                    cancelButtonColor: '#6c757d',
                    reverseButtons: true,
                    allowOutsideClick: false
                });

                if (result.isConfirmed) {
                    // Mostrar indicador de progreso
                    Swal.fire({
                        title: '🔄 Restableciendo stock...',
                        html: 'Por favor espera mientras se eliminan los productos...',
                        allowOutsideClick: false,
                        didOpen: () => {
                            Swal.showLoading();
                        }
                    });

                    // Restablecer productos en Firebase
                    console.log('🔥 Restableciendo productos en Firebase...');
                    if (window.restablecerProductosFirebase) {
                        await window.restablecerProductosFirebase();
                        console.log('✅ Productos restablecidos en Firebase');
                    }

                    // Limpiar solo el inventario local
                    inventario = {};
                    localStorage.removeItem('inventario');

                    // Mostrar confirmación de éxito
                    setTimeout(() => {
                        Swal.fire({
                            title: '✅ Stock Restablecido',
                            html: `
                                <div style="text-align: left;">
                                    <p><strong>El stock ha sido restablecido exitosamente.</strong></p>
                                    <p>Se han eliminado:</p>
                                    <ul style="text-align: left; margin: 10px 0;">
                                        <li>📦 Inventario: Limpiado</li>
                                        <li>🏷️ Lotes: Eliminados</li>
                                        <li>🔥 Firebase: Sincronizado</li>
                                    </ul>
                                    <p><strong>✅ Los cambios se han sincronizado en todos los dispositivos conectados.</strong></p>
                                    <p style="color: #4caf50; font-weight: bold;">🎉 El stock está listo para un nuevo inicio.</p>
                                </div>
                            `,
                            icon: 'success',
                            confirmButtonText: '✅ ENTENDIDO',
                            width: '500px'
                        });
                    }, 2000);
                }
            } catch (error) {
                console.error('❌ Error restableciendo productos:', error);
                Swal.fire({
                    title: '❌ Error',
                    text: 'Hubo un error al restablecer el stock. Por favor intenta nuevamente.',
                    icon: 'error',
                    confirmButtonText: '✅ ENTENDIDO'
                });
            }
        }

        // FUNCIÓN PARA RESTABLECER INVENTARIO
        function restablecerInventario() {
            const clave = document.getElementById('clave-restablecer').value.trim();
            
            // Verificar que se haya ingresado una clave
            if (!clave) {
                mostrarMensaje('❌ Por favor ingresa la clave de administrador', 'error');
                return;
            }
            
            // Verificar la clave (PAE2025)
            if (clave !== 'PAE2025') {
                mostrarMensaje('❌ Clave incorrecta. Acceso denegado', 'error');
                document.getElementById('clave-restablecer').value = '';
                return;
            }
            
            // Confirmar la acción con SweetAlert2
            Swal.fire({
                title: '⚠️ CONFIRMAR RESTABLECIMIENTO',
                html: `
                    <div style="text-align: left;">
                        <p><strong>¿Estás completamente seguro de que quieres restablecer el inventario?</strong></p>
                        <p>Esta acción eliminará:</p>
                        <ul style="text-align: left; margin: 10px 0;">
                            <li>📦 Todo el inventario actual</li>
                            <li>📋 Todo el historial de movimientos</li>
                            <li>📊 Todos los contadores y estadísticas</li>
                            <li>📅 Todas las fechas de vencimiento</li>
                            <li>🏷️ Todos los lotes registrados</li>
                        </ul>
                        <p style="color: #d32f2f; font-weight: bold;">⚠️ Esta acción es IRREVERSIBLE y no se puede deshacer.</p>
                    </div>
                `,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d32f2f',
                cancelButtonColor: '#666',
                confirmButtonText: '🔄 SÍ, RESTABLECER TODO',
                cancelButtonText: '❌ CANCELAR',
                reverseButtons: true,
                allowOutsideClick: false
            }).then((result) => {
                if (result.isConfirmed) {
                    // Ejecutar el restablecimiento
                    ejecutarRestablecimiento();
                }
            });
        }

        async function ejecutarRestablecimiento() {
            try {
                // Mostrar indicador de progreso
                Swal.fire({
                    title: '🔄 Restableciendo inventario...',
                    html: 'Por favor espera mientras se eliminan todos los datos...',
                    allowOutsideClick: false,
                    didOpen: () => {
                        Swal.showLoading();
                    }
                });

                // Restablecer en Firebase primero
                console.log('🔥 Restableciendo inventario en Firebase...');
                if (window.restablecerInventarioFirebase) {
                    await window.restablecerInventarioFirebase();
                    console.log('✅ Inventario restablecido en Firebase');
                } else {
                    console.log('⚠️ Función de restablecimiento de Firebase no disponible');
                }

                // Limpiar todas las variables globales
                console.log('🧹 Limpiando variables globales...');
                console.log('📦 Inventario antes:', Object.keys(inventario).length, 'productos');
                
                inventario = {};
                historial = [];
                contadores = { entradas: 0, salidas: 0, devoluciones: 0 };
                fechasVencimiento = {};
                lotes = {};
                comentariosStock = {};
                productosSeleccionadosSalida = [];
                sedeActual = 'BODEGA CENTRAL';
                
                console.log('📦 Inventario después:', Object.keys(inventario).length, 'productos');
                console.log('✅ Variables globales limpiadas');

                // Limpiar localStorage
                localStorage.removeItem('inventario');
                localStorage.removeItem('historial');
                localStorage.removeItem('contadores');
                localStorage.removeItem('fechasVencimiento');
                localStorage.removeItem('lotes');
                localStorage.removeItem('comentariosStock');
                localStorage.removeItem('productosSeleccionadosSalida');
                localStorage.removeItem('sedeActual');
                localStorage.removeItem('reporteEstado');

                // Actualizar la interfaz de stock inmediatamente
                if (window.mostrarStockActual) {
                    console.log('🔄 Actualizando interfaz de stock después del restablecimiento...');
                    window.mostrarStockActual();
                }


                // Mostrar confirmación de éxito
                setTimeout(() => {
                    Swal.fire({
                        title: '✅ Inventario Restablecido',
                        html: `
                            <div style="text-align: left;">
                                <p><strong>El inventario ha sido restablecido exitosamente.</strong></p>
                                <p>Se han eliminado todos los datos:</p>
                                <ul style="text-align: left; margin: 10px 0;">
                                    <li>📦 Inventario: Limpiado</li>
                                    <li>📋 Historial: Limpiado</li>
                                    <li>📊 Contadores: Reiniciados</li>
                                    <li>📅 Fechas de vencimiento: Eliminadas</li>
                                    <li>🏷️ Lotes: Eliminados</li>
                                    <li>💬 Comentarios del stock: Eliminados</li>
                                    <li>🔥 Firebase: Sincronizado</li>
                                </ul>
                                <p><strong>✅ Los cambios se han sincronizado en todos los dispositivos conectados.</strong></p>
                                <p style="color: #4caf50; font-weight: bold;">🎉 El sistema está listo para un nuevo inicio.</p>
                            </div>
                        `,
                        icon: 'success',
                        confirmButtonText: '✅ ENTENDIDO',
                        confirmButtonColor: '#4caf50'
                    }).then(() => {
                        // Limpiar formulario y volver al menú
                        limpiarFormularioRestablecer();
                        volverMenu();
                        
                        // Actualizar contadores en la interfaz si existen
                        actualizarContadoresInterfaz();
                        
                        // Actualizar la interfaz de stock una vez más para asegurar que esté limpia
                        if (window.mostrarStockActual) {
                            console.log('🔄 Actualizando interfaz de stock final...');
                            window.mostrarStockActual();
                        }
                    });
                }, 1000);

            } catch (error) {
                console.error('Error al restablecer inventario:', error);
                Swal.fire({
                    title: '❌ Error',
                    text: 'Ocurrió un error al restablecer el inventario. Por favor, intenta nuevamente.',
                    icon: 'error',
                    confirmButtonText: 'OK'
                });
            }
        }


        function actualizarContadoresInterfaz() {
            // Actualizar contadores en la interfaz si existen elementos
            const contadorEntradas = document.getElementById('contador-entradas');
            const contadorSalidas = document.getElementById('contador-salidas');
            const contadorDevoluciones = document.getElementById('contador-devoluciones');
            
            if (contadorEntradas) contadorEntradas.textContent = '0';
            if (contadorSalidas) contadorSalidas.textContent = '0';
            if (contadorDevoluciones) contadorDevoluciones.textContent = '0';
        }
        
        // FUNCIONES PARA GESTIONAR COMENTARIOS DEL STOCK
        function mostrarComentariosStock() {
            document.getElementById('seccion-comentarios-stock').style.display = 'block';
            cargarComentariosStock();
            inicializarAutocompletado('producto-comentario', 'sugerencias-producto-comentario');
        }
        
        function ocultarComentariosStock() {
            document.getElementById('seccion-comentarios-stock').style.display = 'none';
        }
        
        function agregarComentarioStock() {
            const producto = document.getElementById('producto-comentario').value.trim();
            const sede = document.getElementById('sede-comentario').value;
            const autor = document.getElementById('autor-comentario').value;
            const tipo = document.getElementById('tipo-comentario').value;
            const texto = document.getElementById('texto-comentario').value.trim();
            
            // Validaciones
            if (!producto) {
                mostrarMensaje('❌ Por favor, escribe el nombre del producto', 'error');
                return;
            }
            
            if (!sede) {
                mostrarMensaje('❌ Por favor, selecciona una sede', 'error');
                return;
            }
            
            if (!autor) {
                mostrarMensaje('❌ Por favor, selecciona el autor del comentario', 'error');
                return;
            }
            
            if (!texto) {
                mostrarMensaje('❌ Por favor, escribe el comentario', 'error');
                return;
            }
            
            // Crear comentario
            const comentario = {
                id: Date.now(),
                producto: producto,
                sede: sede,
                autor: autor,
                tipo: tipo,
                texto: texto,
                fecha: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date(),
                editado: false,
                fechaEdicion: null
            };
            
            // Agregar a la lista de comentarios
            const clave = `${producto}_${sede}`;
            if (!comentariosStock[clave]) {
                comentariosStock[clave] = [];
            }
            comentariosStock[clave].push(comentario);
            
            // Guardar datos
            guardarDatos();
            
            // Mostrar confirmación
            mostrarMensaje(`✅ Comentario agregado exitosamente\n\n📦 Producto: ${producto}\n🏢 Sede: ${sede}\n👤 Autor: ${autor}\n💬 Tipo: ${tipo}`, 'exito');
            
            // Limpiar formulario y recargar comentarios
            limpiarFormularioComentario();
            cargarComentariosStock();
            
            // Actualizar la vista del stock para mostrar el comentario
            mostrarStockActual();
        }
        
        function editarComentarioStock(idComentario, clave) {
            const comentario = comentariosStock[clave].find(c => c.id === idComentario);
            if (!comentario) return;
            
            Swal.fire({
                title: '✏️ EDITAR COMENTARIO',
                html: `
                    <div style="text-align: left;">
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: bold;">Producto:</label><br>
                            <span>${comentario.producto}</span>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: bold;">Sede:</label><br>
                            <span>${comentario.sede}</span>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: bold;">Autor:</label><br>
                            <span>${comentario.autor}</span>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: bold;">Tipo:</label><br>
                            <select id="edit-tipo-comentario" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                                <option value="general" ${comentario.tipo === 'general' ? 'selected' : ''}>📋 General</option>
                                <option value="urgente" ${comentario.tipo === 'urgente' ? 'selected' : ''}>🚨 Urgente</option>
                                <option value="informacion" ${comentario.tipo === 'informacion' ? 'selected' : ''}>ℹ️ Información</option>
                                <option value="advertencia" ${comentario.tipo === 'advertencia' ? 'selected' : ''}>⚠️ Advertencia</option>
                                <option value="recordatorio" ${comentario.tipo === 'recordatorio' ? 'selected' : ''}>🔔 Recordatorio</option>
                            </select>
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="font-weight: bold;">Comentario:</label><br>
                            <textarea id="edit-texto-comentario" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; min-height: 100px;" placeholder="Escribe tu comentario...">${comentario.texto}</textarea>
                        </div>
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: '💾 GUARDAR CAMBIOS',
                cancelButtonText: '❌ CANCELAR',
                confirmButtonColor: '#4CAF50',
                cancelButtonColor: '#f44336',
                width: '600px',
                preConfirm: () => {
                    const nuevoTipo = document.getElementById('edit-tipo-comentario').value;
                    const nuevoTexto = document.getElementById('edit-texto-comentario').value.trim();
                    
                    if (!nuevoTexto) {
                        Swal.showValidationMessage('El comentario no puede estar vacío');
                        return false;
                    }
                    return { tipo: nuevoTipo, texto: nuevoTexto };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // Actualizar comentario
                    comentario.tipo = result.value.tipo;
                    comentario.texto = result.value.texto;
                    comentario.editado = true;
                    comentario.fechaEdicion = new Date().toLocaleDateString('es-ES');
                    
                    // Guardar datos
                    guardarDatos();
                    
                    // Mostrar confirmación
                    mostrarMensaje('✅ Comentario actualizado exitosamente', 'exito');
                    
                    // Recargar comentarios
                    cargarComentariosStock();
                }
            });
        }
        
        function eliminarComentarioStock(idComentario, clave) {
            Swal.fire({
                title: '🗑️ ELIMINAR COMENTARIO',
                text: '¿Estás seguro de que quieres eliminar este comentario? Esta acción no se puede deshacer.',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: '🗑️ SÍ, ELIMINAR',
                cancelButtonText: '❌ CANCELAR',
                confirmButtonColor: '#f44336',
                cancelButtonColor: '#6c757d'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Eliminar comentario
                    const index = comentariosStock[clave].findIndex(c => c.id === idComentario);
                    if (index !== -1) {
                        comentariosStock[clave].splice(index, 1);
                        
                        // Si no hay más comentarios para este producto, eliminar la clave
                        if (comentariosStock[clave].length === 0) {
                            delete comentariosStock[clave];
                        }
                        
                        // Guardar datos
                        guardarDatos();
                        
                        // Mostrar confirmación
                        mostrarMensaje('✅ Comentario eliminado exitosamente', 'exito');
                        
                        // Recargar comentarios
                        cargarComentariosStock();
                    }
                }
            });
        }
        
        function cargarComentariosStock() {
            const container = document.getElementById('lista-comentarios-stock');
            
            if (Object.keys(comentariosStock).length === 0) {
                container.innerHTML = `
                    <div class="alert alert-info">
                        <h4>💬 No hay comentarios aún</h4>
                        <p>Los comentarios que agregues aparecerán aquí. Puedes usar esta función para:</p>
                        <ul>
                            <li>🚨 Marcar productos urgentes</li>
                            <li>⚠️ Dejar advertencias sobre productos</li>
                            <li>ℹ️ Compartir información importante</li>
                            <li>🔔 Dejar recordatorios para el equipo</li>
                        </ul>
                    </div>
                `;
                return;
            }
            
            let html = '<h4>📋 COMENTARIOS EXISTENTES</h4>';
            
            Object.keys(comentariosStock).forEach(clave => {
                const comentarios = comentariosStock[clave];
                const [producto, sede] = clave.split('_');
                
                html += `
                    <div class="stock-item" style="margin-bottom: 20px;">
                        <div class="stock-header">
                            <div class="stock-producto">📦 ${producto}</div>
                            <div class="stock-sede">🏢 ${sede}</div>
                        </div>
                        <div style="margin-top: 15px;">
                `;
                
                comentarios.forEach(comentario => {
                    const iconoTipo = {
                        'general': '📋',
                        'urgente': '🚨',
                        'informacion': 'ℹ️',
                        'advertencia': '⚠️',
                        'recordatorio': '🔔'
                    }[comentario.tipo] || '📋';
                    
                    const colorTipo = {
                        'general': '#6c757d',
                        'urgente': '#dc3545',
                        'informacion': '#17a2b8',
                        'advertencia': '#ffc107',
                        'recordatorio': '#28a745'
                    }[comentario.tipo] || '#6c757d';
                    
                    html += `
                        <div class="lote-item" style="margin-bottom: 10px; border-left: 4px solid ${colorTipo};">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <span style="font-size: 1.2em;">${iconoTipo}</span>
                                    <span style="font-weight: bold; color: ${colorTipo};">${comentario.tipo.toUpperCase()}</span>
                                </div>
                                <div style="display: flex; gap: 5px;">
                                    <button onclick="editarComentarioStock(${comentario.id}, '${clave}')" 
                                            style="background: #17a2b8; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">
                                        ✏️ Editar
                                    </button>
                                    <button onclick="eliminarComentarioStock(${comentario.id}, '${clave}')" 
                                            style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">
                                        🗑️ Eliminar
                                    </button>
                                </div>
                            </div>
                            <div style="margin-bottom: 8px; line-height: 1.5;">
                                ${comentario.texto.replace(/\n/g, '<br>')}
                            </div>
                            <div style="font-size: 0.9em; color: #666; display: flex; justify-content: space-between;">
                                <span>👤 ${comentario.autor}</span>
                                <span>📅 ${comentario.fecha}${comentario.editado ? ' (editado: ' + comentario.fechaEdicion + ')' : ''}</span>
                            </div>
                        </div>
                    `;
                });
                
                html += `
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function limpiarFormularioComentario() {
            document.getElementById('producto-comentario').value = '';
            document.getElementById('sede-comentario').value = '';
            document.getElementById('autor-comentario').value = '';
            document.getElementById('tipo-comentario').value = 'general';
            document.getElementById('texto-comentario').value = '';
        }
        
        // FUNCIONES PARA SELECCIÓN DE PRODUCTOS EN STOCK
        function seleccionarTodosProductos() {
            const checkboxes = document.querySelectorAll('.checkbox-producto');
            checkboxes.forEach(checkbox => {
                checkbox.checked = true;
            });
            actualizarBotonComentarios();
        }
        
        function deseleccionarTodosProductos() {
            const checkboxes = document.querySelectorAll('.checkbox-producto');
            checkboxes.forEach(checkbox => {
                checkbox.checked = false;
            });
            actualizarBotonComentarios();
        }
        
        function actualizarBotonComentarios() {
            const checkboxes = document.querySelectorAll('.checkbox-producto:checked');
            const boton = document.getElementById('btn-comentario-seleccionados');
            
            if (boton) {
                if (checkboxes.length > 0) {
                    boton.disabled = false;
                    boton.textContent = `💬 COMENTAR SELECCIONADOS (${checkboxes.length})`;
                } else {
                    boton.disabled = true;
                    boton.textContent = '💬 COMENTAR SELECCIONADOS';
                }
            }
        }
        
        function agregarComentarioProductosSeleccionados() {
            const checkboxes = document.querySelectorAll('.checkbox-producto:checked');
            
            if (checkboxes.length === 0) {
                mostrarMensaje('❌ Por favor, selecciona al menos un producto', 'error');
                return;
            }
            
            const productosSeleccionados = Array.from(checkboxes).map(checkbox => {
                const clave = checkbox.getAttribute('data-clave');
                const producto = inventario[clave];
                return {
                    clave: clave,
                    producto: producto.producto,
                    sede: producto.sede
                };
            });
            
            // Mostrar modal para agregar comentario a múltiples productos
            Swal.fire({
                title: '💬 AGREGAR COMENTARIO A PRODUCTOS SELECCIONADOS',
                html: `
                    <div style="text-align: left; margin-bottom: 20px;">
                        <h4>📦 Productos seleccionados (${productosSeleccionados.length}):</h4>
                        <ul style="max-height: 150px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 5px;">
                            ${productosSeleccionados.map(p => `<li>${p.producto} - ${p.sede}</li>`).join('')}
                        </ul>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="font-weight: bold;">Autor del comentario:</label><br>
                        <select id="autor-comentario-multiple" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">Selecciona el autor</option>
                            <option value="LOPEZ ZAPATA MARIA DEL PILAR">LOPEZ ZAPATA MARIA DEL PILAR</option>
                            <option value="CORREA ALVAREZ BRAYAN">CORREA ALVAREZ BRAYAN</option>
                            <option value="ARROYAVE JARAMILLO PAOLA ANDREA">ARROYAVE JARAMILLO PAOLA ANDREA</option>
                            <option value="GARCIA BOTERO YESICA JANETH">GARCIA BOTERO YESICA JANETH</option>
                            <option value="HINCAPIE POSADA MANUELA">HINCAPIE POSADA MANUELA</option>
                            <option value="LOPEZ CHALARCA STEFANY">LOPEZ CHALARCA STEFANY</option>
                            <option value="NARANJO HENAO MARIA ISABEL">NARANJO HENAO MARIA ISABEL</option>
                            <option value="TEJADA DELGADO CATERINNE ANDREA">TEJADA DELGADO CATERINNE ANDREA</option>
                            <option value="TORO AGUDELO TATIANA">TORO AGUDELO TATIANA</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="font-weight: bold;">Tipo de comentario:</label><br>
                        <select id="tipo-comentario-multiple" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="general">📋 General</option>
                            <option value="urgente">🚨 Urgente</option>
                            <option value="informacion">ℹ️ Información</option>
                            <option value="advertencia">⚠️ Advertencia</option>
                            <option value="recordatorio">🔔 Recordatorio</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: bold;">Comentario:</label><br>
                        <textarea id="texto-comentario-multiple" placeholder="Escribe tu comentario para todos los productos seleccionados..." 
                                  style="width: 100%; height: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                    </div>
                `,
                width: '600px',
                showCancelButton: true,
                confirmButtonText: '💬 AGREGAR COMENTARIO',
                cancelButtonText: '❌ CANCELAR',
                confirmButtonColor: '#4CAF50',
                cancelButtonColor: '#6c757d',
                preConfirm: () => {
                    const autor = document.getElementById('autor-comentario-multiple').value;
                    const tipo = document.getElementById('tipo-comentario-multiple').value;
                    const texto = document.getElementById('texto-comentario-multiple').value.trim();
                    
                    if (!autor) {
                        Swal.showValidationMessage('Por favor, selecciona un autor');
                        return false;
                    }
                    
                    if (!texto) {
                        Swal.showValidationMessage('Por favor, escribe un comentario');
                        return false;
                    }
                    
                    return { autor, tipo, texto };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const { autor, tipo, texto } = result.value;
                    let comentariosAgregados = 0;
                    
                    productosSeleccionados.forEach(({ clave, producto, sede }) => {
                        const comentario = {
                            id: Date.now() + Math.random(),
                            producto: producto,
                            sede: sede,
                            autor: autor,
                            tipo: tipo,
                            texto: texto,
                            fecha: new Date().toLocaleDateString('es-ES'),
                            timestamp: new Date(),
                            editado: false,
                            fechaEdicion: null
                        };
                        
                        if (!comentariosStock[clave]) {
                            comentariosStock[clave] = [];
                        }
                        comentariosStock[clave].push(comentario);
                        comentariosAgregados++;
                    });
                    
                    // Guardar datos
                    guardarDatos();
                    
                    // Mostrar confirmación
                    mostrarMensaje(`✅ Comentario agregado exitosamente a ${comentariosAgregados} productos\n\n👤 Autor: ${autor}\n💬 Tipo: ${tipo}`, 'exito');
                    
                    // Deseleccionar todos los productos
                    deseleccionarTodosProductos();
                    
                    // Actualizar la vista del stock para mostrar los comentarios
                    mostrarStockActual();
                }
            });
        }
        
        function agregarComentarioProducto(clave) {
            const producto = inventario[clave];
            if (!producto) return;
            
            // Mostrar modal para agregar comentario a un producto específico
            Swal.fire({
                title: '💬 AGREGAR COMENTARIO',
                html: `
                    <div style="text-align: left; margin-bottom: 20px;">
                        <h4>📦 Producto:</h4>
                        <p><strong>${producto.producto}</strong> - 🏢 ${producto.sede}</p>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="font-weight: bold;">Autor del comentario:</label><br>
                        <select id="autor-comentario-single" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="">Selecciona el autor</option>
                            <option value="LOPEZ ZAPATA MARIA DEL PILAR">LOPEZ ZAPATA MARIA DEL PILAR</option>
                            <option value="CORREA ALVAREZ BRAYAN">CORREA ALVAREZ BRAYAN</option>
                            <option value="ARROYAVE JARAMILLO PAOLA ANDREA">ARROYAVE JARAMILLO PAOLA ANDREA</option>
                            <option value="GARCIA BOTERO YESICA JANETH">GARCIA BOTERO YESICA JANETH</option>
                            <option value="HINCAPIE POSADA MANUELA">HINCAPIE POSADA MANUELA</option>
                            <option value="LOPEZ CHALARCA STEFANY">LOPEZ CHALARCA STEFANY</option>
                            <option value="NARANJO HENAO MARIA ISABEL">NARANJO HENAO MARIA ISABEL</option>
                            <option value="TEJADA DELGADO CATERINNE ANDREA">TEJADA DELGADO CATERINNE ANDREA</option>
                            <option value="TORO AGUDELO TATIANA">TORO AGUDELO TATIANA</option>
                        </select>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <label style="font-weight: bold;">Tipo de comentario:</label><br>
                        <select id="tipo-comentario-single" style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <option value="general">📋 General</option>
                            <option value="urgente">🚨 Urgente</option>
                            <option value="informacion">ℹ️ Información</option>
                            <option value="advertencia">⚠️ Advertencia</option>
                            <option value="recordatorio">🔔 Recordatorio</option>
                        </select>
                    </div>
                    <div>
                        <label style="font-weight: bold;">Comentario:</label><br>
                        <textarea id="texto-comentario-single" placeholder="Escribe tu comentario..." 
                                  style="width: 100%; height: 100px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; resize: vertical;"></textarea>
                    </div>
                `,
                width: '500px',
                showCancelButton: true,
                confirmButtonText: '💬 AGREGAR COMENTARIO',
                cancelButtonText: '❌ CANCELAR',
                confirmButtonColor: '#4CAF50',
                cancelButtonColor: '#6c757d',
                preConfirm: () => {
                    const autor = document.getElementById('autor-comentario-single').value;
                    const tipo = document.getElementById('tipo-comentario-single').value;
                    const texto = document.getElementById('texto-comentario-single').value.trim();
                    
                    if (!autor) {
                        Swal.showValidationMessage('Por favor, selecciona un autor');
                        return false;
                    }
                    
                    if (!texto) {
                        Swal.showValidationMessage('Por favor, escribe un comentario');
                        return false;
                    }
                    
                    return { autor, tipo, texto };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const { autor, tipo, texto } = result.value;
                    
                    const comentario = {
                        id: Date.now() + Math.random(),
                        producto: producto.producto,
                        sede: producto.sede,
                        autor: autor,
                        tipo: tipo,
                        texto: texto,
                        fecha: new Date().toLocaleDateString('es-ES'),
                        timestamp: new Date(),
                        editado: false,
                        fechaEdicion: null
                    };
                    
                    if (!comentariosStock[clave]) {
                        comentariosStock[clave] = [];
                    }
                    comentariosStock[clave].push(comentario);
                    
                    // Guardar datos
                    guardarDatos();
                    
                    // Mostrar confirmación
                    mostrarMensaje(`✅ Comentario agregado exitosamente\n\n📦 Producto: ${producto.producto}\n🏢 Sede: ${producto.sede}\n👤 Autor: ${autor}\n💬 Tipo: ${tipo}`, 'exito');
                    
                    // Actualizar la vista del stock para mostrar el comentario
                    mostrarStockActual();
                }
            });
        }
        
        function verComentariosProducto(clave) {
            const comentarios = comentariosStock[clave] || [];
            const producto = inventario[clave];
            
            if (!producto) return;
            
            if (comentarios.length === 0) {
                Swal.fire({
                    title: '💬 COMENTARIOS',
                    html: `
                        <div style="text-align: left;">
                            <h4>📦 ${producto.producto}</h4>
                            <p>🏢 ${producto.sede}</p>
                            <hr>
                            <p>No hay comentarios para este producto aún.</p>
                        </div>
                    `,
                    icon: 'info',
                    confirmButtonText: '✅ ENTENDIDO'
                });
                return;
            }
            
            let html = `
                <div style="text-align: left;">
                    <h4>📦 ${producto.producto}</h4>
                    <p>🏢 ${producto.sede}</p>
                    <hr>
                    <div style="max-height: 400px; overflow-y: auto;">
            `;
            
            comentarios.forEach(comentario => {
                const iconoTipo = {
                    'general': '📋',
                    'urgente': '🚨',
                    'informacion': 'ℹ️',
                    'advertencia': '⚠️',
                    'recordatorio': '🔔'
                }[comentario.tipo] || '📋';
                
                const colorTipo = {
                    'general': '#6c757d',
                    'urgente': '#dc3545',
                    'informacion': '#17a2b8',
                    'advertencia': '#ffc107',
                    'recordatorio': '#28a745'
                }[comentario.tipo] || '#6c757d';
                
                html += `
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid ${colorTipo};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 1.2em;">${iconoTipo}</span>
                                <span style="font-weight: bold; color: ${colorTipo};">${comentario.tipo.toUpperCase()}</span>
                            </div>
                            <div style="display: flex; gap: 5px;">
                                <button onclick="editarComentarioStock(${comentario.id}, '${clave}')" 
                                        style="background: #17a2b8; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">
                                    ✏️ Editar
                                </button>
                                <button onclick="eliminarComentarioStock(${comentario.id}, '${clave}')" 
                                        style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">
                                    🗑️ Eliminar
                                </button>
                            </div>
                        </div>
                        <div style="margin-bottom: 10px; line-height: 1.5;">
                            ${comentario.texto.replace(/\n/g, '<br>')}
                        </div>
                        <div style="font-size: 0.9em; color: #666; display: flex; justify-content: space-between;">
                            <span>👤 ${comentario.autor}</span>
                            <span>📅 ${comentario.fecha}${comentario.editado ? ' (editado: ' + comentario.fechaEdicion + ')' : ''}</span>
                        </div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                </div>
            `;
            
            Swal.fire({
                title: '💬 COMENTARIOS DEL PRODUCTO',
                html: html,
                width: '700px',
                showConfirmButton: true,
                confirmButtonText: '✅ CERRAR',
                showCancelButton: true,
                cancelButtonText: '💬 AGREGAR NUEVO',
                confirmButtonColor: '#4CAF50',
                cancelButtonColor: '#9c27b0'
            }).then((result) => {
                if (result.dismiss === Swal.DismissReason.cancel) {
                    agregarComentarioProducto(clave);
                }
            });
        }
        
        function mostrarComentariosProducto(clave) {
            const comentarios = comentariosStock[clave] || [];
            const [producto, sede] = clave.split('_');
            
            if (comentarios.length === 0) {
                mostrarMensaje('No hay comentarios para este producto', 'info');
                return;
            }
            
            let html = `
                <div style="text-align: left;">
                    <h3 style="margin-bottom: 20px; color: #9c27b0;">💬 COMENTARIOS PARA: ${producto}</h3>
                    <p style="margin-bottom: 15px; color: #666;">🏢 Sede: ${sede}</p>
            `;
            
            comentarios.forEach(comentario => {
                const iconoTipo = {
                    'general': '📋',
                    'urgente': '🚨',
                    'informacion': 'ℹ️',
                    'advertencia': '⚠️',
                    'recordatorio': '🔔'
                }[comentario.tipo] || '📋';
                
                const colorTipo = {
                    'general': '#6c757d',
                    'urgente': '#dc3545',
                    'informacion': '#17a2b8',
                    'advertencia': '#ffc107',
                    'recordatorio': '#28a745'
                }[comentario.tipo] || '#6c757d';
                
                html += `
                    <div style="border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 15px; border-left: 4px solid ${colorTipo};">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                            <div style="display: flex; align-items: center; gap: 8px;">
                                <span style="font-size: 1.2em;">${iconoTipo}</span>
                                <span style="font-weight: bold; color: ${colorTipo};">${comentario.tipo.toUpperCase()}</span>
                            </div>
                            <span style="font-size: 0.9em; color: #666;">📅 ${comentario.fecha}</span>
                        </div>
                        <div style="margin-bottom: 10px; line-height: 1.5;">
                            ${comentario.texto.replace(/\n/g, '<br>')}
                        </div>
                        <div style="font-size: 0.9em; color: #666;">
                            👤 <strong>${comentario.autor}</strong>${comentario.editado ? ' (editado: ' + comentario.fechaEdicion + ')' : ''}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            
            Swal.fire({
                title: '💬 Comentarios del Producto',
                html: html,
                width: '700px',
                confirmButtonText: '✅ CERRAR',
                confirmButtonColor: '#9c27b0'
            });
        }
        
        // FUNCIONES PARA SALIDAS MÚLTIPLES
        function agregarProductoSalida() {
            const producto = document.getElementById('producto-salida').value;
            const cantidad = parseInt(document.getElementById('cantidad-salida').value);
            const sede = document.getElementById('sede-salida').value;
            const sedeDestino = document.getElementById('sede-destino').value;
            const tipoUso = document.getElementById('tipo-uso').value;
            const responsable = document.getElementById('responsable-salida').value;
            const cupos = parseInt(document.getElementById('cupos-modalidad').value) || 0;
            
            console.log('🔍 DATOS CAPTURADOS DEL FORMULARIO:');
            console.log('  - Producto:', producto);
            console.log('  - Cantidad:', cantidad);
            console.log('  - Sede:', sede);
            console.log('  - Sede Destino:', sedeDestino);
            console.log('  - Tipo Uso:', tipoUso);
            console.log('  - Responsable:', responsable);
            console.log('  - Cupos:', cupos);
            
            // Validaciones
            if (!producto) {
                mostrarMensaje('❌ Por favor, selecciona un producto', 'error');
                return;
            }
            
            // Buscar la clave del producto en el inventario
            let claveProducto = null;
            console.log('🔍 Buscando producto:', producto, 'en sede:', sede);
            
            // Primero buscar coincidencia exacta
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                if (item.producto === producto && item.sede === sede) {
                    claveProducto = clave;
                    console.log('✅ Producto encontrado (coincidencia exacta) con clave:', clave);
                }
            });
            
            // Si no se encuentra coincidencia exacta, buscar coincidencia parcial
            if (!claveProducto) {
                console.log('🔍 Buscando coincidencia parcial...');
                Object.keys(inventario).forEach(clave => {
                    const item = inventario[clave];
                    if (item.sede === sede && item.producto.toLowerCase().includes(producto.toLowerCase())) {
                        claveProducto = clave;
                        console.log('✅ Producto encontrado (coincidencia parcial) con clave:', clave);
                        console.log('  - Producto en inventario:', item.producto);
                        console.log('  - Producto buscado:', producto);
                    }
                });
            }
            
            if (!claveProducto) {
                console.log('❌ Producto no encontrado. Productos disponibles en esta sede:');
                Object.keys(inventario).forEach(clave => {
                    const item = inventario[clave];
                    if (item.sede === sede) {
                        console.log('  -', item.producto);
                    }
                });
                mostrarMensaje('❌ Producto no encontrado en esta sede', 'error');
                return;
            }
            
            if (!cantidad || cantidad <= 0) {
                mostrarMensaje('❌ Por favor, ingresa una cantidad válida', 'error');
                return;
            }
            
            if (!sede) {
                mostrarMensaje('❌ Por favor, selecciona una sede', 'error');
                return;
            }
            
            if (!tipoUso) {
                mostrarMensaje('❌ Por favor, selecciona la modalidad', 'error');
                return;
            }
            
            // Validar responsable
            const validacionResponsable = validarResponsable(responsable);
            if (!validacionResponsable.valido) {
                mostrarMensaje(validacionResponsable.mensaje, 'error');
                return;
            }
            
            // Verificar que el producto no esté ya en la lista
            const productoExistente = productosSeleccionadosSalida.find(p => p.clave === claveProducto);
            if (productoExistente) {
                mostrarMensaje('❌ Este producto ya está en la lista. Puedes modificar la cantidad o eliminarlo.', 'error');
                return;
            }
            
            // Verificar stock disponible
            if (!inventario[claveProducto]) {
                mostrarMensaje('❌ Producto no encontrado en el inventario', 'error');
                return;
            }
            
            if (inventario[claveProducto].cantidad < cantidad) {
                mostrarMensaje(`❌ No hay suficiente stock disponible. Solo hay ${inventario[claveProducto].cantidad} unidades.`, 'error');
                return;
            }
            
            // Agregar producto a la lista
            const productoInfo = {
                clave: claveProducto,
                producto: inventario[claveProducto].producto,
                cantidad: cantidad,
                sede: sede,
                sedeDestino: sedeDestino,
                tipoUso: tipoUso,
                responsable: responsable,
                cupos: cupos,
                timestamp: Date.now()
            };
            
            console.log('📦 PRODUCTO INFO CREADO:');
            console.log('  - Clave:', productoInfo.clave);
            console.log('  - Producto:', productoInfo.producto);
            console.log('  - Cantidad:', productoInfo.cantidad);
            console.log('  - Sede:', productoInfo.sede);
            console.log('  - Sede Destino:', productoInfo.sedeDestino);
            console.log('  - Tipo Uso:', productoInfo.tipoUso);
            console.log('  - Responsable:', productoInfo.responsable);
            console.log('  - Cupos:', productoInfo.cupos);
            
            productosSeleccionadosSalida.push(productoInfo);
            
            console.log('📋 LISTA ACTUAL DE PRODUCTOS SELECCIONADOS:');
            console.log(productosSeleccionadosSalida);
            
            // Mostrar confirmación
            mostrarMensaje(`✅ Producto agregado a la lista\n\n📦 ${inventario[claveProducto].producto}\n🔢 Cantidad: ${cantidad} unidades\n🏢 Sede: ${sede}`, 'exito');
            
            // Actualizar interfaz
            actualizarListaProductosSalida();
            
            // Limpiar campos del producto
            document.getElementById('producto-salida').value = '';
            document.getElementById('cantidad-salida').value = '';
        }
        
        function actualizarListaProductosSalida() {
            const container = document.getElementById('productos-seleccionados');
            const listaContainer = document.getElementById('lista-productos-salida');
            
            if (productosSeleccionadosSalida.length === 0) {
                listaContainer.style.display = 'none';
                return;
            }
            
            listaContainer.style.display = 'block';
            
            let html = '';
            productosSeleccionadosSalida.forEach((item, index) => {
                html += `
                    <div class="producto-seleccionado" style="border: 1px solid #ddd; border-radius: 6px; padding: 12px; margin-bottom: 10px; background: #f8f9fa;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <div style="font-weight: bold; color: #2c3e50;">📦 ${item.producto}</div>
                            <button onclick="eliminarProductoSalida(${index})" style="background: #dc3545; color: white; border: none; padding: 4px 8px; border-radius: 4px; cursor: pointer; font-size: 12px;">
                                🗑️
                            </button>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; font-size: 0.9em; color: #666;">
                            <div>🔢 Cantidad: <strong>${item.cantidad}</strong></div>
                            <div>🏢 Sede: <strong>${item.sede}</strong></div>
                            <div>🍽️ Modalidad: <strong>${item.tipoUso}</strong></div>
                            <div>👤 Responsable: <strong>${item.responsable}</strong></div>
                            ${item.sedeDestino ? `<div>🎯 Destino: <strong>${item.sedeDestino}</div>` : ''}
                            ${item.cupos > 0 ? `<div>👥 Cupos: <strong>${item.cupos}</strong></div>` : ''}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function eliminarProductoSalida(index) {
            productosSeleccionadosSalida.splice(index, 1);
            actualizarListaProductosSalida();
            
            if (productosSeleccionadosSalida.length === 0) {
                document.getElementById('lista-productos-salida').style.display = 'none';
            }
        }
        
        function limpiarListaProductos() {
            productosSeleccionadosSalida = [];
            actualizarListaProductosSalida();
            document.getElementById('lista-productos-salida').style.display = 'none';
        }
        
        // FUNCIONES DE REGISTRO
        async function registrarEntrada() {
            const producto = document.getElementById('producto-entrada').value.trim();
            const cantidad = parseInt(document.getElementById('cantidad-entrada').value);
            const sede = document.getElementById('sede-entrada').value;
            const descripcion = document.getElementById('descripcion-entrada').value.trim();
            const modalidad = document.getElementById('modalidad-entrada').value;
            const fechaVencimiento = document.getElementById('fecha-vencimiento-entrada').value;
            const lote = document.getElementById('lote-entrada').value.trim();
            const fechaNoAplica = document.getElementById('fecha-no-aplica-entrada').checked;
            const loteNoAplica = document.getElementById('lote-no-aplica-entrada').checked;
            const responsable = document.getElementById('responsable-entrada').value;
            
            // Validaciones simples
            if (!producto) {
                mostrarMensaje('Por favor, escribe el nombre del producto', 'error');
                return;
            }
            
            if (!cantidad || cantidad <= 0) {
                mostrarMensaje('Por favor, escribe una cantidad válida', 'error');
                return;
            }
            
            if (!sede) {
                mostrarMensaje('Por favor, selecciona una sede', 'error');
                return;
            }
            
            // Validar responsable
            const validacionResponsable = validarResponsable(responsable);
            if (!validacionResponsable.valido) {
                mostrarMensaje(validacionResponsable.mensaje, 'error');
                return;
            }
            
            // Crear movimiento
            const movimiento = {
                id: Date.now(),
                producto: producto,
                cantidad: cantidad,
                tipo: 'entrada',
                sede: sede,
                descripcion: descripcion || 'Entrada de productos',
                modalidad: modalidad || 'No especificada',
                fecha: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date(),
                responsable: responsable,
                lote: lote || 'Sin lote',
                fechaVencimiento: fechaVencimiento || 'Sin fecha'
            };
            
            // Actualizar inventario
            const clave = `${producto}_${sede}`;
            if (!inventario[clave]) {
                inventario[clave] = {
                    producto: producto,
                    cantidad: 0,
                    sede: sede
                };
            }
            inventario[clave].cantidad += cantidad;
            
            // Manejar fecha de vencimiento y lote
            if (!fechaNoAplica && fechaVencimiento) {
                if (!fechasVencimiento[clave]) {
                    fechasVencimiento[clave] = [];
                }
                fechasVencimiento[clave].push({
                    fecha: fechaVencimiento,
                    cantidad: cantidad,
                    lote: lote || 'Sin lote',
                    fechaEntrada: new Date().toISOString()
                });
                
                // Sincronizar fechas de vencimiento con Firebase
                sincronizarLotesYFechasFirebase(clave);
            }
            
            if (!loteNoAplica && lote) {
                if (!lotes[clave]) {
                    lotes[clave] = [];
                }
                
                // Calcular días restantes si hay fecha de vencimiento
                let diasRestantes = null;
                if (fechaVencimiento && fechaVencimiento !== '') {
                    const fechaVenc = new Date(fechaVencimiento);
                    const hoy = new Date();
                    diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                }
                
                lotes[clave].push({
                    lote: lote,
                    cantidad: cantidad,
                    fechaVencimiento: fechaVencimiento || 'Sin fecha',
                    fecha: fechaVencimiento || 'Sin fecha', // Mantener compatibilidad
                    diasRestantes: diasRestantes,
                    fechaEntrada: new Date().toISOString()
                });
                
                // Sincronizar lotes y fechas de vencimiento con Firebase
                sincronizarLotesYFechasFirebase(clave);
            }
            
            // Agregar movimiento a Firebase
            try {
                await agregarMovimientoFirebase(movimiento);
                console.log('✅ Movimiento de entrada guardado en Firebase');
            } catch (error) {
                console.error('❌ Error guardando en Firebase:', error);
                mostrarMensaje('⚠️ El movimiento se guardó localmente pero hubo un error con Firebase', 'warning');
            }
            
            // Agregar al historial
            historial.push(movimiento);
            
            // Actualizar contadores
            contadores.entradas++;
            
            // Guardar datos
            guardarDatos();
            
            // Mostrar confirmación
            mostrarMensaje(`📥 Entrada registrada exitosamente\n\n📦 Producto: ${producto}\n🔢 Cantidad: ${cantidad} unidades\n🏢 Sede: ${sede}${modalidad ? '\n🍽️ Modalidad: ' + modalidad : ''}`, 'exito');
            
            // Limpiar formulario
            limpiarFormularioEntrada();
        }
        
        function registrarSalida() {
            console.log('🚀 REGISTRAR SALIDA - INICIANDO');
            console.log('📋 Productos en lista múltiple:', productosSeleccionadosSalida.length);
            console.log('📦 Lista completa:', productosSeleccionadosSalida);
            
            // Verificar si hay productos en la lista múltiple
            if (productosSeleccionadosSalida.length > 0) {
                console.log('🔄 Ejecutando salida múltiple');
                procesarSalidaMultiple();
                return;
            }
            
            console.log('🔄 Ejecutando salida individual');
            
            // Proceso de salida individual (código original)
            const producto = document.getElementById('producto-salida').value;
            const cantidad = parseInt(document.getElementById('cantidad-salida').value);
            const sede = document.getElementById('sede-salida').value;
            const sedeDestino = document.getElementById('sede-destino').value;
            const tipoUso = document.getElementById('tipo-uso').value;
            const responsable = document.getElementById('responsable-salida').value;
            
            // Validaciones básicas
            if (!producto || !cantidad || !sede) {
                mostrarMensaje('❌ Campos obligatorios incompletos\n\n📋 Por favor verifica:\n• Producto seleccionado\n• Cantidad ingresada\n• Sede seleccionada', 'error');
                return;
            }
            
            // Validar responsable
            const validacionResponsable = validarResponsable(responsable);
            if (!validacionResponsable.valido) {
                mostrarMensaje(validacionResponsable.mensaje, 'error');
                return;
            }
            
            // Validación específica para salidas de bodega
            if (sede === 'BODEGA CENTRAL' && !sedeDestino) {
                mostrarMensaje('❌ Sede destino requerida\n\n🏢 Al seleccionar "BODEGA CENTRAL" como sede origen, debes especificar la sede destino donde se enviará el producto.', 'error');
                return;
            }
            
            if (cantidad <= 0) {
                mostrarMensaje('❌ La cantidad debe ser mayor a 0', 'error');
                return;
            }
            
            // Buscar la clave del producto en el inventario
            let clave = null;
            console.log('🔍 Buscando producto en salida individual:', producto, 'en sede:', sede);
            
            // Buscar coincidencia exacta
            Object.keys(inventario).forEach(claveInventario => {
                const item = inventario[claveInventario];
                if (item.producto === producto && item.sede === sede) {
                    clave = claveInventario;
                    console.log('✅ Producto encontrado (coincidencia exacta) con clave:', clave);
                }
            });
            
            // Si no se encuentra coincidencia exacta, buscar coincidencia parcial
            if (!clave) {
                console.log('🔍 Buscando coincidencia parcial...');
                Object.keys(inventario).forEach(claveInventario => {
                    const item = inventario[claveInventario];
                    if (item.sede === sede && item.producto.toLowerCase().includes(producto.toLowerCase())) {
                        clave = claveInventario;
                        console.log('✅ Producto encontrado (coincidencia parcial) con clave:', clave);
                        console.log('  - Producto en inventario:', item.producto);
                        console.log('  - Producto buscado:', producto);
                    }
                });
            }
            
            if (!clave) {
                console.log('❌ Producto no encontrado. Productos disponibles en esta sede:');
                Object.keys(inventario).forEach(claveInventario => {
                    const item = inventario[claveInventario];
                    if (item.sede === sede) {
                        console.log('  -', item.producto);
                    }
                });
                mostrarMensaje('❌ Producto no encontrado en esta sede', 'error');
                return;
            }
            
            // Verificar stock disponible
            if (!inventario[clave]) {
                mostrarMensaje('❌ Producto no encontrado en el inventario', 'error');
                return;
            }
            
            // Verificar si hay información de vencimiento
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            if (fechas.length > 0 || lotesProducto.length > 0) {
                // Hay información de vencimiento, verificar stock en lotes
                const stockTotalLotes = calcularStockTotalLotes(fechas, lotesProducto);
                if (stockTotalLotes < cantidad) {
                    mostrarMensaje(`❌ No hay suficiente stock disponible. Solo hay ${stockTotalLotes} unidades en todos los lotes.`, 'error');
                    return;
                }
                // Mostrar selector de lotes
                mostrarSelectorLotes(clave, cantidad, sede, tipoUso);
            } else {
                // No hay información de lotes, verificar stock general
                if (inventario[clave].cantidad < cantidad) {
                    mostrarMensaje('❌ No hay suficiente stock disponible', 'error');
                    return;
                }
                // No hay información de vencimiento, confirmación simple
                Swal.fire({
                    title: '✅ Confirmar Salida',
                    text: `¿Confirmas la salida de ${cantidad} unidades de ${inventario[clave].producto}?`,
                    icon: 'question',
                    confirmButtonText: '✅ CONFIRMAR',
                    cancelButtonText: '❌ CANCELAR',
                    showCancelButton: true
                }).then((result) => {
                    if (result.isConfirmed) {
                        procesarSalida(clave, cantidad, sede, tipoUso);
                    }
                });
            }
        }
        
        function procesarSalidaMultiple() {
            console.log('🚀 PROCESANDO SALIDA MÚLTIPLE');
            console.log('📋 Productos seleccionados:', productosSeleccionadosSalida);
            
            // Verificar que todos los productos tengan la misma modalidad
            const modalidades = [...new Set(productosSeleccionadosSalida.map(p => p.tipoUso))];
            console.log('🍽️ Modalidades encontradas:', modalidades);
            if (modalidades.length > 1) {
                mostrarMensaje('❌ Todos los productos deben tener la misma modalidad para procesar la salida múltiple', 'error');
                return;
            }
            
            // Verificar que todos los productos tengan la misma sede
            const sedes = [...new Set(productosSeleccionadosSalida.map(p => p.sede))];
            console.log('🏢 Sedes encontradas:', sedes);
            if (sedes.length > 1) {
                mostrarMensaje('❌ Todos los productos deben tener la misma sede para procesar la salida múltiple', 'error');
                return;
            }
            
            // Verificar que todos los productos tengan el mismo responsable
            const responsables = [...new Set(productosSeleccionadosSalida.map(p => p.responsable))];
            console.log('👤 Responsables encontrados:', responsables);
            if (responsables.length > 1) {
                mostrarMensaje('❌ Todos los productos deben tener el mismo responsable para procesar la salida múltiple', 'error');
                return;
            }
            
            const modalidad = modalidades[0];
            const sede = sedes[0];
            const responsable = responsables[0];
            const sedeDestino = productosSeleccionadosSalida[0].sedeDestino;
            const cupos = productosSeleccionadosSalida[0].cupos;
            
            console.log('📊 DATOS FINALES PARA EL MODAL:');
            console.log('  - Modalidad:', modalidad);
            console.log('  - Sede:', sede);
            console.log('  - Responsable:', responsable);
            console.log('  - Sede Destino:', sedeDestino);
            console.log('  - Cupos:', cupos);
            
            // Mostrar resumen de la salida múltiple
            let html = `
                <div style="text-align: left;">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">📋 RESUMEN DE SALIDA MÚLTIPLE</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <p><strong>🍽️ Modalidad:</strong> ${modalidad}</p>
                        <p><strong>🏢 Sede:</strong> ${sede}</p>
                        <p><strong>👤 Responsable:</strong> ${responsable}</p>
                        ${sedeDestino ? `<p><strong>🎯 Sede Destino:</strong> ${sedeDestino}</p>` : ''}
                        ${cupos > 0 ? `<p><strong>👥 Cupos:</strong> ${cupos}</p>` : ''}
                    </div>
                    <h4 style="color: #e74c3c; margin-bottom: 15px;">📦 PRODUCTOS A PROCESAR:</h4>
            `;
            
            productosSeleccionadosSalida.forEach((item, index) => {
                html += `
                    <div style="border: 1px solid #ddd; border-radius: 6px; padding: 10px; margin-bottom: 10px; background: white;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-weight: bold;">${index + 1}. ${item.producto}</span>
                            <span style="color: #e74c3c; font-weight: bold;">${item.cantidad} unidades</span>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            
            Swal.fire({
                title: '🚀 PROCESAR SALIDA MÚLTIPLE',
                html: html,
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: '✅ PROCESAR SALIDA',
                cancelButtonText: '❌ CANCELAR',
                width: '700px',
                confirmButtonColor: '#28a745',
                cancelButtonColor: '#dc3545'
            }).then((result) => {
                if (result.isConfirmed) {
                    iniciarProcesamientoMultiple();
                }
            });
        }
        
        function iniciarProcesamientoMultiple() {
            // Mostrar indicador de progreso
            Swal.fire({
                title: '🔄 Procesando salida múltiple...',
                html: 'Por favor espera mientras se procesan todos los productos...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            // Procesar cada producto
            let productosProcesados = 0;
            let productosConError = [];
            
            productosSeleccionadosSalida.forEach((item, index) => {
                setTimeout(() => {
                    try {
                        // Verificar stock disponible
                        if (inventario[item.clave].cantidad >= item.cantidad) {
                            // Procesar salida
                            procesarSalidaMultipleProducto(item);
                            productosProcesados++;
                        } else {
                            productosConError.push({
                                producto: item.producto,
                                error: 'Stock insuficiente'
                            });
                        }
                        
                        // Verificar si se completó el procesamiento
                        if (productosProcesados + productosConError.length === productosSeleccionadosSalida.length) {
                            finalizarProcesamientoMultiple(productosProcesados, productosConError);
                        }
                    } catch (error) {
                        productosConError.push({
                            producto: item.producto,
                            error: error.message
                        });
                        
                        if (productosProcesados + productosConError.length === productosSeleccionadosSalida.length) {
                            finalizarProcesamientoMultiple(productosProcesados, productosConError);
                        }
                    }
                }, index * 500); // Procesar cada producto con un pequeño delay
            });
        }
        
        function procesarSalidaMultipleProducto(item) {
            // Actualizar inventario
            inventario[item.clave].cantidad -= item.cantidad;
            
            // Crear movimiento
            const movimiento = {
                id: Date.now() + Math.random(),
                producto: item.producto,
                cantidad: item.cantidad,
                tipo: 'salida',
                sede: item.sede,
                descripcion: `Salida múltiple - ${item.tipoUso}`,
                modalidad: item.tipoUso,
                fecha: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date(),
                responsable: item.responsable,
                sedeDestino: item.sedeDestino || null,
                cupos: item.cupos || 0,
                salidaMultiple: true,
                grupoSalida: Date.now() // ID único para agrupar salidas múltiples
            };
            
            // Agregar al historial
            historial.push(movimiento);
            
            // Actualizar contadores
            contadores.salidas++;
        }
        
        function finalizarProcesamientoMultiple(productosProcesados, productosConError) {
            Swal.close();
            
            // Primero mostrar confirmación de éxito
            let mensaje = `✅ Salida múltiple procesada exitosamente\n\n📊 Resumen:\n• Productos procesados: ${productosProcesados}`;
            
            if (productosConError.length > 0) {
                mensaje += `\n• Productos con error: ${productosConError.length}`;
                mensaje += '\n\n❌ Errores encontrados:';
                productosConError.forEach(error => {
                    mensaje += `\n• ${error.producto}: ${error.error}`;
                });
            }
            
            // Mostrar confirmación de éxito primero
            Swal.fire({
                title: '🎉 SALIDA MÚLTIPLE EXITOSA',
                text: mensaje,
                icon: 'success',
                confirmButtonText: '✅ CONTINUAR',
                confirmButtonColor: '#28a745'
            }).then(() => {
                // DESPUÉS de mostrar el éxito, preguntar si terminó el registro
                Swal.fire({
                    title: '🎯 REGISTRO COMPLETADO',
                    text: '¿Terminó el registro para esta modalidad?',
                    icon: 'question',
                    showCancelButton: true,
                    confirmButtonText: '✅ SÍ, TERMINÓ',
                    cancelButtonText: '❌ NO, CONTINUAR',
                    confirmButtonColor: '#28a745',
                    cancelButtonColor: '#6c757d'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Preguntar por cupos si no se especificaron
                        const cupos = productosSeleccionadosSalida[0].cupos;
                        if (!cupos || cupos === 0) {
                            Swal.fire({
                                title: '👥 REGISTRAR CUPOS',
                                text: '¿Cuántos cupos se registraron para esta modalidad?',
                                input: 'number',
                                inputPlaceholder: 'Ejemplo: 150',
                                inputMin: 1,
                                showCancelButton: true,
                                confirmButtonText: '💾 GUARDAR CUPOS',
                                cancelButtonText: '❌ NO APLICA',
                                confirmButtonColor: '#28a745',
                                cancelButtonColor: '#6c757d'
                            }).then((cuposResult) => {
                                if (cuposResult.isConfirmed && cuposResult.value) {
                                    actualizarCuposEnHistorial(cuposResult.value);
                                }
                                mostrarResumenFinal(productosProcesados, productosConError);
                            });
                        } else {
                            mostrarResumenFinal(productosProcesados, productosConError);
                        }
                    } else {
                        // Continuar con más productos
                        mostrarMensaje('🔄 Puedes continuar agregando más productos a la lista', 'info');
                    }
                });
            });
        }
        
        function actualizarCuposEnHistorial(cupos) {
            // Actualizar cupos en todos los movimientos del grupo
            const grupoId = Date.now() - 1000; // Aproximar el ID del grupo
            historial.forEach(mov => {
                if (mov.salidaMultiple && mov.grupoSalida === grupoId) {
                    mov.cupos = parseInt(cupos);
                }
            });
            
            // Guardar datos
            guardarDatos();
        }
        
        function mostrarResumenFinal(productosProcesados, productosConError) {
            const cupos = productosSeleccionadosSalida[0].cupos;
            const modalidad = productosSeleccionadosSalida[0].tipoUso;
            
            let html = `
                <div style="text-align: left;">
                    <h3 style="color: #28a745; margin-bottom: 20px;">🎉 SALIDA MÚLTIPLE COMPLETADA</h3>
                    <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <p><strong>🍽️ Modalidad:</strong> ${modalidad}</p>
                        <p><strong>✅ Productos procesados:</strong> ${productosProcesados}</p>
                        ${cupos > 0 ? `<p><strong>👥 Cupos registrados:</strong> ${cupos}</p>` : ''}
                    </div>
            `;
            
            if (productosConError.length > 0) {
                html += `
                    <div style="background: #f8d7da; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <h4 style="color: #721c24;">⚠️ PRODUCTOS CON ERROR:</h4>
                        ${productosConError.map(error => `<p>• ${error.producto}: ${error.error}</p>`).join('')}
                    </div>
                `;
            }
            
            html += '</div>';
            
            Swal.fire({
                title: '📋 RESUMEN FINAL',
                html: html,
                icon: 'success',
                confirmButtonText: '✅ ENTENDIDO',
                confirmButtonColor: '#28a745',
                width: '700px'
            }).then(() => {
                // Limpiar lista y formularios
                limpiarListaProductos();
                limpiarFormularioSalida();
                
                // Recargar stock
                cargarStock();
            });
        }
        
        function procesarSalidaConLote(clave, cantidad, sede, tipoUso, loteSeleccionado) {
            const sedeDestino = document.getElementById('sede-destino').value;
            const responsable = document.getElementById('responsable-salida').value;
            
            // Crear movimiento con información del lote
            const movimiento = {
                id: Date.now(),
                producto: inventario[clave].producto,
                cantidad: cantidad,
                tipo: 'salida',
                sede: sede,
                descripcion: tipoUso || 'Salida de productos',
                modalidad: tipoUso || 'No especificada',
                fecha: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date(),
                lote: loteSeleccionado.lote,
                fechaVencimiento: loteSeleccionado.fecha,
                diasRestantes: loteSeleccionado.diasRestantes,
                sedeDestino: sedeDestino || null,
                responsable: responsable
            };
            
            // Agregar movimiento al historial
            historial.push(movimiento);
            
            // Actualizar inventario origen
            console.log('📦 ACTUALIZANDO INVENTARIO:');
            console.log('  - Clave:', clave);
            console.log('  - Producto:', inventario[clave].producto);
            console.log('  - Cantidad antes:', inventario[clave].cantidad);
            console.log('  - Cantidad a restar:', cantidad);
            
            inventario[clave].cantidad -= cantidad;
            
            console.log('  - Cantidad después:', inventario[clave].cantidad);
            
            // Actualizar la cantidad del lote específico
            actualizarCantidadLote(clave, loteSeleccionado, cantidad);
            
            // Si la cantidad llega a 0, eliminar del inventario
            if (inventario[clave].cantidad <= 0) {
                console.log('🗑️ Eliminando producto del inventario (cantidad = 0)');
                delete inventario[clave];
            }
            
            // Si es salida de bodega, sumar stock a la sede destino
            // EXCEPTO para PAQUETES y CLEI que van al usuario final
            if (sede === 'BODEGA CENTRAL' && sedeDestino && sedeDestino !== 'PAQUETES' && sedeDestino !== 'CLEI') {
                const claveDestino = `${inventario[clave]?.producto || clave.split('_')[0]}_${sedeDestino}`;
                
                if (!inventario[claveDestino]) {
                    inventario[claveDestino] = {
                        producto: inventario[clave]?.producto || clave.split('_')[0],
                        cantidad: 0,
                        sede: sedeDestino
                    };
                }
                
                inventario[claveDestino].cantidad += cantidad;
                
                // Crear movimiento de entrada para la sede destino
                const movimientoEntrada = {
                    id: Date.now() + 1,
                    producto: inventario[clave]?.producto || clave.split('_')[0],
                    cantidad: cantidad,
                    tipo: 'entrada',
                    sede: sedeDestino,
                    descripcion: `Entrada desde ${sede} - Lote: ${loteSeleccionado.lote}`,
                    modalidad: tipoUso || 'No especificada',
                    fecha: new Date().toLocaleDateString('es-ES'),
                    timestamp: new Date()
                };
                
                historial.push(movimientoEntrada);
                contadores.entradas++;
            } else if (sede === 'BODEGA CENTRAL' && (sedeDestino === 'PAQUETES' || sedeDestino === 'CLEI')) {
                console.log(`📦 Salida para usuario final (${sedeDestino}): Solo se resta de bodega, no se suma a ninguna sede`);
            }
            
            // Actualizar contadores
            contadores.salidas++;
            
            // Guardar datos
            guardarDatos();
            
            // Mostrar confirmación con información del lote
            const icono = loteSeleccionado.prioridad === 'alta' ? '🔴' : loteSeleccionado.prioridad === 'media' ? '🟡' : '🟢';
            const prioridad = loteSeleccionado.prioridad === 'alta' ? 'URGENTE' : loteSeleccionado.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
            let mensaje = `📤 Salida con lote registrada exitosamente\n\n📦 Producto: ${inventario[clave]?.producto || clave.split('_')[0]}\n🔢 Cantidad: ${cantidad} unidades\n🏢 Sede origen: ${sede}\n📋 Lote: ${loteSeleccionado.lote}\n⏰ Vence en: ${loteSeleccionado.diasRestantes} días (${prioridad})`;
            if (sede === 'BODEGA CENTRAL' && sedeDestino) {
                mensaje += `\n🎯 Sede destino: ${sedeDestino}`;
            }
            if (tipoUso) {
                mensaje += `\n🍽️ Modalidad: ${tipoUso}`;
            }
            mostrarMensaje(mensaje, 'exito');
            
            // Limpiar formulario
            limpiarFormularioSalida();
        }
        
        function calcularStockTotalLotes(fechas, lotesProducto) {
            let stockTotal = 0;
            const lotesProcesados = new Set(); // Para evitar duplicados
            
            // Sumar stock de fechas de vencimiento
            fechas.forEach(item => {
                const loteKey = `${item.lote}_${item.fecha}`;
                if (!lotesProcesados.has(loteKey)) {
                    stockTotal += item.cantidad || 0;
                    lotesProcesados.add(loteKey);
                }
            });
            
            // Sumar stock de lotes (solo si no están ya procesados)
            lotesProducto.forEach(item => {
                const loteKey = `${item.lote}_${item.fechaVencimiento}`;
                if (!lotesProcesados.has(loteKey)) {
                    stockTotal += item.cantidad || 0;
                    lotesProcesados.add(loteKey);
                }
            });
            
            return stockTotal;
        }
        
        function actualizarCantidadLote(clave, loteSeleccionado, cantidadSacada) {
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            // Buscar y actualizar en fechas de vencimiento
            const fechaIndex = fechas.findIndex(item => item.lote === loteSeleccionado.lote && item.fecha === loteSeleccionado.fecha);
            if (fechaIndex !== -1) {
                fechas[fechaIndex].cantidad -= cantidadSacada;
                if (fechas[fechaIndex].cantidad <= 0) {
                    fechas.splice(fechaIndex, 1);
                }
                fechasVencimiento[clave] = fechas;
            }
            
            // Buscar y actualizar en lotes
            const loteIndex = lotesProducto.findIndex(item => item.lote === loteSeleccionado.lote && item.fechaVencimiento === loteSeleccionado.fecha);
            if (loteIndex !== -1) {
                lotesProducto[loteIndex].cantidad -= cantidadSacada;
                if (lotesProducto[loteIndex].cantidad <= 0) {
                    lotesProducto.splice(loteIndex, 1);
                }
                lotes[clave] = lotesProducto;
            }
        }
        
        async function procesarSalida(clave, cantidad, sede, tipoUso) {
            const sedeDestino = document.getElementById('sede-destino').value;
            const responsable = document.getElementById('responsable-salida').value;
            
            // Crear movimiento
            const movimiento = {
                id: Date.now(),
                producto: inventario[clave].producto,
                cantidad: cantidad,
                tipo: 'salida',
                sede: sede,
                descripcion: tipoUso || 'Salida de productos',
                modalidad: tipoUso || 'No especificada',
                fecha: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date(),
                sedeDestino: sedeDestino || null,
                responsable: responsable
            };
            
            try {
                // Agregar movimiento a Firebase
                await agregarMovimientoFirebase(movimiento);
                
                // Agregar movimiento al historial local también
                historial.push(movimiento);
                
                // Actualizar inventario origen
                inventario[clave].cantidad -= cantidad;
                
                // Si la cantidad llega a 0, eliminar del inventario
                if (inventario[clave].cantidad <= 0) {
                    delete inventario[clave];
                }
                
                // Si es salida de bodega, sumar stock a la sede destino
                // EXCEPTO para PAQUETES y CLEI que van al usuario final
                if (sede === 'BODEGA CENTRAL' && sedeDestino && sedeDestino !== 'PAQUETES' && sedeDestino !== 'CLEI') {
                    const claveDestino = `${inventario[clave]?.producto || clave.split('_')[0]}_${sedeDestino}`;
                    
                    if (!inventario[claveDestino]) {
                        inventario[claveDestino] = {
                            producto: inventario[clave]?.producto || clave.split('_')[0],
                            cantidad: 0,
                            sede: sedeDestino
                        };
                    }
                    
                    inventario[claveDestino].cantidad += cantidad;
                    
                    // Crear movimiento de entrada para la sede destino
                    const movimientoEntrada = {
                        id: Date.now() + 1,
                        producto: inventario[clave]?.producto || clave.split('_')[0],
                        cantidad: cantidad,
                        tipo: 'entrada',
                        sede: sedeDestino,
                        descripcion: `Entrada desde ${sede}`,
                        modalidad: tipoUso || 'No especificada',
                        fecha: new Date().toLocaleDateString('es-ES'),
                        timestamp: new Date()
                    };
                    
                    // Agregar movimiento de entrada a Firebase
                    await agregarMovimientoFirebase(movimientoEntrada);
                    historial.push(movimientoEntrada);
                    contadores.entradas++;
                } else if (sede === 'BODEGA CENTRAL' && (sedeDestino === 'PAQUETES' || sedeDestino === 'CLEI')) {
                    console.log(`📦 Salida para usuario final (${sedeDestino}): Solo se resta de bodega, no se suma a ninguna sede`);
                }
                
                // Actualizar contadores
                contadores.salidas++;
                
                // Guardar datos
                guardarDatos();
                
            } catch (error) {
                console.error('Error guardando movimiento en Firebase:', error);
                mostrarMensaje('Error al guardar el movimiento. Los datos se guardaron localmente.', 'error');
            }
            
            // Mostrar confirmación
            let mensaje = `📤 Salida registrada exitosamente\n\n📦 Producto: ${inventario[clave]?.producto || clave.split('_')[0]}\n🔢 Cantidad: ${cantidad} unidades\n🏢 Sede origen: ${sede}`;
            if (sede === 'BODEGA CENTRAL' && sedeDestino) {
                mensaje += `\n🎯 Sede destino: ${sedeDestino}`;
            }
            if (tipoUso) {
                mensaje += `\n🍽️ Modalidad: ${tipoUso}`;
            }
            mostrarMensaje(mensaje, 'exito');
            
            // Limpiar formulario
            limpiarFormularioSalida();
        }
        
        function registrarDevolucion() {
            const producto = document.getElementById('producto-devolucion').value.trim();
            const cantidad = parseInt(document.getElementById('cantidad-devolucion').value);
            const sede = document.getElementById('sede-devolucion').value;
            const motivoSelect = document.getElementById('motivo-devolucion').value;
            const motivoOtro = document.getElementById('motivo-otro-devolucion').value.trim();
            const motivo = motivoSelect === 'Otro' ? motivoOtro : motivoSelect;
            const modalidad = document.getElementById('modalidad-devolucion').value;
            const responsable = document.getElementById('responsable-devolucion').value;
            
            console.log('🔄 REGISTRAR DEVOLUCIÓN - INICIANDO');
            console.log('📋 Datos capturados:');
            console.log('  - Producto:', producto);
            console.log('  - Cantidad:', cantidad);
            console.log('  - Sede:', sede);
            console.log('  - Motivo:', motivo);
            console.log('  - Modalidad:', modalidad);
            console.log('  - Responsable:', responsable);
            
            // Validaciones
            if (!producto) {
                mostrarMensaje('Por favor, escribe el nombre del producto', 'error');
                return;
            }
            
            if (!cantidad || cantidad <= 0) {
                mostrarMensaje('Por favor, escribe una cantidad válida', 'error');
                return;
            }
            
            if (!sede) {
                mostrarMensaje('Por favor, selecciona una sede', 'error');
                return;
            }
            
            // Validar responsable
            const validacionResponsable = validarResponsable(responsable);
            if (!validacionResponsable.valido) {
                mostrarMensaje(validacionResponsable.mensaje, 'error');
                return;
            }
            
            if (!motivoSelect) {
                mostrarMensaje('Por favor, selecciona el motivo de la devolución', 'error');
                return;
            }
            
            if (motivoSelect === 'Otro' && !motivoOtro) {
                mostrarMensaje('Por favor, especifica el motivo de la devolución', 'error');
                return;
            }
            
            // Buscar la clave del producto en el inventario
            let clave = null;
            console.log('🔍 Buscando producto en devolución:', producto, 'en sede:', sede);
            
            // Buscar coincidencia exacta
            Object.keys(inventario).forEach(claveInventario => {
                const item = inventario[claveInventario];
                if (item.producto === producto && item.sede === sede) {
                    clave = claveInventario;
                    console.log('✅ Producto encontrado (coincidencia exacta) con clave:', clave);
                }
            });
            
            // Si no se encuentra coincidencia exacta, buscar coincidencia parcial
            if (!clave) {
                console.log('🔍 Buscando coincidencia parcial...');
                Object.keys(inventario).forEach(claveInventario => {
                    const item = inventario[claveInventario];
                    if (item.sede === sede && item.producto.toLowerCase().includes(producto.toLowerCase())) {
                        clave = claveInventario;
                        console.log('✅ Producto encontrado (coincidencia parcial) con clave:', clave);
                        console.log('  - Producto en inventario:', item.producto);
                        console.log('  - Producto buscado:', producto);
                    }
                });
            }
            
            if (!clave) {
                console.log('❌ Producto no encontrado. Productos disponibles en esta sede:');
                Object.keys(inventario).forEach(claveInventario => {
                    const item = inventario[claveInventario];
                    if (item.sede === sede) {
                        console.log('  -', item.producto);
                    }
                });
                mostrarMensaje('❌ Producto no encontrado en esta sede', 'error');
                return;
            }
            
            // Verificar stock disponible
            if (!inventario[clave]) {
                mostrarMensaje('❌ Producto no encontrado en el inventario', 'error');
                return;
            }
            
            if (inventario[clave].cantidad < cantidad) {
                mostrarMensaje(`❌ No hay suficiente stock disponible. Solo hay ${inventario[clave].cantidad} unidades.`, 'error');
                return;
            }
            
            // Procesar la devolución
            procesarDevolucion(clave, cantidad, sede, motivo, modalidad, responsable);
        }
        
        // Función para procesar la devolución
        async function procesarDevolucion(clave, cantidad, sede, motivo, modalidad, responsable) {
            console.log('🔄 PROCESANDO DEVOLUCIÓN');
            console.log('📦 Datos de la devolución:');
            console.log('  - Clave:', clave);
            console.log('  - Producto:', inventario[clave].producto);
            console.log('  - Cantidad:', cantidad);
            console.log('  - Sede origen:', sede);
            console.log('  - Motivo:', motivo);
            console.log('  - Modalidad:', modalidad);
            console.log('  - Responsable:', responsable);
            
            // Crear movimiento de devolución
            const movimiento = {
                id: Date.now(),
                producto: inventario[clave].producto,
                cantidad: cantidad,
                tipo: 'devolucion',
                sede: sede,
                descripcion: `Devolución: ${motivo}`,
                modalidad: modalidad || 'No especificada',
                fecha: new Date().toLocaleDateString('es-ES'),
                timestamp: new Date(),
                motivo: motivo,
                responsable: responsable
            };
            
            // Agregar movimiento a Firebase
            try {
                await agregarMovimientoFirebase(movimiento);
                console.log('✅ Movimiento de devolución guardado en Firebase');
            } catch (error) {
                console.error('❌ Error guardando devolución en Firebase:', error);
                mostrarMensaje('⚠️ La devolución se guardó localmente pero hubo un error con Firebase', 'warning');
            }
            
            // Agregar movimiento al historial
            historial.push(movimiento);
            
            // Actualizar inventario: restar de la sede
            console.log('📦 ACTUALIZANDO INVENTARIO:');
            console.log('  - Cantidad antes en sede:', inventario[clave].cantidad);
            
            inventario[clave].cantidad -= cantidad;
            
            console.log('  - Cantidad después en sede:', inventario[clave].cantidad);
            
            // Si la cantidad llega a 0, eliminar del inventario de la sede
            if (inventario[clave].cantidad <= 0) {
                console.log('🗑️ Eliminando producto del inventario de la sede (cantidad = 0)');
                delete inventario[clave];
            }
            
            // Agregar a la bodega principal
            const claveBodega = `${inventario[clave]?.producto || clave.split('_')[0]}_BODEGA CENTRAL`;
            
            if (inventario[claveBodega]) {
                // Si ya existe en bodega, sumar la cantidad
                inventario[claveBodega].cantidad += cantidad;
                console.log('📦 Producto existente en bodega, cantidad actualizada:', inventario[claveBodega].cantidad);
            } else {
                // Si no existe en bodega, crear nuevo registro
                inventario[claveBodega] = {
                    producto: inventario[clave]?.producto || clave.split('_')[0],
                    cantidad: cantidad,
                    sede: 'BODEGA CENTRAL',
                    categoria: inventario[clave]?.categoria || 'Sin categoría',
                    fechaEntrada: new Date().toISOString()
                };
                console.log('📦 Nuevo producto creado en bodega:', claveBodega);
            }
            
            // Actualizar contadores
            contadores.devoluciones++;
            
            // Guardar datos
            guardarDatos();
            
            // Mostrar confirmación
            const mensaje = `↩️ Devolución registrada exitosamente\n\n📦 Producto: ${movimiento.producto}\n🔢 Cantidad: ${cantidad} unidades\n🏢 De: ${sede}\n🏢 A: BODEGA CENTRAL\n📝 Motivo: ${motivo}`;
            mostrarMensaje(mensaje, 'exito');
            
            // Limpiar formulario
            limpiarFormularioDevolucion();
            
            // Recargar stock
            cargarStock();
        }
        

        
        // Función de prueba simple
        function pruebaSimple() {
            Swal.fire({
                title: '🧪 Prueba Exitosa',
                text: 'Función de prueba ejecutada correctamente',
                icon: 'success',
                confirmButtonText: 'OK',
                confirmButtonColor: '#4CAF50'
            });
            
            const container = document.getElementById('tabla-stock-container');
            if (container) {
                container.innerHTML = '<div class="mensaje-info">🧪 PRUEBA EXITOSA - Container encontrado</div>';
            } else {
                Swal.fire({
                    title: '❌ Error',
                    text: 'Container no encontrado',
                    icon: 'error',
                    confirmButtonText: 'OK',
                    confirmButtonColor: '#FF6B35'
                });
            }
        }
        
        // Función para debug del inventario
        function debugInventario() {
            console.log('🔍 === DEBUG COMPLETO DEL INVENTARIO ===');
            console.log('📦 Variable inventario:', inventario);
            console.log('🔢 Tamaño del inventario:', Object.keys(inventario).length);
            console.log('📜 Variable historial:', historial);
            console.log('🔢 Tamaño del historial:', historial.length);
            console.log('💾 localStorage disponible:', localStorage.getItem('paeDigitalData') ? 'SÍ' : 'NO');
            
            if (localStorage.getItem('paeDigitalData')) {
                try {
                    const datos = JSON.parse(localStorage.getItem('paeDigitalData'));
                    console.log('📋 Datos del localStorage:', datos);
                    console.log('📦 Inventario del localStorage:', datos.inventario);
                    console.log('🔢 Tamaño del inventario del localStorage:', Object.keys(datos.inventario || {}).length);
                } catch (error) {
                    console.error('❌ Error parseando localStorage:', error);
                }
            }
            
            // Mostrar en pantalla
            let mensaje = '🔍 DEBUG DEL INVENTARIO:\n\n';
            mensaje += `📦 Inventario: ${Object.keys(inventario).length} productos\n`;
            mensaje += `📜 Historial: ${historial.length} movimientos\n`;
            mensaje += `💾 localStorage: ${localStorage.getItem('paeDigitalData') ? 'Disponible' : 'No disponible'}\n\n`;
            
            if (Object.keys(inventario).length > 0) {
                mensaje += '📋 PRODUCTOS EN INVENTARIO:\n';
                Object.entries(inventario).forEach(([clave, producto], index) => {
                    mensaje += `${index + 1}. ${clave} → ${producto.cantidad} unidades en ${producto.sede}\n`;
                });
            } else {
                mensaje += '⚠️ NO HAY PRODUCTOS EN EL INVENTARIO\n';
            }
            
            // Mostrar en pantalla
            Swal.fire({
                title: '🔍 DEBUG DEL INVENTARIO',
                text: mensaje,
                icon: 'info',
                confirmButtonText: '✅ ENTENDIDO',
                width: '800px'
            });
        }
        
        // Función para mostrar stock filtrado por sede
        function mostrarStockPorSede() {
            const filtroSede = document.getElementById('filtro-sede-stock').value;
            
            // Filtrar inventario por sede si hay filtro y excluir productos con stock en 0
            let inventarioFiltrado = {};
            if (filtroSede) {
                Object.keys(inventario).forEach(clave => {
                    if (inventario[clave].sede === filtroSede && inventario[clave].cantidad > 0) {
                        inventarioFiltrado[clave] = inventario[clave];
                    }
                });
            } else {
                Object.keys(inventario).forEach(clave => {
                    if (inventario[clave].cantidad > 0) {
                        inventarioFiltrado[clave] = inventario[clave];
                    }
                });
            }
            
            // Mostrar tabla
            const container = document.getElementById('tabla-stock-container');
            
            if (Object.keys(inventarioFiltrado).length === 0) {
                container.innerHTML = '<div class="mensaje-info">No hay productos en el inventario para mostrar</div>';
                return;
            }
            
            let tabla = `
                <table class="tabla-stock">
                    <thead>
                        <tr>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Sede</th>
                            <th>Stock Mínimo</th>
                            <th>Estado</th>
                            <th>Última Actualización</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Filtrar productos con stock mayor a 0 y ordenar por cantidad (de mayor a menor)
            const productosOrdenados = Object.entries(inventarioFiltrado)
                .filter(([, producto]) => producto.cantidad > 0)
                .sort(([,a], [,b]) => b.cantidad - a.cantidad);
            
            productosOrdenados.forEach(([clave, producto], index) => {
                // Determinar estado del stock
                let estado = '';
                let colorEstado = '';
                
                if (producto.cantidad === 0) {
                    estado = '❌ Agotado';
                    colorEstado = 'background-color: #f8d7da; color: #721c24;';
                } else if (producto.cantidad <= 10) {
                    estado = '⚠️ Bajo';
                    colorEstado = 'background-color: #fff3cd; color: #856404;';
                } else if (producto.cantidad <= 30) {
                    estado = '🟡 Medio';
                    colorEstado = 'background-color: #fff3cd; color: #856404;';
                } else {
                    estado = '✅ Bueno';
                    colorEstado = 'background-color: #d4edda; color: #155724;';
                }
                
                // Obtener información de vencimiento
                const fechas = fechasVencimiento[clave] || [];
                const lotes = lotes[clave] || [];
                
                let infoVencimiento = '';
                if (fechas.length > 0 || lotes.length > 0) {
                    const hoy = new Date();
                    let proximoVencimiento = null;
                    
                    fechas.forEach(fecha => {
                        const fechaVenc = new Date(fecha.fecha);
                        if (fechaVenc > hoy && (!proximoVencimiento || fechaVenc < proximoVencimiento)) {
                            proximoVencimiento = fechaVenc;
                        }
                    });
                    
                    if (proximoVencimiento) {
                        const diasRestantes = Math.ceil((proximoVencimiento - hoy) / (1000 * 60 * 60 * 24));
                        if (diasRestantes <= 7) {
                            infoVencimiento = `🚨 Vence en ${diasRestantes} días`;
                        } else if (diasRestantes <= 30) {
                            infoVencimiento = `⚠️ Vence en ${diasRestantes} días`;
                        }
                    }
                }
                
                tabla += `
                    <tr>
                        <td><strong>${producto.producto}</strong>${infoVencimiento ? '<br><small>' + infoVencimiento + '</small>' : ''}</td>
                        <td><strong>${producto.cantidad}</strong> unidades</td>
                        <td>🏢 ${producto.sede}</td>
                        <td>${producto.stockMinimo || 'No definido'}</td>
                        <td style="${colorEstado}">${estado}</td>
                        <td>${producto.ultimaActualizacion ? new Date(producto.ultimaActualizacion).toLocaleDateString() : 'N/A'}</td>
                    </tr>
                `;
            });
            
            tabla += '</tbody></table>';
            
            // Agregar resumen
            const totalProductos = Object.keys(inventarioFiltrado).length;
            const totalUnidades = Object.values(inventarioFiltrado).reduce((total, item) => total + (item.cantidad || 0), 0);
            const productosAgotados = Object.values(inventarioFiltrado).filter(item => item.cantidad === 0).length;
            const productosBajos = Object.values(inventarioFiltrado).filter(item => item.cantidad > 0 && item.cantidad <= 10).length;
            
            const resumen = `
                <div class="mensaje-info">
                    📊 STOCK FILTRADO: ${totalProductos} productos, ${totalUnidades} unidades totales
                    ${productosAgotados > 0 ? ` | ❌ ${productosAgotados} agotados` : ''}
                    ${productosBajos > 0 ? ` | ⚠️ ${productosBajos} con stock bajo` : ''}
                    <br><strong>🏢 ${filtroSede ? 'Sede: ' + filtroSede : 'Todas las sedes'}</strong>
                </div>
            `;
            
            container.innerHTML = resumen + tabla;
        }
        
        // Función simple para mostrar el stock actual
        async function mostrarStockActual() {
            console.log('🔄 Función mostrarStockActual ejecutada');
            
            // Cargar productos desde Firebase
            if (window.obtenerProductosFirebase) {
                try {
                    const productosFirebase = await window.obtenerProductosFirebase();
                    inventario = {};
                    productosFirebase.forEach(producto => {
                        const clave = `${producto.producto}_${producto.sede}`;
                        inventario[clave] = {
                            producto: producto.producto,
                            cantidad: producto.cantidad,
                            sede: producto.sede,
                            lote: producto.lote || '',
                            fechaVencimiento: producto.fechaVencimiento || '',
                            diasRestantes: producto.diasRestantes || 0
                        };
                    });
                    console.log(`✅ Inventario actualizado desde Firebase: ${Object.keys(inventario).length} productos`);
                } catch (error) {
                    console.error('❌ Error cargando inventario desde Firebase:', error);
                }
            }
            
            console.log('📦 Inventario actual:', Object.keys(inventario).length, 'productos');
            
            // Actualizar días restantes antes de mostrar
            actualizarDiasRestantesLotes();
            
            const filtroProducto = document.getElementById('filtro-producto-stock').value.toLowerCase().trim();
            const filtroSede = document.getElementById('filtro-sede-stock').value;
            const filtroPrioridad = document.getElementById('filtro-prioridad-stock').value;
            const container = document.getElementById('tabla-stock-container');
            const infoDiv = document.getElementById('info-stock');
            
            if (!container) {
                console.log('⚠️ Container de stock no encontrado');
                return;
            }
            
            if (Object.keys(inventario).length === 0) {
                console.log('📭 Inventario vacío, mostrando mensaje');
                container.innerHTML = '<div class="mensaje-info">No hay productos en el inventario para mostrar</div>';
                return;
            }
            
            let tabla = `
                <div style="margin-bottom: 20px;">
                    <button class="boton-accion secundario" onclick="seleccionarTodosProductos()" style="margin-right: 10px;">
                        ☑️ SELECCIONAR TODOS
                    </button>
                    <button class="boton-accion secundario" onclick="deseleccionarTodosProductos()" style="margin-right: 10px;">
                        ☐ DESELECCIONAR TODOS
                    </button>
                    <button class="boton-accion principal" onclick="agregarComentarioProductosSeleccionados()" id="btn-comentario-seleccionados" disabled>
                        💬 COMENTAR SELECCIONADOS
                    </button>
                </div>
                <div class="tabla-stock-container">
                    <div class="tabla-stock-scroll">
                        <table class="tabla-stock">
                    <thead>
                        <tr>
                            <th style="width: 50px;">☑️</th>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Sede</th>
                            <th>Lotes</th>
                            <th>Comentarios</th>
                            <th style="width: 200px;">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Filtrar productos con stock mayor a 0 y aplicar filtros
            let productosFiltrados = Object.entries(inventario)
                .filter(([, producto]) => producto.cantidad > 0);
            
            // Aplicar filtros adicionales
            if (filtroProducto) {
                productosFiltrados = productosFiltrados.filter(([, producto]) => 
                    producto.producto.toLowerCase().includes(filtroProducto)
                );
            }
            
            if (filtroSede) {
                productosFiltrados = productosFiltrados.filter(([, producto]) => 
                    producto.sede === filtroSede
                );
            }
            
            if (filtroPrioridad) {
                productosFiltrados = productosFiltrados.filter(([clave, producto]) => {
                    const lotesProducto = lotes[clave] || [];
                    if (lotesProducto.length > 0) {
                        return lotesProducto.some(lote => {
                            switch (filtroPrioridad) {
                                case 'urgente':
                                    return lote.diasRestantes <= 7;
                                case 'pronto':
                                    return lote.diasRestantes > 7 && lote.diasRestantes <= 30;
                                case 'atencion':
                                    return lote.diasRestantes > 30;
                                case 'sin-vencimiento':
                                    return lote.diasRestantes === undefined || lote.diasRestantes === null;
                                default:
                                    return true;
                            }
                        });
                    } else {
                        return filtroPrioridad === 'sin-vencimiento';
                    }
                });
            }
            
            // Ordenar por cantidad (de mayor a menor)
            const productosOrdenados = productosFiltrados.sort(([,a], [,b]) => b.cantidad - a.cantidad);
            
            productosOrdenados.forEach(([clave, producto]) => {
                // Obtener comentarios para este producto
                const comentarios = comentariosStock[clave] || [];
                let comentariosHTML = '';
                
                if (comentarios.length > 0) {
                    // Mostrar solo el comentario más reciente
                    const comentarioReciente = comentarios[comentarios.length - 1];
                    const iconoTipo = {
                        'general': '📋',
                        'urgente': '🚨',
                        'informacion': 'ℹ️',
                        'advertencia': '⚠️',
                        'recordatorio': '🔔'
                    }[comentarioReciente.tipo] || '📋';
                    
                    const colorTipo = {
                        'general': '#6c757d',
                        'urgente': '#dc3545',
                        'informacion': '#17a2b8',
                        'advertencia': '#ffc107',
                        'recordatorio': '#28a745'
                    }[comentarioReciente.tipo] || '#6c757d';
                    
                    const textoCorto = comentarioReciente.texto.length > 50 ? 
                        comentarioReciente.texto.substring(0, 50) + '...' : 
                        comentarioReciente.texto;
                    
                    comentariosHTML = `
                        <div style="border-left: 3px solid ${colorTipo}; padding-left: 8px; margin: 2px 0;">
                            <div style="display: flex; align-items: center; gap: 5px; margin-bottom: 2px;">
                                <span style="font-size: 0.9em;">${iconoTipo}</span>
                                <span style="font-size: 0.8em; font-weight: bold; color: ${colorTipo};">${comentarioReciente.tipo.toUpperCase()}</span>
                                ${comentarios.length > 1 ? `<span style="font-size: 0.7em; color: #666;">(+${comentarios.length - 1} más)</span>` : ''}
                            </div>
                            <div style="font-size: 0.85em; line-height: 1.3;">${textoCorto}</div>
                            <div style="font-size: 0.7em; color: #666; margin-top: 2px;">
                                👤 ${comentarioReciente.autor} • 📅 ${comentarioReciente.fecha}
                            </div>
                        </div>
                    `;
                } else {
                    comentariosHTML = '<span style="color: #999; font-style: italic; font-size: 0.9em;">Sin comentarios</span>';
                }
                
                // Obtener información de lotes
                const fechas = fechasVencimiento[clave] || [];
                const lotesProducto = lotes[clave] || [];
                let lotesHTML = '';
                
                if (fechas.length > 0 || lotesProducto.length > 0) {
                    const hoy = new Date();
                    const todosLosLotes = [];
                    const lotesProcesados = new Set();
                    
                    // Agregar fechas de vencimiento
                    fechas.forEach(item => {
                        const fechaVenc = new Date(item.fecha);
                        const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                        const loteKey = `${item.lote}_${item.fecha}`;
                        if (!lotesProcesados.has(loteKey)) {
                            todosLosLotes.push({
                                lote: item.lote,
                                fecha: item.fecha,
                                cantidad: item.cantidad,
                                diasRestantes: diasRestantes,
                                prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                            });
                            lotesProcesados.add(loteKey);
                        }
                    });
                    
                    // Agregar lotes
                    lotesProducto.forEach(item => {
                        if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                            const fechaVenc = new Date(item.fechaVencimiento);
                            const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                            const loteKey = `${item.lote}_${item.fechaVencimiento}`;
                            if (!lotesProcesados.has(loteKey)) {
                                todosLosLotes.push({
                                    lote: item.lote,
                                    fecha: item.fechaVencimiento,
                                    cantidad: item.cantidad,
                                    diasRestantes: diasRestantes,
                                    prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                                });
                                lotesProcesados.add(loteKey);
                            }
                        }
                    });
                    
                    if (todosLosLotes.length > 0) {
                        // Ordenar por prioridad
                        todosLosLotes.sort((a, b) => {
                            if (a.prioridad !== b.prioridad) {
                                const prioridades = { alta: 3, media: 2, baja: 1 };
                                return prioridades[b.prioridad] - prioridades[a.prioridad];
                            }
                            return a.diasRestantes - b.diasRestantes;
                        });
                        
                        // Mostrar resumen de lotes
                        const lotesUrgentes = todosLosLotes.filter(l => l.prioridad === 'alta').length;
                        const lotesProntos = todosLosLotes.filter(l => l.prioridad === 'media').length;
                        const totalLotes = todosLosLotes.length;
                        
                        let resumenLotes = `<div style="font-size: 0.9em;">`;
                        if (lotesUrgentes > 0) {
                            resumenLotes += `<span style="color: #dc3545; font-weight: bold;">🔴 ${lotesUrgentes} urgente${lotesUrgentes > 1 ? 's' : ''}</span>`;
                        }
                        if (lotesProntos > 0) {
                            resumenLotes += `${lotesUrgentes > 0 ? ' • ' : ''}<span style="color: #ffc107; font-weight: bold;">🟡 ${lotesProntos} pronto${lotesProntos > 1 ? 's' : ''}</span>`;
                        }
                        if (totalLotes > lotesUrgentes + lotesProntos) {
                            resumenLotes += `${lotesUrgentes > 0 || lotesProntos > 0 ? ' • ' : ''}<span style="color: #28a745;">🟢 ${totalLotes - lotesUrgentes - lotesProntos} disponible${totalLotes - lotesUrgentes - lotesProntos > 1 ? 's' : ''}</span>`;
                        }
                        resumenLotes += `</div>`;
                        
                        lotesHTML = `
                            <div style="text-align: center;">
                                ${resumenLotes}
                                <div style="margin-top: 5px;">
                                    <button class="boton-accion secundario" onclick="verDetallesLotes('${clave}')" style="padding: 3px 8px; font-size: 11px; background: #17a2b8; color: white;">
                                        📦 Ver lotes (${totalLotes})
                                    </button>
                                </div>
                            </div>
                        `;
                    } else {
                        lotesHTML = '<span style="color: #999; font-style: italic; font-size: 0.9em;">Sin lotes registrados</span>';
                    }
                } else {
                    lotesHTML = '<span style="color: #999; font-style: italic; font-size: 0.9em;">Sin lotes registrados</span>';
                }
                
                tabla += `
                    <tr>
                        <td style="text-align: center;">
                            <input type="checkbox" class="checkbox-producto" data-clave="${clave}" onchange="actualizarBotonComentarios()">
                        </td>
                        <td><strong>${producto.producto}</strong></td>
                        <td><strong>${producto.cantidad}</strong> unidades</td>
                        <td>🏢 ${producto.sede}</td>
                        <td style="max-width: 200px; word-wrap: break-word;">${lotesHTML}</td>
                        <td style="max-width: 300px; word-wrap: break-word;">${comentariosHTML}</td>
                        <td>
                            <button class="boton-accion secundario" onclick="agregarComentarioProducto('${clave}')" style="padding: 5px 10px; font-size: 12px; margin: 2px;">
                                💬 Comentar
                            </button>
                            <button class="boton-accion secundario" onclick="verComentariosProducto('${clave}')" style="padding: 5px 10px; font-size: 12px; margin: 2px; background: #9c27b0;">
                                👁️ Ver
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tabla += '</tbody></table></div></div>';
            
            // Mostrar información de filtros aplicados
            if (filtroProducto || filtroSede || filtroPrioridad) {
                const filtrosAplicados = [];
                if (filtroProducto) filtrosAplicados.push(`Producto: "${filtroProducto}"`);
                if (filtroSede) filtrosAplicados.push(`Sede: ${filtroSede}`);
                if (filtroPrioridad) filtrosAplicados.push(`Prioridad: ${filtroPrioridad}`);
                
                infoDiv.innerHTML = `🔍 Filtros aplicados: ${filtrosAplicados.join(' | ')} | 📊 Mostrando ${productosOrdenados.length} productos`;
                infoDiv.style.display = 'block';
            } else {
                infoDiv.style.display = 'none';
            }
            
            // Agregar resumen
            const totalProductos = Object.keys(inventario).length;
            const totalUnidades = Object.values(inventario).reduce((total, item) => total + (item.cantidad || 0), 0);
            
            const resumen = `
                <div class="mensaje-info">
                    📊 STOCK TOTAL: ${totalProductos} productos, ${totalUnidades} unidades totales
                </div>
            `;
            
            container.innerHTML = resumen + tabla;
        }
        
        // Función para actualizar días restantes en todos los lotes
        function actualizarDiasRestantesLotes() {
            const hoy = new Date();
            
            Object.keys(lotes).forEach(clave => {
                const lotesProducto = lotes[clave];
                lotesProducto.forEach(lote => {
                    if (lote.fechaVencimiento && lote.fechaVencimiento !== 'Sin fecha') {
                        const fechaVenc = new Date(lote.fechaVencimiento);
                        lote.diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                        // Mantener compatibilidad con el campo 'fecha'
                        if (!lote.fecha) {
                            lote.fecha = lote.fechaVencimiento;
                        }
                    }
                });
            });
        }
        
        // FUNCIONES DE CARGA DE DATOS
        function cargarStock() {
            const filtroSede = document.getElementById('filtro-sede-stock').value;
            const filtroTipo = document.getElementById('filtro-tipo-stock').value;
            const filtroResponsable = document.getElementById('filtro-responsable-stock').value;
            
            let movimientosFiltrados = historial;
            
            // Aplicar filtros
            if (filtroSede) {
                movimientosFiltrados = movimientosFiltrados.filter(mov => mov.sede === filtroSede);
            }
            
            if (filtroTipo) {
                movimientosFiltrados = movimientosFiltrados.filter(mov => mov.tipo === filtroTipo);
            }
            
            if (filtroResponsable) {
                movimientosFiltrados = movimientosFiltrados.filter(mov => mov.responsable === filtroResponsable);
            }
            
            // Mostrar tabla
            const container = document.getElementById('tabla-stock-container');
            if (movimientosFiltrados.length === 0) {
                container.innerHTML = '<div class="mensaje-info">No hay movimientos para mostrar</div>';
                return;
            }
            
            let tabla = `
                <table class="tabla-stock">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Tipo</th>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Sede</th>
                            <th>Responsable</th>
                            <th>Descripción</th>
                            <th>Lote</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Ordenar por fecha más reciente primero
            movimientosFiltrados.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
            
            movimientosFiltrados.slice(0, 50).forEach(mov => {
                let colorFila = '';
                let iconoTipo = '';
                
                // Asignar colores y iconos según el tipo
                switch(mov.tipo) {
                    case 'entrada':
                        colorFila = 'background-color: #d4edda;';
                        iconoTipo = '📥';
                        break;
                    case 'salida':
                        colorFila = 'background-color: #f8d7da;';
                        iconoTipo = '📤';
                        break;
                    case 'devolucion':
                        colorFila = 'background-color: #d1ecf1;';
                        iconoTipo = '↩️';
                        break;
                }
                
                tabla += `
                    <tr style="${colorFila}">
                        <td>${new Date(mov.timestamp).toLocaleDateString('es-ES')}</td>
                        <td><strong>${iconoTipo} ${mov.tipo.toUpperCase()}</strong></td>
                        <td>${mov.producto}</td>
                        <td>${mov.cantidad}</td>
                        <td>${mov.sede}</td>
                        <td>👤 ${mov.responsable || 'No especificado'}</td>
                        <td>${mov.descripcion}</td>
                        <td>🏷️ ${mov.lote || 'Sin lote'}</td>
                    </tr>
                `;
            });
            
            tabla += '</tbody></table>';
            
            // Agregar contador de movimientos
            const contador = `<div class="mensaje-info">Mostrando ${movimientosFiltrados.length} movimientos</div>`;
            container.innerHTML = contador + tabla;
        }
        
        function obtenerInfoVencimiento(clave) {
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            if (fechas.length === 0 && lotesProducto.length === 0) {
                return 'Sin fecha';
            }
            
            const hoy = new Date();
            let alertas = [];
            
            // Verificar fechas de vencimiento
            fechas.forEach(item => {
                const fechaVenc = new Date(item.fecha);
                const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                
                if (diasRestantes <= 30) {
                    alertas.push({
                        diasRestantes: diasRestantes,
                        fecha: item.fecha,
                        lote: item.lote,
                        prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                    });
                }
            });
            
            // Verificar lotes
            lotesProducto.forEach(item => {
                if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                    const fechaVenc = new Date(item.fechaVencimiento);
                    const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                    
                    if (diasRestantes <= 30) {
                        alertas.push({
                            diasRestantes: diasRestantes,
                            fecha: item.fechaVencimiento,
                            lote: item.lote,
                            prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                        });
                    }
                }
            });
            
            if (alertas.length === 0) {
                return 'Sin alertas';
            }
            
            // Ordenar por prioridad
            alertas.sort((a, b) => {
                const prioridades = { alta: 3, media: 2, baja: 1 };
                return prioridades[b.prioridad] - prioridades[a.prioridad];
            });
            
            const masUrgente = alertas[0];
            const icono = masUrgente.prioridad === 'alta' ? '🔴' : masUrgente.prioridad === 'media' ? '🟡' : '🟢';
            
            return `${icono} ${masUrgente.diasRestantes} días (${masUrgente.fecha})`;
        }
        
        function generarAlertaVencimiento(clave, cantidadSolicitada) {
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            if (fechas.length === 0 && lotesProducto.length === 0) {
                return null; // No hay información de vencimiento
            }
            
            const hoy = new Date();
            const alertas = [];
            
            // Verificar fechas de vencimiento
            fechas.forEach(item => {
                const fechaVenc = new Date(item.fecha);
                const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                
                if (diasRestantes <= 30) { // Alerta si vence en 30 días o menos
                    alertas.push({
                        tipo: 'fecha',
                        diasRestantes: diasRestantes,
                        fecha: item.fecha,
                        lote: item.lote,
                        cantidad: item.cantidad,
                        prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                    });
                }
            });
            
            // Verificar lotes (si tienen fecha de vencimiento)
            lotesProducto.forEach(item => {
                if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                    const fechaVenc = new Date(item.fechaVencimiento);
                    const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                    
                    if (diasRestantes <= 30) {
                        alertas.push({
                            tipo: 'lote',
                            diasRestantes: diasRestantes,
                            fecha: item.fechaVencimiento,
                            lote: item.lote,
                            cantidad: item.cantidad,
                            prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                        });
                    }
                }
            });
            
            // Ordenar por prioridad y fecha
            alertas.sort((a, b) => {
                if (a.prioridad !== b.prioridad) {
                    const prioridades = { alta: 3, media: 2, baja: 1 };
                    return prioridades[b.prioridad] - prioridades[a.prioridad];
                }
                return a.diasRestantes - b.diasRestantes;
            });
            
            // Determinar qué lotes se van a sacar
            const lotesASacar = determinarLotesASacar(alertas, cantidadSolicitada);
            
            return alertas.length > 0 ? {
                producto: inventario[clave].producto,
                cantidadSolicitada: cantidadSolicitada,
                alertas: alertas,
                lotesASacar: lotesASacar
            } : null;
        }
        
        function determinarLotesASacar(alertas, cantidadSolicitada) {
            const lotesASacar = [];
            let cantidadRestante = cantidadSolicitada;
            
            // Recorrer las alertas ordenadas por prioridad
            for (const alerta of alertas) {
                if (cantidadRestante <= 0) break;
                
                const cantidadDisponible = alerta.cantidad;
                const cantidadASacar = Math.min(cantidadDisponible, cantidadRestante);
                
                lotesASacar.push({
                    lote: alerta.lote,
                    fecha: alerta.fecha,
                    diasRestantes: alerta.diasRestantes,
                    cantidad: cantidadASacar,
                    prioridad: alerta.prioridad
                });
                
                cantidadRestante -= cantidadASacar;
            }
            
            return lotesASacar;
        }
        
        function mostrarAlertaVencimiento(alerta, callback) {
            let mensaje = `⚠️ **ALERTA DE VENCIMIENTO** ⚠️\n\n`;
            mensaje += `**Producto:** ${alerta.producto}\n`;
            mensaje += `**Cantidad a sacar:** ${alerta.cantidadSolicitada}\n\n`;
            
            // Mostrar qué lotes se van a sacar
            mensaje += `**📦 LOTES QUE SE VAN A SACAR:**\n\n`;
            alerta.lotesASacar.forEach((lote, index) => {
                const icono = lote.prioridad === 'alta' ? '🔴' : lote.prioridad === 'media' ? '🟡' : '🟢';
                const prioridad = lote.prioridad === 'alta' ? 'URGENTE' : lote.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
                
                mensaje += `${icono} **Lote ${index + 1}:** ${lote.lote}\n`;
                mensaje += `   📅 Fecha de vencimiento: ${lote.fecha}\n`;
                mensaje += `   ⏰ Vence en: ${lote.diasRestantes} días (${prioridad})\n`;
                mensaje += `   📦 Cantidad a sacar: ${lote.cantidad}\n\n`;
            });
            
            // Mostrar información adicional de todos los lotes disponibles
            mensaje += `**📋 TODOS LOS LOTES DISPONIBLES:**\n\n`;
            alerta.alertas.forEach((item, index) => {
                const icono = item.prioridad === 'alta' ? '🔴' : item.prioridad === 'media' ? '🟡' : '🟢';
                const prioridad = item.prioridad === 'alta' ? 'URGENTE' : item.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
                
                mensaje += `${icono} **${prioridad}** - Vence en ${item.diasRestantes} días\n`;
                mensaje += `   📅 Fecha: ${item.fecha}\n`;
                mensaje += `   🏷️ Lote: ${item.lote}\n`;
                mensaje += `   📦 Cantidad disponible: ${item.cantidad}\n\n`;
            });
            
            mensaje += `**💡 RECOMENDACIÓN:**\n`;
            mensaje += `Se sacarán primero los lotes que vencen más pronto para evitar desperdicios.`;
            
            // Usar SweetAlert2 para mostrar la alerta
            Swal.fire({
                title: '⚠️ ALERTA DE VENCIMIENTO',
                html: mensaje.replace(/\n/g, '<br>'),
                icon: 'warning',
                confirmButtonText: '✅ CONTINUAR CON SALIDA',
                cancelButtonText: '❌ CANCELAR',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                cancelButtonColor: '#3085d6',
                width: '700px',
                customClass: {
                    popup: 'alerta-vencimiento-popup'
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    callback();
                }
            });
        }
        
        function mostrarSelectorLotes(clave, cantidad, sede, tipoUso) {
            console.log('🔍 Debug - Función mostrarSelectorLotes llamada');
            console.log('🔍 Debug - Parámetros:', { clave, cantidad, sede, tipoUso });
            
            const item = inventario[clave];
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            console.log('🔍 Debug - Item del inventario:', item);
            console.log('🔍 Debug - Fechas en mostrarSelectorLotes:', fechas);
            console.log('🔍 Debug - Lotes en mostrarSelectorLotes:', lotesProducto);
            
            const hoy = new Date();
            const todosLosLotes = [];
            const lotesProcesados = new Set(); // Para evitar duplicados
            
            // Agregar fechas de vencimiento
            fechas.forEach(item => {
                const fechaVenc = new Date(item.fecha);
                const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                
                const loteKey = `${item.lote}_${item.fecha}`;
                if (!lotesProcesados.has(loteKey)) {
                    todosLosLotes.push({
                        lote: item.lote,
                        fecha: item.fecha,
                        cantidad: item.cantidad,
                        diasRestantes: diasRestantes,
                        prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja',
                        tipo: 'fecha'
                    });
                    lotesProcesados.add(loteKey);
                }
            });
            
            // Agregar lotes (solo si no están ya procesados)
            lotesProducto.forEach(item => {
                if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                    const fechaVenc = new Date(item.fechaVencimiento);
                    const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                    
                    const loteKey = `${item.lote}_${item.fechaVencimiento}`;
                    if (!lotesProcesados.has(loteKey)) {
                        todosLosLotes.push({
                            lote: item.lote,
                            fecha: item.fechaVencimiento,
                            cantidad: item.cantidad,
                            diasRestantes: diasRestantes,
                            prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja',
                            tipo: 'lote'
                        });
                        lotesProcesados.add(loteKey);
                    }
                }
            });
            
            // Ordenar por prioridad y fecha
            todosLosLotes.sort((a, b) => {
                if (a.prioridad !== b.prioridad) {
                    const prioridades = { alta: 3, media: 2, baja: 1 };
                    return prioridades[b.prioridad] - prioridades[a.prioridad];
                }
                return a.diasRestantes - b.diasRestantes;
            });
            
            // Crear opciones para el selector
            let opcionesHTML = '';
            let cantidadTotalDisponible = 0;
            
            todosLosLotes.forEach((lote, index) => {
                const icono = lote.prioridad === 'alta' ? '🔴' : lote.prioridad === 'media' ? '🟡' : '🟢';
                const prioridad = lote.prioridad === 'alta' ? 'URGENTE' : lote.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
                cantidadTotalDisponible += lote.cantidad;
                
                opcionesHTML += `
                    <option value="${index}" data-cantidad="${lote.cantidad}" data-dias="${lote.diasRestantes}">
                        ${icono} Lote: ${lote.lote} | Cantidad: ${lote.cantidad} | Vence en ${lote.diasRestantes} días (${prioridad})
                    </option>
                `;
            });
            
            // Verificar si hay suficiente stock total
            if (cantidadTotalDisponible < cantidad) {
                Swal.fire({
                    title: '⚠️ Stock Insuficiente',
                    text: `Solo hay ${cantidadTotalDisponible} unidades disponibles en todos los lotes, pero necesitas ${cantidad} unidades.`,
                    icon: 'warning',
                    confirmButtonText: '✅ Entendido'
                });
                return;
            }
            
            // Crear el HTML del modal
            const modalHTML = `
                <div style="text-align: left; max-width: 700px;">
                    <h3 style="color: #2c3e50; margin-bottom: 20px;">📦 Seleccionar Lote para Salida</h3>
                    
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                        <strong>Producto:</strong> ${item.producto}<br>
                        <strong>Cantidad a sacar:</strong> ${cantidad} unidades<br>
                        <strong>Sede:</strong> ${sede}<br>
                        <strong>Stock total disponible:</strong> ${cantidadTotalDisponible} unidades
                    </div>
                    
                    <div style="margin-bottom: 20px;">
                        <label for="lote-selector" style="display: block; margin-bottom: 8px; font-weight: bold;">
                            🏷️ Selecciona el lote del cual quieres sacar las unidades:
                        </label>
                        <select id="lote-selector" style="width: 100%; padding: 10px; border: 2px solid #3498db; border-radius: 6px; font-size: 14px;">
                            ${opcionesHTML}
                        </select>
                    </div>
                    
                    <div id="info-lote-seleccionado" style="background: #e8f4fd; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db; display: none;">
                        <h4 style="margin: 0 0 10px 0; color: #2c3e50;">📋 Información del Lote Seleccionado</h4>
                        <div id="detalles-lote"></div>
                    </div>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: 8px; border-left: 4px solid #ffc107;">
                        <strong>💡 Recomendación:</strong> Se recomienda usar primero los lotes que vencen más pronto (marcados con 🔴) para evitar desperdicios.
                    </div>
                    
                    <div style="margin-top: 15px; padding: 10px; background: #e8f5e8; border-radius: 6px; border-left: 4px solid #28a745; font-size: 12px;">
                        <strong>📊 Resumen de Lotes:</strong><br>
                        🔴 Urgentes (≤7 días): ${todosLosLotes.filter(l => l.prioridad === 'alta').length} lotes<br>
                        🟡 Pronto (8-15 días): ${todosLosLotes.filter(l => l.prioridad === 'media').length} lotes<br>
                        🟢 Atención (>15 días): ${todosLosLotes.filter(l => l.prioridad === 'baja').length} lotes
                    </div>
                </div>
            `;
            
            // Mostrar el modal
            Swal.fire({
                title: '🏷️ Seleccionar Lote',
                html: modalHTML,
                showCancelButton: true,
                confirmButtonText: '✅ CONFIRMAR SALIDA',
                cancelButtonText: '❌ CANCELAR',
                width: '800px',
                didOpen: () => {
                    // Agregar evento para mostrar información del lote seleccionado
                    const selector = document.getElementById('lote-selector');
                    const infoDiv = document.getElementById('info-lote-seleccionado');
                    const detallesDiv = document.getElementById('detalles-lote');
                    
                    selector.addEventListener('change', function() {
                        const loteSeleccionado = todosLosLotes[this.value];
                        if (loteSeleccionado) {
                            const icono = loteSeleccionado.prioridad === 'alta' ? '🔴' : loteSeleccionado.prioridad === 'media' ? '🟡' : '🟢';
                            const prioridad = loteSeleccionado.prioridad === 'alta' ? 'URGENTE' : loteSeleccionado.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
                            
                            detallesDiv.innerHTML = `
                                <strong>🏷️ Lote:</strong> ${loteSeleccionado.lote}<br>
                                <strong>📅 Fecha de vencimiento:</strong> ${loteSeleccionado.fecha}<br>
                                <strong>⏰ Vence en:</strong> ${loteSeleccionado.diasRestantes} días (${prioridad})<br>
                                <strong>📦 Cantidad disponible:</strong> ${loteSeleccionado.cantidad} unidades<br>
                                <strong>📤 Cantidad a sacar:</strong> ${Math.min(loteSeleccionado.cantidad, cantidad)} unidades
                            `;
                            infoDiv.style.display = 'block';
                        } else {
                            infoDiv.style.display = 'none';
                        }
                    });
                    
                    // Mostrar información del primer lote por defecto
                    if (todosLosLotes.length > 0) {
                        selector.value = '0';
                        selector.dispatchEvent(new Event('change'));
                    }
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const selector = document.getElementById('lote-selector');
                    const loteSeleccionado = todosLosLotes[selector.value];
                    
                    if (loteSeleccionado) {
                        // Procesar la salida con información del lote específico
                        procesarSalidaConLote(clave, cantidad, sede, tipoUso, loteSeleccionado);
                    }
                }
            });
        }
        
        function mostrarConfirmacionConInfo(clave, cantidad, sede, descripcion) {
            const item = inventario[clave];
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            let mensaje = `**📦 CONFIRMAR SALIDA**\n\n`;
            mensaje += `**Producto:** ${item.producto}\n`;
            mensaje += `**Cantidad a sacar:** ${cantidad}\n`;
            mensaje += `**Sede:** ${sede}\n\n`;
            
            if (fechas.length > 0 || lotesProducto.length > 0) {
                mensaje += `**📋 INFORMACIÓN DE LOTES DISPONIBLES:**\n\n`;
                
                const hoy = new Date();
                const todosLosLotes = [];
                
                const lotesProcesados = new Set(); // Para evitar duplicados
                
                // Agregar fechas de vencimiento
                fechas.forEach(item => {
                    const fechaVenc = new Date(item.fecha);
                    const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                    
                    const loteKey = `${item.lote}_${item.fecha}`;
                    if (!lotesProcesados.has(loteKey)) {
                        todosLosLotes.push({
                            lote: item.lote,
                            fecha: item.fecha,
                            cantidad: item.cantidad,
                            diasRestantes: diasRestantes,
                            prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                        });
                        lotesProcesados.add(loteKey);
                    }
                });
                
                // Agregar lotes (solo si no están ya procesados)
                lotesProducto.forEach(item => {
                    if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                        const fechaVenc = new Date(item.fechaVencimiento);
                        const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                        
                        const loteKey = `${item.lote}_${item.fechaVencimiento}`;
                        if (!lotesProcesados.has(loteKey)) {
                            todosLosLotes.push({
                                lote: item.lote,
                                fecha: item.fechaVencimiento,
                                cantidad: item.cantidad,
                                diasRestantes: diasRestantes,
                                prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                            });
                            lotesProcesados.add(loteKey);
                        }
                    }
                });
                
                // Ordenar por prioridad y fecha
                todosLosLotes.sort((a, b) => {
                    if (a.prioridad !== b.prioridad) {
                        const prioridades = { alta: 3, media: 2, baja: 1 };
                        return prioridades[b.prioridad] - prioridades[a.prioridad];
                    }
                    return a.diasRestantes - b.diasRestantes;
                });
                
                todosLosLotes.forEach((lote, index) => {
                    const icono = lote.prioridad === 'alta' ? '🔴' : lote.prioridad === 'media' ? '🟡' : '🟢';
                    const prioridad = lote.prioridad === 'alta' ? 'URGENTE' : lote.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
                    
                    mensaje += `${icono} **Lote ${index + 1}:** ${lote.lote}\n`;
                    mensaje += `   📅 Fecha de vencimiento: ${lote.fecha}\n`;
                    mensaje += `   ⏰ Vence en: ${lote.diasRestantes} días (${prioridad})\n`;
                    mensaje += `   📦 Cantidad disponible: ${lote.cantidad}\n\n`;
                });
                
                mensaje += `**💡 RECOMENDACIÓN:**\n`;
                mensaje += `Se sacarán primero los lotes que vencen más pronto para evitar desperdicios.`;
            }
            
            Swal.fire({
                title: '✅ Confirmar Salida',
                html: mensaje.replace(/\n/g, '<br>'),
                icon: 'question',
                confirmButtonText: '✅ CONFIRMAR SALIDA',
                cancelButtonText: '❌ CANCELAR',
                showCancelButton: true,
                width: '600px'
            }).then((result) => {
                if (result.isConfirmed) {
                    procesarSalida(clave, cantidad, sede, descripcion);
                }
            });
        }
        
        async function cargarHistorial() {
            console.log('🔄 Cargando historial desde Firebase...');
            
            // Cargar movimientos desde Firebase
            if (window.obtenerMovimientosFirebase) {
                try {
                    const movimientosFirebase = await window.obtenerMovimientosFirebase();
                    historial = movimientosFirebase;
                    console.log(`✅ Historial actualizado desde Firebase: ${historial.length} movimientos`);
                } catch (error) {
                    console.error('❌ Error cargando historial desde Firebase:', error);
                }
            }
            
            const filtroTipo = document.getElementById('filtro-tipo-historial').value;
            const filtroSede = document.getElementById('filtro-sede-historial').value;
            const filtroFecha = document.getElementById('filtro-fecha-historial').value;
            const filtroResponsable = document.getElementById('filtro-responsable-historial').value;
            const filtroProducto = document.getElementById('filtro-producto-historial').value.toLowerCase().trim();
            
            let historialFiltrado = historial;
            
            // Aplicar filtros
            if (filtroTipo) {
                historialFiltrado = historialFiltrado.filter(mov => mov.tipo === filtroTipo);
            }
            
            if (filtroSede) {
                historialFiltrado = historialFiltrado.filter(mov => {
                    // Filtrar por sede origen o sede destino
                    const coincideOrigen = mov.sede === filtroSede;
                    const coincideDestino = mov.sedeDestino && mov.sedeDestino === filtroSede;
                    return coincideOrigen || coincideDestino;
                });
            }
            
            if (filtroFecha) {
                const hoy = new Date();
                const ayer = new Date(hoy);
                ayer.setDate(hoy.getDate() - 1);
                
                historialFiltrado = historialFiltrado.filter(mov => {
                    const fechaMov = new Date(mov.timestamp);
                    switch (filtroFecha) {
                        case 'hoy':
                            return fechaMov.toDateString() === hoy.toDateString();
                        case 'ayer':
                            return fechaMov.toDateString() === ayer.toDateString();
                        case 'semana':
                            const semanaAtras = new Date(hoy);
                            semanaAtras.setDate(hoy.getDate() - 7);
                            return fechaMov >= semanaAtras;
                        case 'mes':
                            const mesAtras = new Date(hoy);
                            mesAtras.setMonth(hoy.getMonth() - 1);
                            return fechaMov >= mesAtras;
                        default:
                            return true;
                    }
                });
            }
            
            // Filtro por responsable
            if (filtroResponsable) {
                historialFiltrado = historialFiltrado.filter(mov => 
                    mov.responsable === filtroResponsable
                );
            }
            
            // Filtro por producto
            if (filtroProducto) {
                historialFiltrado = historialFiltrado.filter(mov => 
                    mov.producto.toLowerCase().includes(filtroProducto)
                );
            }
            
            // Mostrar tabla
            const container = document.getElementById('tabla-historial-container');
            if (historialFiltrado.length === 0) {
                let mensaje = 'No hay movimientos para mostrar';
                if (filtroProducto || filtroTipo || filtroSede || filtroFecha) {
                    mensaje = 'No hay movimientos que coincidan con los filtros aplicados';
                }
                container.innerHTML = `<div class="mensaje-info">${mensaje}</div>`;
                return;
            }
            
            // Mostrar información de filtros aplicados
            let infoFiltros = '';
            const filtrosAplicados = [];
            if (filtroTipo) filtrosAplicados.push(`Tipo: ${filtroTipo}`);
            if (filtroSede) filtrosAplicados.push(`Sede: ${filtroSede} (origen o destino)`);
            if (filtroFecha) filtrosAplicados.push(`Fecha: ${filtroFecha}`);
            if (filtroResponsable) filtrosAplicados.push(`Responsable: ${filtroResponsable}`);
            if (filtroProducto) filtrosAplicados.push(`Producto: ${filtroProducto}`);
            
            if (filtrosAplicados.length > 0) {
                infoFiltros = `<div class="info-filtros">🔍 Filtros aplicados: ${filtrosAplicados.join(' | ')} | 📊 Mostrando ${historialFiltrado.length} movimientos</div>`;
            }
            
            let tabla = `
                <table class="tabla-stock">
                    <thead>
                        <tr>
                            <th>Fecha y Hora</th>
                            <th>Tipo</th>
                            <th>Producto</th>
                            <th>Cantidad</th>
                            <th>Sede</th>
                            <th>Lote</th>
                            <th>Fecha Vencimiento</th>
                            <th>Responsable</th>
                            <th>Modalidad</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            // Mostrar todos los movimientos filtrados
            historialFiltrado.forEach(mov => {
                const iconoTipo = mov.tipo === 'entrada' ? '📥' : 
                                 mov.tipo === 'salida' ? '📤' : '↩️';
                
                // Formatear fecha y hora
                let fechaHora = mov.fecha;
                if (mov.timestamp) {
                    const fecha = new Date(mov.timestamp);
                    fechaHora = fecha.toLocaleDateString('es-ES') + ' ' + fecha.toLocaleTimeString('es-ES', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                }
                
                // Generar detalles según el tipo de movimiento
                let detalles = '';
                
                // Obtener fecha de vencimiento del lote
                let fechaVencimiento = '';
                if (mov.lote && mov.lote !== 'Sin lote') {
                    // Buscar en lotes actuales
                    const claveInventario = Object.keys(inventario).find(clave => {
                        const item = inventario[clave];
                        return item.producto === mov.producto && item.sede === mov.sede;
                    });
                    
                    if (claveInventario && lotes[claveInventario]) {
                        const loteEncontrado = lotes[claveInventario].find(lote => lote.lote === mov.lote);
                        if (loteEncontrado) {
                            fechaVencimiento = loteEncontrado.fechaVencimiento || loteEncontrado.fecha || 'Sin fecha';
                        }
                    }
                    
                    // Si no se encuentra, usar la fecha del movimiento
                    if (!fechaVencimiento && mov.fechaVencimiento) {
                        fechaVencimiento = mov.fechaVencimiento;
                    }
                }
                
                if (mov.tipo === 'salida') {
                    let detallesSalida = [];
                    
                    // Descripción si existe
                    if (mov.descripcion && mov.descripcion !== 'Entrada de productos' && mov.descripcion !== 'Salida de productos') {
                        detallesSalida.push(`📝 ${mov.descripcion}`);
                    }
                    
                    detalles = detallesSalida.join('<br>');
                } else if (mov.tipo === 'entrada') {
                    let detallesEntrada = [];
                    
                    // Descripción si existe
                    if (mov.descripcion && mov.descripcion !== 'Entrada de productos' && mov.descripcion !== 'Salida de productos') {
                        detallesEntrada.push(`📝 ${mov.descripcion}`);
                    }
                    
                    detalles = detallesEntrada.join('<br>');
                }
                
                // Formatear sede para mostrar origen y destino
                let sedeMostrar = mov.sede;
                if (mov.sedeDestino && mov.tipo === 'salida') {
                    sedeMostrar = `${mov.sede} → ${mov.sedeDestino}`;
                }
                
                tabla += `
                    <tr>
                        <td>${fechaHora}</td>
                        <td>${iconoTipo} ${mov.tipo.toUpperCase()}</td>
                        <td>${mov.producto}</td>
                        <td>${mov.cantidad}</td>
                        <td>${sedeMostrar}</td>
                        <td>${mov.lote && mov.lote !== 'Sin lote' ? mov.lote : '-'}</td>
                        <td>${fechaVencimiento && fechaVencimiento !== 'Sin fecha' ? fechaVencimiento : '-'}</td>
                        <td>👤 ${mov.responsable || 'No especificado'}</td>
                        <td>${mov.modalidad || '-'}</td>
                        <td>
                            <button class="boton-eliminar-movimiento" onclick="eliminarMovimiento(${historial.indexOf(mov)})" title="Eliminar movimiento">
                                🗑️
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            tabla += '</tbody></table>';
            container.innerHTML = infoFiltros + tabla;
        }
        
        function limpiarFiltroProducto() {
            const input = document.getElementById('filtro-producto-historial');
            const sugerencias = document.getElementById('sugerencias-producto-historial');
            
            input.value = '';
            sugerencias.style.display = 'none';
            cargarHistorial(); // Recargar historial sin filtro
            
            console.log('Filtro de producto limpiado');
        }
        
        // Función para limpiar todos los filtros del historial
        function limpiarFiltrosHistorial() {
            document.getElementById('filtro-tipo-historial').value = '';
            document.getElementById('filtro-sede-historial').value = '';
            document.getElementById('filtro-fecha-historial').value = '';
            document.getElementById('filtro-responsable-historial').value = '';
            document.getElementById('filtro-producto-historial').value = '';
            
            const sugerencias = document.getElementById('sugerencias-producto-historial');
            if (sugerencias) {
                sugerencias.style.display = 'none';
            }
            
            // Recargar historial sin filtros
            cargarHistorial();
            
            // Mostrar notificación
            mostrarNotificacion('Filtros Limpiados', 'Todos los filtros han sido restablecidos', 'success');
        }
        
        // Función para exportar historial a Excel
        function exportarHistorialExcel() {
            // Mostrar loading
            Swal.fire({
                title: '📊 Exportando Historial...',
                text: 'Preparando los datos del historial',
                icon: 'info',
                allowOutsideClick: false,
                showConfirmButton: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            // Obtener datos filtrados del historial
            const historialFiltrado = obtenerHistorialFiltrado();
            
            if (historialFiltrado.length === 0) {
                Swal.fire({
                    title: '⚠️ Sin Datos',
                    text: 'No hay movimientos para exportar',
                    icon: 'warning',
                    confirmButtonText: 'OK',
                    confirmButtonColor: '#FF6B35'
                });
                return;
            }

            // Crear datos para Excel
            const datos = historialFiltrado.map(mov => [
                mov.fecha,
                mov.tipo.toUpperCase(),
                mov.producto,
                mov.cantidad,
                mov.sede,
                mov.responsable,
                mov.observaciones || ''
            ]);

            // Crear workbook y worksheet
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.aoa_to_sheet([
                ['Fecha', 'Tipo', 'Producto', 'Cantidad', 'Sede', 'Responsable', 'Observaciones'],
                ...datos
            ]);

            // Ajustar ancho de columnas
            const colWidths = [
                { wch: 12 }, // Fecha
                { wch: 10 }, // Tipo
                { wch: 25 }, // Producto
                { wch: 10 }, // Cantidad
                { wch: 30 }, // Sede
                { wch: 25 }, // Responsable
                { wch: 20 }  // Observaciones
            ];
            ws['!cols'] = colWidths;

            // Agregar worksheet al workbook
            XLSX.utils.book_append_sheet(wb, ws, 'Historial');

            // Generar nombre del archivo
            const fecha = new Date().toISOString().split('T')[0];
            const nombreArchivo = `Historial_Movimientos_${fecha}.xlsx`;

            // Descargar archivo
            XLSX.writeFile(wb, nombreArchivo);

            // Mostrar mensaje de éxito
            Swal.fire({
                title: '✅ Exportación Exitosa',
                text: `Archivo Excel generado: ${nombreArchivo}`,
                icon: 'success',
                confirmButtonText: 'OK',
                confirmButtonColor: '#4CAF50'
            });
        }
        
        // Función auxiliar para obtener historial filtrado
        function obtenerHistorialFiltrado() {
            const filtroTipo = document.getElementById('filtro-tipo-historial').value;
            const filtroSede = document.getElementById('filtro-sede-historial').value;
            const filtroFecha = document.getElementById('filtro-fecha-historial').value;
            const filtroResponsable = document.getElementById('filtro-responsable-historial').value;
            const filtroProducto = document.getElementById('filtro-producto-historial').value.toLowerCase().trim();

            return historial.filter(mov => {
                if (filtroTipo && mov.tipo !== filtroTipo) return false;
                if (filtroSede && mov.sede !== filtroSede) return false;
                if (filtroResponsable && mov.responsable !== filtroResponsable) return false;
                if (filtroProducto && !mov.producto.toLowerCase().includes(filtroProducto)) return false;
                
                // Filtro por fecha
                if (filtroFecha) {
                    const hoy = new Date();
                    const fechaMov = new Date(mov.fecha);
                    
                    switch (filtroFecha) {
                        case 'hoy':
                            if (fechaMov.toDateString() !== hoy.toDateString()) return false;
                            break;
                        case 'ayer':
                            const ayer = new Date(hoy);
                            ayer.setDate(hoy.getDate() - 1);
                            if (fechaMov.toDateString() !== ayer.toDateString()) return false;
                            break;
                        case 'semana':
                            const semanaAtras = new Date(hoy);
                            semanaAtras.setDate(hoy.getDate() - 7);
                            if (fechaMov < semanaAtras) return false;
                            break;
                        case 'mes':
                            const mesAtras = new Date(hoy);
                            mesAtras.setMonth(hoy.getMonth() - 1);
                            if (fechaMov < mesAtras) return false;
                            break;
                    }
                }
                
                return true;
            });
        }

        // Función para eliminar un movimiento del historial
        function eliminarMovimiento(indiceMovimiento) {
            if (indiceMovimiento < 0 || indiceMovimiento >= historial.length) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Movimiento no encontrado',
                    confirmButtonText: 'OK'
                });
                return;
            }

            const movimiento = historial[indiceMovimiento];
            
            // Mostrar información del movimiento a eliminar
            const infoMovimiento = `
                <div style="text-align: left; margin: 15px 0;">
                    <h4>📋 Información del Movimiento:</h4>
                    <p><strong>Fecha:</strong> ${new Date(movimiento.timestamp).toLocaleString('es-ES')}</p>
                    <p><strong>Tipo:</strong> ${movimiento.tipo.toUpperCase()}</p>
                    <p><strong>Producto:</strong> ${movimiento.producto}</p>
                    <p><strong>Cantidad:</strong> ${movimiento.cantidad}</p>
                    <p><strong>Sede:</strong> ${movimiento.sede}${movimiento.sedeDestino ? ' → ' + movimiento.sedeDestino : ''}</p>
                    <p><strong>Responsable:</strong> ${movimiento.responsable}</p>
                    ${movimiento.lote && movimiento.lote !== 'Sin lote' ? `<p><strong>Lote:</strong> ${movimiento.lote}</p>` : ''}
                </div>
            `;

            // Solicitar contraseña para eliminar
            Swal.fire({
                title: '🔐 Confirmar Eliminación',
                html: `
                    <div style="margin-bottom: 20px;">
                        <p style="color: #ff4757; font-weight: bold;">⚠️ Esta acción eliminará permanentemente el movimiento y actualizará el stock.</p>
                        ${infoMovimiento}
                    </div>
                    <div style="margin-top: 20px;">
                        <label for="password-eliminar" style="display: block; margin-bottom: 8px; font-weight: bold;">Contraseña de administrador:</label>
                        <input type="password" id="password-eliminar" class="swal2-input" placeholder="Ingresa la contraseña" style="width: 100%;">
                    </div>
                `,
                showCancelButton: true,
                confirmButtonText: '🗑️ ELIMINAR',
                cancelButtonText: '❌ CANCELAR',
                confirmButtonColor: '#ff4757',
                cancelButtonColor: '#6c757d',
                width: '600px',
                preConfirm: () => {
                    const password = document.getElementById('password-eliminar').value;
                    if (!password) {
                        Swal.showValidationMessage('Por favor ingresa la contraseña');
                        return false;
                    }
                    return password;
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    const password = result.value;
                    
                    // Validar contraseña (puedes cambiar esta contraseña)
                    if (password === 'PAE2024ADMIN') {
                        // Contraseña correcta, proceder con la eliminación
                        procesarEliminacionMovimiento(indiceMovimiento, movimiento);
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Contraseña Incorrecta',
                            text: 'La contraseña ingresada no es válida',
                            confirmButtonText: 'OK'
                        });
                    }
                }
            });
        }

        // Función para procesar la eliminación del movimiento
        function procesarEliminacionMovimiento(indiceMovimiento, movimiento) {
            try {
                // Revertir el movimiento en el inventario
                revertirMovimientoEnInventario(movimiento);
                
                // Eliminar del historial
                historial.splice(indiceMovimiento, 1);
                
                // Guardar cambios
                guardarDatos();
                
                // Recargar historial
                cargarHistorial();
                
                // Mostrar confirmación
                Swal.fire({
                    icon: 'success',
                    title: '✅ Movimiento Eliminado',
                    text: 'El movimiento ha sido eliminado exitosamente y el stock ha sido actualizado',
                    confirmButtonText: 'OK'
                });
                
                console.log('Movimiento eliminado:', movimiento);
                
            } catch (error) {
                console.error('Error al eliminar movimiento:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Ocurrió un error al eliminar el movimiento',
                    confirmButtonText: 'OK'
                });
            }
        }

        // Función para revertir un movimiento en el inventario
        function revertirMovimientoEnInventario(movimiento) {
            const claveInventario = Object.keys(inventario).find(clave => {
                const item = inventario[clave];
                return item.producto === movimiento.producto && item.sede === movimiento.sede;
            });

            if (claveInventario) {
                const itemInventario = inventario[claveInventario];
                
                if (movimiento.tipo === 'entrada') {
                    // Revertir entrada: restar cantidad
                    itemInventario.cantidad -= parseInt(movimiento.cantidad);
                    
                    // Si la cantidad queda en 0 o negativa, eliminar del inventario
                    if (itemInventario.cantidad <= 0) {
                        delete inventario[claveInventario];
                        
                        // También eliminar lotes asociados
                        if (lotes[claveInventario]) {
                            delete lotes[claveInventario];
                        }
                    } else {
                        // Actualizar lotes si es necesario
                        if (movimiento.lote && movimiento.lote !== 'Sin lote' && lotes[claveInventario]) {
                            const loteIndex = lotes[claveInventario].findIndex(lote => lote.lote === movimiento.lote);
                            if (loteIndex !== -1) {
                                lotes[claveInventario][loteIndex].cantidad -= parseInt(movimiento.cantidad);
                                
                                // Si el lote queda en 0, eliminarlo
                                if (lotes[claveInventario][loteIndex].cantidad <= 0) {
                                    lotes[claveInventario].splice(loteIndex, 1);
                                }
                                
                                // Si no quedan lotes, eliminar la entrada
                                if (lotes[claveInventario].length === 0) {
                                    delete lotes[claveInventario];
                                }
                            }
                        }
                    }
                    
                } else if (movimiento.tipo === 'salida') {
                    // Revertir salida: sumar cantidad
                    itemInventario.cantidad += parseInt(movimiento.cantidad);
                    
                    // Actualizar lotes si es necesario
                    if (movimiento.lote && movimiento.lote !== 'Sin lote' && lotes[claveInventario]) {
                        const loteIndex = lotes[claveInventario].findIndex(lote => lote.lote === movimiento.lote);
                        if (loteIndex !== -1) {
                            lotes[claveInventario][loteIndex].cantidad += parseInt(movimiento.cantidad);
                        } else {
                            // Si el lote no existe, crearlo
                            if (!lotes[claveInventario]) {
                                lotes[claveInventario] = [];
                            }
                            lotes[claveInventario].push({
                                lote: movimiento.lote,
                                cantidad: parseInt(movimiento.cantidad),
                                fechaVencimiento: movimiento.fechaVencimiento || 'Sin fecha'
                            });
                            
                            // Sincronizar lotes con Firebase
                            sincronizarLotesYFechasFirebase(claveInventario);
                        }
                    }
                    
                } else if (movimiento.tipo === 'devolucion') {
                    // Revertir devolución: restar cantidad (las devoluciones suman al inventario)
                    itemInventario.cantidad -= parseInt(movimiento.cantidad);
                    
                    // Si la cantidad queda en 0 o negativa, eliminar del inventario
                    if (itemInventario.cantidad <= 0) {
                        delete inventario[claveInventario];
                        
                        // También eliminar lotes asociados
                        if (lotes[claveInventario]) {
                            delete lotes[claveInventario];
                        }
                    }
                }
                
                console.log('Movimiento revertido en inventario:', movimiento.tipo, movimiento.cantidad, 'en', movimiento.sede);
            } else {
                console.warn('No se encontró el item en inventario para revertir:', movimiento);
            }
        }
        
        function filtrarPorProducto() {
            const input = document.getElementById('filtro-producto-historial');
            const sugerencias = document.getElementById('sugerencias-producto-historial');
            const valor = input.value.toLowerCase().trim();
            
            // Ocultar sugerencias si no hay texto
            if (!valor) {
                sugerencias.style.display = 'none';
                cargarHistorial(); // Recargar historial sin filtro
                return;
            }
            
            // Obtener productos únicos del historial
            const productosUnicos = [...new Set(historial.map(mov => mov.producto))];
            
            // Filtrar productos que coincidan
            const productosFiltrados = productosUnicos.filter(producto => 
                producto.toLowerCase().includes(valor)
            ).slice(0, 10); // Limitar a 10 sugerencias
            
            // Mostrar sugerencias
            if (productosFiltrados.length > 0) {
                sugerencias.innerHTML = '';
                productosFiltrados.forEach(producto => {
                    const div = document.createElement('div');
                    div.className = 'sugerencia-item';
                    div.textContent = producto;
                    div.onclick = () => {
                        input.value = producto;
                        sugerencias.style.display = 'none';
                        cargarHistorial(); // Recargar historial con el filtro
                    };
                    sugerencias.appendChild(div);
                });
                sugerencias.style.display = 'block';
            } else {
                sugerencias.style.display = 'none';
            }
            
            // Recargar historial con el filtro actual
            cargarHistorial();
        }
        
        function buscarLoteEnSedes() {
            const loteBuscar = document.getElementById('lote-buscar').value.trim();
            const productoFiltro = document.getElementById('producto-lote-buscar').value.toLowerCase().trim();
            const resultadoDiv = document.getElementById('resultado-busqueda-lotes');
            const infoDiv = document.getElementById('info-busqueda-lotes');
            const tablaDiv = document.getElementById('tabla-lotes-sedes');
            
            if (!loteBuscar) {
                mostrarMensaje('❌ Por favor ingresa un número de lote para buscar', 'error');
                return;
            }
            
            // Buscar el lote en todas las sedes
            const resultados = [];
            
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                const lotesProducto = lotes[clave] || [];
                
                // Filtrar por producto si se especifica
                if (productoFiltro && !item.producto.toLowerCase().includes(productoFiltro)) {
                    return;
                }
                
                // Buscar el lote en este producto
                lotesProducto.forEach(lote => {
                    if (lote.lote.toLowerCase().includes(loteBuscar.toLowerCase())) {
                        resultados.push({
                            sede: item.sede,
                            producto: item.producto,
                            cantidad: lote.cantidad,
                            lote: lote.lote,
                            fechaVencimiento: lote.fecha,
                            diasRestantes: lote.diasRestantes
                        });
                    }
                });
            });
            
            // Mostrar resultados
            if (resultados.length > 0) {
                // Agrupar por sede
                const resultadosPorSede = {};
                resultados.forEach(resultado => {
                    const key = `${resultado.sede}_${resultado.producto}_${resultado.lote}`;
                    if (!resultadosPorSede[key]) {
                        resultadosPorSede[key] = {
                            sede: resultado.sede,
                            producto: resultado.producto,
                            lote: resultado.lote,
                            cantidad: 0,
                            fechaVencimiento: resultado.fechaVencimiento,
                            diasRestantes: resultado.diasRestantes
                        };
                    }
                    resultadosPorSede[key].cantidad += resultado.cantidad;
                });
                
                // Generar HTML
                let html = '';
                Object.values(resultadosPorSede).forEach(resultado => {
                    const iconoPrioridad = resultado.diasRestantes <= 7 ? '🔴' : 
                                          resultado.diasRestantes <= 30 ? '🟡' : '🟢';
                    
                    html += `
                        <div class="lote-sede-item">
                            <div class="lote-sede-header">
                                <div class="lote-sede-sede">🏢 ${resultado.sede}</div>
                                <div class="lote-sede-cantidad">📦 ${resultado.cantidad} unidades</div>
                            </div>
                            <div class="lote-sede-detalles">
                                <div class="lote-sede-detalle">
                                    <span class="icono">📦</span>
                                    <span><strong>Lote:</strong> ${resultado.lote}</span>
                                </div>
                                <div class="lote-sede-detalle">
                                    <span class="icono">📅</span>
                                    <span><strong>Vence:</strong> ${resultado.fechaVencimiento}</span>
                                </div>
                                <div class="lote-sede-detalle">
                                    <span class="icono">${iconoPrioridad}</span>
                                    <span><strong>Días restantes:</strong> ${resultado.diasRestantes}</span>
                                </div>
                                <div class="lote-sede-detalle">
                                    <span class="icono">🏷️</span>
                                    <span><strong>Producto:</strong> ${resultado.producto}</span>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                infoDiv.innerHTML = `🔍 Lote "${loteBuscar}" encontrado en ${Object.keys(resultadosPorSede).length} ubicación(es)`;
                tablaDiv.innerHTML = html;
                resultadoDiv.style.display = 'block';
                
            } else {
                infoDiv.innerHTML = `❌ No se encontró el lote "${loteBuscar}" en ninguna sede`;
                tablaDiv.innerHTML = '<div class="mensaje-info">No hay productos con este lote en el inventario</div>';
                resultadoDiv.style.display = 'block';
            }
        }
        
        function limpiarBusquedaLote() {
            document.getElementById('lote-buscar').value = '';
            document.getElementById('producto-lote-buscar').value = '';
            document.getElementById('resultado-busqueda-lotes').style.display = 'none';
            document.getElementById('sugerencias-lote-buscar').style.display = 'none';
        }
        
        function mostrarTodosLosLotes() {
            const resultadoDiv = document.getElementById('resultado-busqueda-lotes');
            const infoDiv = document.getElementById('info-busqueda-lotes');
            const tablaDiv = document.getElementById('tabla-lotes-sedes');
            
            // Obtener todos los lotes del inventario
            const todosLosLotes = [];
            
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                const lotesProducto = lotes[clave] || [];
                
                lotesProducto.forEach(lote => {
                    todosLosLotes.push({
                        sede: item.sede,
                        producto: item.producto,
                        lote: lote.lote,
                        cantidad: lote.cantidad,
                        fechaVencimiento: lote.fecha,
                        diasRestantes: lote.diasRestantes
                    });
                });
            });
            
            if (todosLosLotes.length > 0) {
                // Agrupar por lote
                const lotesAgrupados = {};
                todosLosLotes.forEach(lote => {
                    const key = `${lote.lote}_${lote.producto}`;
                    if (!lotesAgrupados[key]) {
                        lotesAgrupados[key] = {
                            lote: lote.lote,
                            producto: lote.producto,
                            sedes: [],
                            cantidadTotal: 0,
                            fechaVencimiento: lote.fechaVencimiento,
                            diasRestantes: lote.diasRestantes
                        };
                    }
                    lotesAgrupados[key].sedes.push({
                        sede: lote.sede,
                        cantidad: lote.cantidad
                    });
                    lotesAgrupados[key].cantidadTotal += lote.cantidad;
                });
                
                // Generar HTML
                let html = '';
                Object.values(lotesAgrupados).forEach(lote => {
                    const iconoPrioridad = lote.diasRestantes <= 7 ? '🔴' : 
                                          lote.diasRestantes <= 30 ? '🟡' : '🟢';
                    
                    html += `
                        <div class="lote-sede-item">
                            <div class="lote-sede-header">
                                <div class="lote-sede-sede">📦 Lote: ${lote.lote}</div>
                                <div class="lote-sede-cantidad">📊 ${lote.cantidadTotal} unidades total</div>
                            </div>
                            <div class="lote-sede-detalles">
                                <div class="lote-sede-detalle">
                                    <span class="icono">🏷️</span>
                                    <span><strong>Producto:</strong> ${lote.producto}</span>
                                </div>
                                <div class="lote-sede-detalle">
                                    <span class="icono">📅</span>
                                    <span><strong>Vence:</strong> ${lote.fechaVencimiento}</span>
                                </div>
                                <div class="lote-sede-detalle">
                                    <span class="icono">${iconoPrioridad}</span>
                                    <span><strong>Días restantes:</strong> ${lote.diasRestantes}</span>
                                </div>
                                <div class="lote-sede-detalle">
                                    <span class="icono">🏢</span>
                                    <span><strong>Sedes:</strong> ${lote.sedes.length}</span>
                                </div>
                            </div>
                            <div style="margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee;">
                                <strong>📍 Distribución por sedes:</strong><br>
                                ${lote.sedes.map(sede => `• ${sede.sede}: ${sede.cantidad} unidades`).join('<br>')}
                            </div>
                        </div>
                    `;
                });
                
                infoDiv.innerHTML = `📋 Mostrando todos los ${Object.keys(lotesAgrupados).length} lotes en el inventario`;
                tablaDiv.innerHTML = html;
                resultadoDiv.style.display = 'block';
                
            } else {
                infoDiv.innerHTML = '❌ No hay lotes registrados en el inventario';
                tablaDiv.innerHTML = '<div class="mensaje-info">No hay productos con lotes en el inventario</div>';
                resultadoDiv.style.display = 'block';
            }
        }
        
        function exportarLotesExcel() {
            const loteBuscar = document.getElementById('lote-buscar').value.trim();
            const productoFiltro = document.getElementById('producto-lote-buscar').value.toLowerCase().trim();
            
            // Obtener datos para exportar
            let datos = [];
            
            if (loteBuscar) {
                // Exportar búsqueda específica
                Object.keys(inventario).forEach(clave => {
                    const item = inventario[clave];
                    const lotesProducto = lotes[clave] || [];
                    
                    if (productoFiltro && !item.producto.toLowerCase().includes(productoFiltro)) {
                        return;
                    }
                    
                    lotesProducto.forEach(lote => {
                        if (lote.lote.toLowerCase().includes(loteBuscar.toLowerCase())) {
                            // Recalcular días restantes si no existe
                            let diasRestantes = lote.diasRestantes;
                            if (diasRestantes === null || diasRestantes === undefined) {
                                if (lote.fechaVencimiento && lote.fechaVencimiento !== 'Sin fecha') {
                                    const fechaVenc = new Date(lote.fechaVencimiento);
                                    const hoy = new Date();
                                    diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                                }
                            }
                            
                            datos.push({
                                'Producto': item.producto,
                                'Cantidad': lote.cantidad,
                                'Fecha': new Date().toISOString().split('T')[0], // Fecha actual
                                'Lote': lote.lote,
                                'Fecha de Vencimiento': lote.fechaVencimiento || lote.fecha || 'N/A',
                                'Sede': item.sede,
                                'Días Restantes': diasRestantes || 'N/A'
                            });
                        }
                    });
                });
            } else {
                // Exportar todos los lotes
                Object.keys(inventario).forEach(clave => {
                    const item = inventario[clave];
                    const lotesProducto = lotes[clave] || [];
                    
                    lotesProducto.forEach(lote => {
                        // Recalcular días restantes si no existe
                        let diasRestantes = lote.diasRestantes;
                        if (diasRestantes === null || diasRestantes === undefined) {
                            if (lote.fechaVencimiento && lote.fechaVencimiento !== 'Sin fecha') {
                                const fechaVenc = new Date(lote.fechaVencimiento);
                                const hoy = new Date();
                                diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                            }
                        }
                        
                        datos.push({
                            'Producto': item.producto,
                            'Cantidad': lote.cantidad,
                            'Fecha': new Date().toISOString().split('T')[0], // Fecha actual
                            'Lote': lote.lote,
                            'Fecha de Vencimiento': lote.fechaVencimiento || lote.fecha || 'N/A',
                            'Sede': item.sede,
                            'Días Restantes': diasRestantes || 'N/A'
                        });
                    });
                });
            }
            
            if (datos.length === 0) {
                mostrarMensaje('❌ No hay datos para exportar', 'error');
                return;
            }
            
            // Crear workbook y worksheet
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.json_to_sheet(datos);
            
            // Ajustar ancho de columnas
            const colWidths = [
                { wch: 30 }, // Producto
                { wch: 10 }, // Cantidad
                { wch: 12 }, // Fecha
                { wch: 15 }, // Lote
                { wch: 15 }, // Fecha de Vencimiento
                { wch: 25 }, // Sede
                { wch: 15 }  // Días Restantes
            ];
            ws['!cols'] = colWidths;
            
            // Agregar worksheet al workbook
            XLSX.utils.book_append_sheet(wb, ws, 'Lotes por Sedes');
            
            // Generar nombre del archivo
            const fecha = new Date().toISOString().split('T')[0];
            const nombreArchivo = loteBuscar ? 
                `Lotes_${loteBuscar}_${fecha}.xlsx` : 
                `Todos_Lotes_${fecha}.xlsx`;
            
            // Descargar archivo
            XLSX.writeFile(wb, nombreArchivo);
            
            mostrarMensaje('✅ Archivo Excel exportado correctamente', 'exito');
        }
        
        function cargarStock() {
            // Redirigir a mostrarStockActual para mantener consistencia
            mostrarStockActual();
        }
        
        function filtrarStock() {
            const input = document.getElementById('filtro-producto-stock');
            const sugerencias = document.getElementById('sugerencias-producto-stock');
            const valor = input.value.toLowerCase().trim();
            
            // Ocultar sugerencias si no hay texto
            if (!valor) {
                sugerencias.style.display = 'none';
                mostrarStockActual(); // Recargar stock sin filtro
                return;
            }
            
            // Obtener productos únicos del inventario
            const productosUnicos = [...new Set(Object.values(inventario).map(item => item.producto))];
            
            // Filtrar productos que coincidan
            const productosFiltrados = productosUnicos.filter(producto => 
                producto.toLowerCase().includes(valor)
            ).slice(0, 10); // Limitar a 10 sugerencias
            
            // Mostrar sugerencias
            if (productosFiltrados.length > 0) {
                sugerencias.innerHTML = '';
                productosFiltrados.forEach(producto => {
                    const div = document.createElement('div');
                    div.className = 'sugerencia-item';
                    div.textContent = producto;
                    div.onclick = () => {
                        input.value = producto;
                        sugerencias.style.display = 'none';
                        mostrarStockActual(); // Recargar stock con el filtro
                    };
                    sugerencias.appendChild(div);
                });
                sugerencias.style.display = 'block';
            } else {
                sugerencias.style.display = 'none';
            }
            
            // Recargar stock con el filtro actual
            mostrarStockActual();
        }
        
        function limpiarFiltroStock() {
            document.getElementById('filtro-producto-stock').value = '';
            document.getElementById('filtro-sede-stock').value = '';
            document.getElementById('filtro-prioridad-stock').value = '';
            document.getElementById('sugerencias-producto-stock').style.display = 'none';
            mostrarStockActual(); // Recargar stock sin filtros
        }
        
        function exportarStockExcel() {
            // Mostrar loading
            Swal.fire({
                title: '📊 Exportando a Excel...',
                text: 'Preparando los datos del inventario',
                icon: 'info',
                allowOutsideClick: false,
                showConfirmButton: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            const filtroProducto = document.getElementById('filtro-producto-stock').value.toLowerCase().trim();
            const filtroSede = document.getElementById('filtro-sede-stock').value;
            const filtroPrioridad = document.getElementById('filtro-prioridad-stock').value;
            
            // Obtener datos para exportar
            let datos = [];
            
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                const lotesProducto = lotes[clave] || [];
                
                // No exportar productos con stock en 0
                if (item.cantidad <= 0) {
                    return;
                }
                
                // Aplicar filtros
                if (filtroProducto && !item.producto.toLowerCase().includes(filtroProducto)) {
                    return;
                }
                
                if (filtroSede && item.sede !== filtroSede) {
                    return;
                }
                
                if (filtroPrioridad && lotesProducto.length > 0) {
                    const tienePrioridad = lotesProducto.some(lote => {
                        switch (filtroPrioridad) {
                            case 'urgente':
                                return lote.diasRestantes <= 7;
                            case 'pronto':
                                return lote.diasRestantes > 7 && lote.diasRestantes <= 30;
                            case 'atencion':
                                return lote.diasRestantes > 30;
                            case 'sin-vencimiento':
                                return lote.diasRestantes === undefined || lote.diasRestantes === null;
                            default:
                                return true;
                        }
                    });
                    
                    if (!tienePrioridad) {
                        return;
                    }
                }
                
                if (lotesProducto.length > 0) {
                    // Exportar cada lote por separado
                    lotesProducto.forEach(lote => {
                        // Recalcular días restantes si no existe
                        let diasRestantes = lote.diasRestantes;
                        if (diasRestantes === null || diasRestantes === undefined) {
                            if (lote.fechaVencimiento && lote.fechaVencimiento !== 'Sin fecha') {
                                const fechaVenc = new Date(lote.fechaVencimiento);
                                const hoy = new Date();
                                diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                            }
                        }
                        
                        let prioridad = 'Sin vencimiento';
                        if (diasRestantes !== undefined && diasRestantes !== null) {
                            if (diasRestantes <= 7) {
                                prioridad = `Urgente (${diasRestantes} días)`;
                            } else if (diasRestantes <= 30) {
                                prioridad = `Pronto (${diasRestantes} días)`;
                            } else {
                                prioridad = `Atención (${diasRestantes} días)`;
                            }
                        }
                        
                        datos.push({
                            'Producto': item.producto,
                            'Cantidad': lote.cantidad,
                            'Fecha': new Date().toISOString().split('T')[0], // Fecha actual
                            'Lote': lote.lote,
                            'Fecha de Vencimiento': lote.fechaVencimiento || lote.fecha || 'N/A',
                            'Sede': item.sede,
                            'Días Restantes': diasRestantes || 'N/A',
                            'Prioridad': prioridad
                        });
                    });
                } else {
                    // Producto sin lotes
                    datos.push({
                        'Producto': item.producto,
                        'Cantidad': item.cantidad,
                        'Fecha': new Date().toISOString().split('T')[0], // Fecha actual
                        'Lote': 'N/A',
                        'Fecha de Vencimiento': 'N/A',
                        'Sede': item.sede,
                        'Prioridad': 'Sin lotes'
                    });
                }
            });
            
            if (datos.length === 0) {
                mostrarMensaje('❌ No hay datos para exportar', 'error');
                return;
            }
            
            // Crear workbook y worksheet
            const wb = XLSX.utils.book_new();
            const ws = XLSX.utils.json_to_sheet(datos);
            
            // Ajustar ancho de columnas
            const colWidths = [
                { wch: 30 }, // Producto
                { wch: 25 }, // Sede
                { wch: 15 }, // Lote
                { wch: 10 }, // Cantidad
                { wch: 15 }, // Fecha Vencimiento
                { wch: 15 }, // Días Restantes
                { wch: 20 }  // Prioridad
            ];
            ws['!cols'] = colWidths;
            
            // Agregar worksheet al workbook
            XLSX.utils.book_append_sheet(wb, ws, 'Stock Actual');
            
            // Generar nombre del archivo
            const fecha = new Date().toISOString().split('T')[0];
            const nombreArchivo = `Stock_Actual_${fecha}.xlsx`;
            
            // Descargar archivo
            XLSX.writeFile(wb, nombreArchivo);
            
            // Mostrar mensaje de éxito
            Swal.fire({
                title: '✅ Exportación Exitosa',
                text: `Archivo Excel generado: ${nombreArchivo}`,
                icon: 'success',
                confirmButtonText: 'OK',
                confirmButtonColor: '#4CAF50'
            });
        }
        
        function mostrarResumenStock() {
            const totalProductos = Object.keys(inventario).length;
            const totalUnidades = Object.values(inventario).reduce((sum, item) => sum + item.cantidad, 0);
            
            let productosConLotes = 0;
            let productosSinLotes = 0;
            let lotesUrgentes = 0;
            let lotesProntos = 0;
            let lotesAtencion = 0;
            
            Object.keys(inventario).forEach(clave => {
                const lotesProducto = lotes[clave] || [];
                if (lotesProducto.length > 0) {
                    productosConLotes++;
                    lotesProducto.forEach(lote => {
                        if (lote.diasRestantes !== undefined && lote.diasRestantes !== null) {
                            if (lote.diasRestantes <= 7) {
                                lotesUrgentes++;
                            } else if (lote.diasRestantes <= 30) {
                                lotesProntos++;
                            } else {
                                lotesAtencion++;
                            }
                        }
                    });
                } else {
                    productosSinLotes++;
                }
            });
            
            const mensaje = `
                <div style="text-align: left; line-height: 1.6;">
                    <h3>📊 RESUMEN DEL INVENTARIO</h3>
                    <p><strong>📦 Total de productos:</strong> ${totalProductos}</p>
                    <p><strong>📊 Total de unidades:</strong> ${totalUnidades}</p>
                    <p><strong>📋 Productos con lotes:</strong> ${productosConLotes}</p>
                    <p><strong>📝 Productos sin lotes:</strong> ${productosSinLotes}</p>
                    <br>
                    <h4>⏰ LOTES POR PRIORIDAD:</h4>
                    <p><strong>🔴 Urgentes (≤ 7 días):</strong> ${lotesUrgentes}</p>
                    <p><strong>🟡 Prontos (8-30 días):</strong> ${lotesProntos}</p>
                    <p><strong>🟢 Atención (> 30 días):</strong> ${lotesAtencion}</p>
                </div>
            `;
            
            Swal.fire({
                title: '📊 Resumen del Inventario',
                html: mensaje,
                icon: 'info',
                confirmButtonText: '✅ ENTENDIDO',
                width: '500px'
            });
        }
        
        
        function probarReporteMensual() {
            console.log('🔧 Función de prueba ejecutada');
            console.log('📊 Historial actual:', historial);
            console.log('📅 Campo mes-reporte:', document.getElementById('mes-reporte'));
            console.log('📅 Valor del campo:', document.getElementById('mes-reporte').value);
            
            // Intentar generar reporte
            generarReporteMensual();
        }
        
        // Nueva función para cargar productos filtrados por sede
        function cargarProductosPorSede() {
            console.log('🔄 cargarProductosPorSede() ejecutada');
            
            const sedeSeleccionada = document.getElementById('sede-salida').value;
            const campoProducto = document.getElementById('campo-producto-salida');
            const campoCantidad = document.getElementById('campo-cantidad-salida');
            const campoAgregar = document.getElementById('campo-agregar-salida');
            const campoDestino = document.getElementById('campo-destino');
            const campoCupos = document.getElementById('campo-cupos-modalidad');
            
            console.log('📍 Sede seleccionada:', sedeSeleccionada);
            console.log('🎯 Campos encontrados:', {
                campoProducto: !!campoProducto,
                campoCantidad: !!campoCantidad,
                campoAgregar: !!campoAgregar,
                campoDestino: !!campoDestino,
                campoCupos: !!campoCupos
            });
            
            // Mostrar u ocultar el campo de cupos según la sede seleccionada
            if (campoCupos) {
                if (sedeSeleccionada === 'BODEGA CENTRAL') {
                    campoCupos.style.display = 'none';
                    console.log('🏢 Campo de cupos ocultado para BODEGA CENTRAL');
                } else {
                    campoCupos.style.display = 'block';
                    console.log('🏫 Campo de cupos mostrado para sede:', sedeSeleccionada);
                }
            }
            
            // Limpiar campos
            const inputProducto = document.getElementById('producto-salida');
            const inputCantidad = document.getElementById('cantidad-salida');
            const divSugerencias = document.getElementById('sugerencias-salida');
            
            if (inputProducto) inputProducto.value = '';
            if (inputCantidad) inputCantidad.value = '';
            if (divSugerencias) divSugerencias.style.display = 'none';
            
            if (sedeSeleccionada) {
                console.log('✅ Mostrando campos para sede:', sedeSeleccionada);
                
                // Mostrar campos de producto
                if (campoProducto) campoProducto.style.display = 'block';
                if (campoCantidad) campoCantidad.style.display = 'block';
                if (campoAgregar) campoAgregar.style.display = 'block';
                
                // Mostrar campo de destino si es BODEGA CENTRAL
                if (sedeSeleccionada === 'BODEGA CENTRAL') {
                    if (campoDestino) campoDestino.style.display = 'block';
                    console.log('🏢 Mostrando campo de destino para BODEGA CENTRAL');
                } else {
                    if (campoDestino) campoDestino.style.display = 'none';
                    console.log('🏢 Ocultando campo de destino para sede:', sedeSeleccionada);
                }
                
                // Para PAQUETES y CLEI, usar productos de BODEGA CENTRAL
                let sedeParaAutocompletado = sedeSeleccionada;
                if (sedeSeleccionada === 'PAQUETES' || sedeSeleccionada === 'CLEI') {
                    sedeParaAutocompletado = 'BODEGA CENTRAL';
                    console.log('📦 Usando productos de BODEGA CENTRAL para:', sedeSeleccionada);
                }
                
                // Inicializar autocompletado para esta sede
                try {
                    inicializarAutocompletadoSalida(sedeParaAutocompletado);
                    console.log('🔍 Autocompletado inicializado para:', sedeParaAutocompletado);
                } catch (error) {
                    console.error('❌ Error al inicializar autocompletado:', error);
                }
                
                console.log(`📦 Productos cargados para sede: ${sedeSeleccionada}`);
            } else {
                console.log('❌ No hay sede seleccionada, ocultando campos');
                
                // Ocultar todos los campos si no hay sede seleccionada
                if (campoProducto) campoProducto.style.display = 'none';
                if (campoCantidad) campoCantidad.style.display = 'none';
                if (campoAgregar) campoAgregar.style.display = 'none';
                if (campoDestino) campoDestino.style.display = 'none';
            }
        }

        // Función para inicializar autocompletado específico para salida
        function inicializarAutocompletadoSalida(sede) {
            const input = document.getElementById('producto-salida');
            const sugerenciasDiv = document.getElementById('sugerencias-salida');
            let sugerenciasActuales = [];
            let indiceSeleccionado = -1;
            
            // Limpiar eventos anteriores
            input.removeEventListener('input', input._inputHandler);
            input.removeEventListener('keydown', input._keydownHandler);
            
            // Función para filtrar productos por sede
            function filtrarProductosPorSede(valor) {
                const productosFiltrados = [];
                
                Object.keys(inventario).forEach(clave => {
                    const item = inventario[clave];
                    if (item.sede === sede && item.cantidad > 0) {
                        if (item.producto.toLowerCase().includes(valor.toLowerCase())) {
                            productosFiltrados.push({
                                clave: clave,
                                producto: item.producto,
                                cantidad: item.cantidad,
                                sede: item.sede
                            });
                        }
                    }
                });
                
                return productosFiltrados;
            }
            
            // Handler para input
            const inputHandler = function(e) {
                const valor = e.target.value;
                
                if (valor.length < 2) {
                    sugerenciasDiv.style.display = 'none';
                    return;
                }
                
                // Buscar productos que coincidan en la sede seleccionada
                sugerenciasActuales = filtrarProductosPorSede(valor);
                
                // Mostrar sugerencias
                mostrarSugerenciasSalida(sugerenciasActuales, sugerenciasDiv);
                indiceSeleccionado = -1;
            };
            
            // Handler para teclado
            const keydownHandler = function(e) {
                if (sugerenciasDiv.style.display === 'none') return;
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    indiceSeleccionado = Math.min(indiceSeleccionado + 1, sugerenciasActuales.length - 1);
                    actualizarSeleccionSalida(sugerenciasDiv, indiceSeleccionado);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    indiceSeleccionado = Math.max(indiceSeleccionado - 1, -1);
                    actualizarSeleccionSalida(sugerenciasDiv, indiceSeleccionado);
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (indiceSeleccionado >= 0 && sugerenciasActuales[indiceSeleccionado]) {
                        seleccionarProductoSalida(sugerenciasActuales[indiceSeleccionado]);
                    }
                } else if (e.key === 'Escape') {
                    sugerenciasDiv.style.display = 'none';
                }
            };
            
            // Asignar handlers
            input._inputHandler = inputHandler;
            input._keydownHandler = keydownHandler;
            input.addEventListener('input', inputHandler);
            input.addEventListener('keydown', keydownHandler);
            
            // Cerrar sugerencias al hacer clic fuera
            document.addEventListener('click', function(e) {
                if (!input.contains(e.target) && !sugerenciasDiv.contains(e.target)) {
                    sugerenciasDiv.style.display = 'none';
                }
            });
        }

        // Función para mostrar sugerencias específicas para salida
        function mostrarSugerenciasSalida(sugerencias, contenedor) {
            console.log('🔍 Mostrando sugerencias:', sugerencias.length, 'productos encontrados');
            
            if (sugerencias.length === 0) {
                contenedor.innerHTML = '<div class="sugerencia-item">❌ No hay productos disponibles en esta sede</div>';
                contenedor.style.display = 'block';
                return;
            }
            
            let html = '';
            sugerencias.slice(0, 8).forEach((sugerencia, index) => {
                // Obtener información de lotes si existe
                let infoLotes = '';
                if (fechasVencimiento[sugerencia.clave] && fechasVencimiento[sugerencia.clave].length > 0) {
                    const lotes = fechasVencimiento[sugerencia.clave];
                    const loteUrgente = lotes.find(l => {
                        const diasRestantes = Math.ceil((new Date(l.fecha) - new Date()) / (1000 * 60 * 60 * 24));
                        return diasRestantes <= 3;
                    });
                    
                    if (loteUrgente) {
                        infoLotes = ' 🔴 Lote próximo a vencer';
                    } else {
                        infoLotes = ' 🟢 Lotes disponibles';
                    }
                }
                
                html += `
                    <div class="sugerencia-item" onclick="seleccionarProductoSalida(${JSON.stringify(sugerencia).replace(/"/g, '&quot;')})">
                        <div><strong>${sugerencia.producto}</strong></div>
                        <div class="sugerencia-categoria">📦 ${sugerencia.cantidad} disponibles${infoLotes}</div>
                    </div>
                `;
            });
            
            contenedor.innerHTML = html;
            contenedor.style.display = 'block';
            
            console.log('✅ Sugerencias mostradas correctamente');
        }

        // Función para actualizar selección visual
        function actualizarSeleccionSalida(contenedor, indice) {
            const items = contenedor.querySelectorAll('.sugerencia-item');
            items.forEach((item, i) => {
                if (i === indice) {
                    item.classList.add('seleccionada');
                } else {
                    item.classList.remove('seleccionada');
                }
            });
        }

        // Función para seleccionar un producto
        function seleccionarProductoSalida(producto) {
            console.log('🎯 Producto seleccionado:', producto);
            document.getElementById('producto-salida').value = producto.producto;
            document.getElementById('sugerencias-salida').style.display = 'none';
            
            // Mostrar información rápida de lotes si existe
            mostrarInfoRapidaLotes(producto.clave);
        }

        // Función de prueba para verificar el funcionamiento
        function probarSalida() {
            console.log('🧪 Iniciando prueba de la sección de salida...');
            
            // Verificar elementos
            const elementos = {
                'sede-salida': document.getElementById('sede-salida'),
                'campo-producto-salida': document.getElementById('campo-producto-salida'),
                'producto-salida': document.getElementById('producto-salida'),
                'sugerencias-salida': document.getElementById('sugerencias-salida'),
                'campo-cantidad-salida': document.getElementById('campo-cantidad-salida'),
                'campo-agregar-salida': document.getElementById('campo-agregar-salida')
            };
            
            console.log('📋 Elementos encontrados:');
            Object.keys(elementos).forEach(id => {
                console.log(`  ${id}:`, elementos[id] ? '✅' : '❌');
            });
            
            // Verificar inventario
            console.log('📦 Inventario disponible:', Object.keys(inventario).length, 'productos');
            
            // Simular selección de sede
            if (elementos['sede-salida']) {
                elementos['sede-salida'].value = 'BODEGA CENTRAL';
                console.log('🏢 Sede seleccionada: BODEGA CENTRAL');
                cargarProductosPorSede();
            }
            
            // Verificar productos disponibles en BODEGA CENTRAL
            const productosBodega = Object.keys(inventario).filter(clave => {
                const item = inventario[clave];
                return item.sede === 'BODEGA CENTRAL' && item.cantidad > 0;
            });
            
            console.log('📦 Productos disponibles en BODEGA CENTRAL:', productosBodega.length);
            productosBodega.slice(0, 5).forEach(clave => {
                const item = inventario[clave];
                console.log(`  - ${item.producto}: ${item.cantidad} unidades`);
            });
        }

        // Función específica para probar CARNE DE CERDO
        function probarCarneCerdo() {
            console.log('🥩 Probando CARNE DE CERDO...');
            
            // Buscar productos que contengan "cerdo" o "carne"
            const productosCerdo = Object.keys(inventario).filter(clave => {
                const item = inventario[clave];
                return item.producto.toLowerCase().includes('cerdo') || 
                       item.producto.toLowerCase().includes('carne');
            });
            
            console.log('🥩 Productos relacionados con cerdo/carne encontrados:');
            productosCerdo.forEach(clave => {
                const item = inventario[clave];
                console.log(`  - ${item.producto} (${item.sede}): ${item.cantidad} unidades`);
            });
            
            // Buscar en todas las sedes
            console.log('🔍 Buscando en todas las sedes...');
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                if (item.producto.toLowerCase().includes('cerdo') || 
                    item.producto.toLowerCase().includes('carne')) {
                    console.log(`  - ${item.producto} (${item.sede}): ${item.cantidad} unidades`);
                }
            });
        }

        // Función para verificar productos duplicados o similares
        function verificarProductosDuplicados() {
            console.log('🔍 Verificando productos duplicados o similares...');
            
            const nombresProductos = {};
            const productosSimilares = [];
            
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                const nombre = item.producto.toLowerCase().trim();
                
                if (nombresProductos[nombre]) {
                    productosSimilares.push({
                        nombre: nombre,
                        clave1: nombresProductos[nombre],
                        clave2: clave,
                        sede1: inventario[nombresProductos[nombre]].sede,
                        sede2: item.sede
                    });
                } else {
                    nombresProductos[nombre] = clave;
                }
            });
            
            if (productosSimilares.length > 0) {
                console.log('⚠️ Productos duplicados encontrados:');
                productosSimilares.forEach(dup => {
                    console.log(`  - "${dup.nombre}"`);
                    console.log(`    Clave 1: ${dup.clave1} (${dup.sede1})`);
                    console.log(`    Clave 2: ${dup.clave2} (${dup.sede2})`);
                });
            } else {
                console.log('✅ No se encontraron productos duplicados');
            }
            
            return productosSimilares;
        }

        // Función para verificar el estado actual del sistema de salidas
        function verificarEstadoSalidas() {
            console.log('🔍 VERIFICANDO ESTADO ACTUAL DEL SISTEMA DE SALIDAS');
            console.log('================================================');
            
            // Verificar elementos del formulario
            console.log('📋 ELEMENTOS DEL FORMULARIO:');
            const elementos = {
                'sede-salida': document.getElementById('sede-salida'),
                'producto-salida': document.getElementById('producto-salida'),
                'cantidad-salida': document.getElementById('cantidad-salida'),
                'sede-destino': document.getElementById('sede-destino'),
                'tipo-uso': document.getElementById('tipo-uso'),
                'responsable-salida': document.getElementById('responsable-salida'),
                'cupos-modalidad': document.getElementById('cupos-modalidad')
            };
            
            Object.keys(elementos).forEach(id => {
                const elemento = elementos[id];
                if (elemento) {
                    console.log(`  ✅ ${id}: "${elemento.value}"`);
                } else {
                    console.log(`  ❌ ${id}: NO ENCONTRADO`);
                }
            });
            
            // Verificar productos seleccionados
            console.log('\n📦 PRODUCTOS SELECCIONADOS PARA SALIDA:');
            if (productosSeleccionadosSalida.length === 0) {
                console.log('  - No hay productos seleccionados');
            } else {
                productosSeleccionadosSalida.forEach((producto, index) => {
                    console.log(`  ${index + 1}. ${producto.producto}`);
                    console.log(`     - Clave: ${producto.clave}`);
                    console.log(`     - Cantidad: ${producto.cantidad}`);
                    console.log(`     - Sede: ${producto.sede}`);
                    console.log(`     - Tipo Uso: ${producto.tipoUso}`);
                    console.log(`     - Responsable: ${producto.responsable}`);
                    console.log(`     - Sede Destino: ${producto.sedeDestino}`);
                    console.log(`     - Cupos: ${producto.cupos}`);
                });
            }
            
            // Verificar inventario
            console.log('\n📦 INVENTARIO ACTUAL:');
            const totalProductos = Object.keys(inventario).length;
            console.log(`  - Total de productos en inventario: ${totalProductos}`);
            
            // Mostrar algunos productos de ejemplo
            const productosEjemplo = Object.keys(inventario).slice(0, 5);
            productosEjemplo.forEach(clave => {
                const item = inventario[clave];
                console.log(`  - ${item.producto} (${item.sede}): ${item.cantidad} unidades`);
            });
            
            console.log('================================================');
        }

        // Función para limpiar la lista de productos seleccionados
        function limpiarListaProductosSeleccionados() {
            console.log('🧹 LIMPIANDO LISTA DE PRODUCTOS SELECCIONADOS');
            console.log('📋 Productos antes de limpiar:', productosSeleccionadosSalida.length);
            
            productosSeleccionadosSalida = [];
            
            // Actualizar la interfaz
            const container = document.getElementById('productos-seleccionados');
            const listaContainer = document.getElementById('lista-productos-salida');
            
            if (container) {
                container.innerHTML = '';
            }
            
            if (listaContainer) {
                listaContainer.style.display = 'none';
            }
            
            console.log('✅ Lista limpiada correctamente');
        }

        // Función para hacer una salida simple (sin agregar a la lista)
        function hacerSalidaSimple() {
            console.log('🔄 HACIENDO SALIDA SIMPLE');
            
            // Limpiar lista de productos seleccionados
            limpiarListaProductosSeleccionados();
            
            // Ejecutar salida individual
            registrarSalida();
        }

        // Función para verificar y corregir datos incorrectos en la lista
        function verificarDatosLista() {
            console.log('🔍 VERIFICANDO DATOS EN LA LISTA DE PRODUCTOS');
            
            if (productosSeleccionadosSalida.length === 0) {
                console.log('✅ Lista vacía, no hay datos que verificar');
                return;
            }
            
            productosSeleccionadosSalida.forEach((producto, index) => {
                console.log(`\n📦 Producto ${index + 1}:`);
                console.log(`  - Nombre: "${producto.producto}"`);
                console.log(`  - Clave: "${producto.clave}"`);
                console.log(`  - Sede: "${producto.sede}"`);
                console.log(`  - Tipo Uso: "${producto.tipoUso}"`);
                console.log(`  - Responsable: "${producto.responsable}"`);
                
                // Verificar si el producto existe en el inventario
                if (inventario[producto.clave]) {
                    const itemInventario = inventario[producto.clave];
                    console.log(`  ✅ Producto existe en inventario:`);
                    console.log(`     - Nombre real: "${itemInventario.producto}"`);
                    console.log(`     - Sede real: "${itemInventario.sede}"`);
                    console.log(`     - Cantidad disponible: ${itemInventario.cantidad}`);
                    
                    // Verificar si los datos coinciden
                    if (producto.producto !== itemInventario.producto) {
                        console.log(`  ⚠️ NOMBRE INCORRECTO: "${producto.producto}" vs "${itemInventario.producto}"`);
                    }
                    if (producto.sede !== itemInventario.sede) {
                        console.log(`  ⚠️ SEDE INCORRECTA: "${producto.sede}" vs "${itemInventario.sede}"`);
                    }
                } else {
                    console.log(`  ❌ PRODUCTO NO EXISTE EN INVENTARIO`);
                }
            });
        }

        // Función para verificar la estructura del inventario
        function verificarInventario() {
            console.log('🔍 VERIFICANDO ESTRUCTURA DEL INVENTARIO');
            console.log('=====================================');
            
            const totalProductos = Object.keys(inventario).length;
            console.log(`📦 Total de productos en inventario: ${totalProductos}`);
            
            if (totalProductos === 0) {
                console.log('❌ El inventario está vacío');
                return;
            }
            
            // Mostrar algunos productos de ejemplo
            console.log('\n📋 PRIMEROS 10 PRODUCTOS EN INVENTARIO:');
            const claves = Object.keys(inventario);
            claves.slice(0, 10).forEach((clave, index) => {
                const item = inventario[clave];
                console.log(`  ${index + 1}. Clave: "${clave}"`);
                console.log(`     - Producto: "${item.producto}"`);
                console.log(`     - Sede: "${item.sede}"`);
                console.log(`     - Cantidad: ${item.cantidad}`);
                console.log(`     - Categoría: "${item.categoria || 'Sin categoría'}"`);
            });
            
            // Verificar sedes disponibles
            const sedes = [...new Set(Object.values(inventario).map(item => item.sede))];
            console.log('\n🏢 SEDES DISPONIBLES:');
            sedes.forEach(sede => {
                const productosEnSede = Object.values(inventario).filter(item => item.sede === sede).length;
                console.log(`  - ${sede}: ${productosEnSede} productos`);
            });
            
            // Buscar productos que contengan "cerdo" o "carne"
            console.log('\n🥩 PRODUCTOS RELACIONADOS CON CERDO/CARNE:');
            const productosCarne = Object.keys(inventario).filter(clave => {
                const item = inventario[clave];
                return item.producto.toLowerCase().includes('cerdo') || 
                       item.producto.toLowerCase().includes('carne');
            });
            
            if (productosCarne.length > 0) {
                productosCarne.forEach(clave => {
                    const item = inventario[clave];
                    console.log(`  - "${item.producto}" (${item.sede}): ${item.cantidad} unidades`);
                });
            } else {
                console.log('  - No se encontraron productos relacionados con cerdo/carne');
            }
            
            console.log('=====================================');
        }

        // Función para buscar un producto específico en el inventario
        function buscarProductoEnInventario(nombreProducto, sede = null) {
            console.log(`🔍 BUSCANDO PRODUCTO: "${nombreProducto}"`);
            if (sede) {
                console.log(`🏢 En sede: "${sede}"`);
            }
            console.log('=====================================');
            
            const resultados = [];
            
            Object.keys(inventario).forEach(clave => {
                const item = inventario[clave];
                const coincideNombre = item.producto.toLowerCase().includes(nombreProducto.toLowerCase());
                const coincideSede = !sede || item.sede === sede;
                
                if (coincideNombre && coincideSede) {
                    resultados.push({
                        clave: clave,
                        producto: item.producto,
                        sede: item.sede,
                        cantidad: item.cantidad,
                        categoria: item.categoria || 'Sin categoría'
                    });
                }
            });
            
            if (resultados.length > 0) {
                console.log(`✅ Se encontraron ${resultados.length} producto(s):`);
                resultados.forEach((resultado, index) => {
                    console.log(`  ${index + 1}. Clave: "${resultado.clave}"`);
                    console.log(`     - Producto: "${resultado.producto}"`);
                    console.log(`     - Sede: "${resultado.sede}"`);
                    console.log(`     - Cantidad: ${resultado.cantidad}`);
                    console.log(`     - Categoría: "${resultado.categoria}"`);
                });
            } else {
                console.log('❌ No se encontró el producto');
                if (sede) {
                    console.log(`   Buscando en sede: "${sede}"`);
                }
            }
            
            console.log('=====================================');
            return resultados;
        }

        // Función para cargar productos por sede en devoluciones
        function cargarProductosPorSedeDevolucion() {
            console.log('🔄 cargarProductosPorSedeDevolucion() ejecutada');
            
            const sedeSeleccionada = document.getElementById('sede-devolucion').value;
            const campoProducto = document.getElementById('campo-producto-devolucion');
            const campoCantidad = document.getElementById('campo-cantidad-devolucion');
            const campoMotivo = document.getElementById('campo-motivo-devolucion');
            const campoModalidad = document.getElementById('campo-modalidad-devolucion');
            const campoResponsable = document.getElementById('campo-responsable-devolucion');
            
            console.log('📍 Sede seleccionada:', sedeSeleccionada);
            console.log('🎯 Campos encontrados:', {
                campoProducto: !!campoProducto,
                campoCantidad: !!campoCantidad,
                campoMotivo: !!campoMotivo,
                campoModalidad: !!campoModalidad,
                campoResponsable: !!campoResponsable
            });
            
            // Limpiar campos
            const inputProducto = document.getElementById('producto-devolucion');
            const inputCantidad = document.getElementById('cantidad-devolucion');
            const divSugerencias = document.getElementById('sugerencias-devolucion');
            
            if (inputProducto) inputProducto.value = '';
            if (inputCantidad) inputCantidad.value = '';
            if (divSugerencias) divSugerencias.style.display = 'none';
            
            if (sedeSeleccionada) {
                // Mostrar campos condicionalmente
                if (campoProducto) campoProducto.style.display = 'block';
                if (campoCantidad) campoCantidad.style.display = 'block';
                if (campoMotivo) campoMotivo.style.display = 'block';
                if (campoModalidad) campoModalidad.style.display = 'block';
                if (campoResponsable) campoResponsable.style.display = 'block';
                
                // Inicializar autocompletado para productos
                inicializarAutocompletadoDevolucion(sedeSeleccionada);
                
                // Inicializar autocompletado para responsable
                inicializarAutocompletadoResponsable('responsable-devolucion', 'sugerencias-responsable-devolucion');
                
                console.log('✅ Campos mostrados e inicializados');
            } else {
                // Ocultar campos
                if (campoProducto) campoProducto.style.display = 'none';
                if (campoCantidad) campoCantidad.style.display = 'none';
                if (campoMotivo) campoMotivo.style.display = 'none';
                if (campoModalidad) campoModalidad.style.display = 'none';
                if (campoResponsable) campoResponsable.style.display = 'none';
                
                console.log('❌ Campos ocultados');
            }
        }

        // Función para inicializar autocompletado específico para devoluciones
        function inicializarAutocompletadoDevolucion(sede) {
            const input = document.getElementById('producto-devolucion');
            const sugerenciasDiv = document.getElementById('sugerencias-devolucion');
            let sugerenciasActuales = [];
            let indiceSeleccionado = -1;
            
            // Limpiar eventos anteriores
            input.removeEventListener('input', input._inputHandler);
            input.removeEventListener('keydown', input._keydownHandler);
            
            // Función para filtrar productos por sede
            function filtrarProductosPorSede(valor) {
                const productosFiltrados = [];
                
                Object.keys(inventario).forEach(clave => {
                    const item = inventario[clave];
                    if (item.sede === sede && item.cantidad > 0) {
                        if (item.producto.toLowerCase().includes(valor.toLowerCase())) {
                            productosFiltrados.push({
                                clave: clave,
                                producto: item.producto,
                                cantidad: item.cantidad,
                                sede: item.sede
                            });
                        }
                    }
                });
                
                return productosFiltrados;
            }
            
            // Handler para input
            const inputHandler = function(e) {
                const valor = e.target.value;
                
                if (valor.length >= 2) {
                    sugerenciasActuales = filtrarProductosPorSede(valor);
                    mostrarSugerenciasDevolucion(sugerenciasActuales, sugerenciasDiv);
                } else {
                    sugerenciasDiv.style.display = 'none';
                }
            };
            
            // Handler para teclado
            const keydownHandler = function(e) {
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    indiceSeleccionado = Math.min(indiceSeleccionado + 1, sugerenciasActuales.length - 1);
                    actualizarSeleccionDevolucion(sugerenciasDiv, indiceSeleccionado);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    indiceSeleccionado = Math.max(indiceSeleccionado - 1, -1);
                    actualizarSeleccionDevolucion(sugerenciasDiv, indiceSeleccionado);
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (indiceSeleccionado >= 0 && sugerenciasActuales[indiceSeleccionado]) {
                        seleccionarProductoDevolucion(sugerenciasActuales[indiceSeleccionado]);
                    }
                } else if (e.key === 'Escape') {
                    sugerenciasDiv.style.display = 'none';
                }
            };
            
            // Asignar handlers
            input._inputHandler = inputHandler;
            input._keydownHandler = keydownHandler;
            input.addEventListener('input', inputHandler);
            input.addEventListener('keydown', keydownHandler);
        }

        // Función para mostrar sugerencias en devoluciones
        function mostrarSugerenciasDevolucion(sugerencias, contenedor) {
            if (sugerencias.length === 0) {
                contenedor.innerHTML = '<div class="sugerencia-item">No hay productos disponibles</div>';
                contenedor.style.display = 'block';
                return;
            }
            
            let html = '';
            sugerencias.forEach(sugerencia => {
                html += `
                    <div class="sugerencia-item" onclick="seleccionarProductoDevolucion(${JSON.stringify(sugerencia).replace(/"/g, '&quot;')})">
                        <div><strong>${sugerencia.producto}</strong></div>
                        <div class="sugerencia-categoria">📦 ${sugerencia.cantidad} disponibles</div>
                    </div>
                `;
            });
            
            contenedor.innerHTML = html;
            contenedor.style.display = 'block';
        }

        // Función para actualizar selección en devoluciones
        function actualizarSeleccionDevolucion(contenedor, indice) {
            const items = contenedor.querySelectorAll('.sugerencia-item');
            items.forEach((item, i) => {
                if (i === indice) {
                    item.classList.add('seleccionada');
                } else {
                    item.classList.remove('seleccionada');
                }
            });
        }

        // Función para seleccionar un producto en devoluciones
        function seleccionarProductoDevolucion(producto) {
            console.log('🎯 Producto seleccionado en devolución:', producto);
            document.getElementById('producto-devolucion').value = producto.producto;
            document.getElementById('sugerencias-devolucion').style.display = 'none';
        }

        // Función para inicializar autocompletado de responsables
        function inicializarAutocompletadoResponsable(inputId, sugerenciasId) {
            const input = document.getElementById(inputId);
            const sugerenciasDiv = document.getElementById(sugerenciasId);
            
            if (!input || !sugerenciasDiv) {
                console.error('❌ Elementos no encontrados para autocompletado de responsable:', inputId, sugerenciasId);
                return;
            }
            
            let indiceSeleccionado = -1;
            
            input.addEventListener('input', function() {
                const valor = this.value.toLowerCase().trim();
                
                if (valor.length < 2) {
                    sugerenciasDiv.style.display = 'none';
                    return;
                }
                
                // Filtrar responsables
                const sugerencias = responsablesLista.filter(responsable => 
                    responsable.toLowerCase().includes(valor)
                );
                
                mostrarSugerenciasResponsable(sugerencias, sugerenciasDiv);
                indiceSeleccionado = -1;
            });
            
            input.addEventListener('keydown', function(e) {
                const items = sugerenciasDiv.querySelectorAll('.sugerencia-item');
                
                if (e.key === 'ArrowDown') {
                    e.preventDefault();
                    indiceSeleccionado = Math.min(indiceSeleccionado + 1, items.length - 1);
                    actualizarSeleccionResponsable(sugerenciasDiv, indiceSeleccionado);
                } else if (e.key === 'ArrowUp') {
                    e.preventDefault();
                    indiceSeleccionado = Math.max(indiceSeleccionado - 1, -1);
                    actualizarSeleccionResponsable(sugerenciasDiv, indiceSeleccionado);
                } else if (e.key === 'Enter') {
                    e.preventDefault();
                    if (indiceSeleccionado >= 0 && items[indiceSeleccionado]) {
                        seleccionarResponsable(items[indiceSeleccionado].textContent.trim(), inputId);
                    }
                } else if (e.key === 'Escape') {
                    sugerenciasDiv.style.display = 'none';
                    indiceSeleccionado = -1;
                }
            });
            
            // Ocultar sugerencias al hacer clic fuera
            document.addEventListener('click', function(e) {
                if (!input.contains(e.target) && !sugerenciasDiv.contains(e.target)) {
                    sugerenciasDiv.style.display = 'none';
                }
            });
        }

        // Función para mostrar sugerencias de responsables
        function mostrarSugerenciasResponsable(sugerencias, contenedor) {
            if (sugerencias.length === 0) {
                contenedor.innerHTML = '<div class="sugerencia-item">❌ No se encontraron responsables</div>';
                contenedor.style.display = 'block';
                return;
            }
            
            let html = '';
            sugerencias.slice(0, 8).forEach((responsable, index) => {
                html += `
                    <div class="sugerencia-item" onclick="seleccionarResponsable('${responsable}', '${contenedor.id.replace('sugerencias-', '')}')">
                        <div><strong>${responsable}</strong></div>
                        <div class="sugerencia-categoria">👤 Responsable</div>
                    </div>
                `;
            });
            
            contenedor.innerHTML = html;
            contenedor.style.display = 'block';
        }

        // Función para actualizar selección visual de responsables
        function actualizarSeleccionResponsable(contenedor, indice) {
            const items = contenedor.querySelectorAll('.sugerencia-item');
            items.forEach((item, i) => {
                if (i === indice) {
                    item.classList.add('seleccionada');
                } else {
                    item.classList.remove('seleccionada');
                }
            });
        }

        // Función para seleccionar un responsable
        function seleccionarResponsable(responsable, inputId) {
            const input = document.getElementById(inputId);
            const sugerenciasDiv = document.getElementById(`sugerencias-${inputId}`);
            
            if (input) {
                input.value = responsable;
            }
            
            if (sugerenciasDiv) {
                sugerenciasDiv.style.display = 'none';
            }
            
            console.log('✅ Responsable seleccionado:', responsable);
        }

        // Función para validar que el responsable esté en la lista
        function validarResponsable(responsable) {
            if (!responsable || responsable.trim() === '') {
                return { valido: false, mensaje: '❌ Debe seleccionar un responsable' };
            }
            
            const responsableEncontrado = responsablesLista.find(r => 
                r.toLowerCase() === responsable.toLowerCase()
            );
            
            if (!responsableEncontrado) {
                return { 
                    valido: false, 
                    mensaje: '❌ El responsable seleccionado no está en la lista. Por favor, seleccione uno de la lista de sugerencias.' 
                };
            }
            
            return { valido: true, mensaje: '✅ Responsable válido' };
        }

        // Función para migrar fechas en el historial (corregir movimientos antiguos)
        function migrarFechasHistorial() {
            let movimientosActualizados = 0;
            
            historial.forEach(movimiento => {
                // Si el movimiento no tiene timestamp o tiene un timestamp inválido
                if (!movimiento.timestamp || isNaN(new Date(movimiento.timestamp).getTime())) {
                    // Intentar crear timestamp desde la fecha string
                    if (movimiento.fecha) {
                        try {
                            // Convertir fecha string a Date
                            const partesFecha = movimiento.fecha.split('/');
                            if (partesFecha.length === 3) {
                                const dia = parseInt(partesFecha[0]);
                                const mes = parseInt(partesFecha[1]) - 1; // Los meses en JS van de 0-11
                                const año = parseInt(partesFecha[2]);
                                
                                // Crear timestamp
                                movimiento.timestamp = new Date(año, mes, dia);
                                movimientosActualizados++;
                                
                                console.log('🔄 Fecha migrada:', movimiento.producto, 'fecha:', movimiento.fecha, 'timestamp:', movimiento.timestamp);
                            }
                        } catch (error) {
                            console.error('❌ Error migrando fecha:', movimiento.fecha, error);
                            // Si no se puede migrar, usar fecha actual
                            movimiento.timestamp = new Date();
                            movimientosActualizados++;
                        }
                    } else {
                        // Si no hay fecha, usar fecha actual
                        movimiento.timestamp = new Date();
                        movimientosActualizados++;
                    }
                }
            });
            
            if (movimientosActualizados > 0) {
                console.log(`✅ Migración completada: ${movimientosActualizados} movimientos actualizados`);
                guardarDatos(); // Guardar los cambios
            }
        }

        // Función para verificar fechas del historial
        function verificarFechasHistorial() {
            console.log('🔍 Verificando fechas del historial...');
            
            historial.slice(0, 5).forEach((mov, index) => {
                console.log(`Movimiento ${index + 1}:`);
                console.log(`  Producto: ${mov.producto}`);
                console.log(`  Fecha string: ${mov.fecha}`);
                console.log(`  Timestamp: ${mov.timestamp}`);
                console.log(`  Fecha formateada: ${new Date(mov.timestamp).toLocaleDateString('es-ES')}`);
                console.log('---');
            });
        }
        
        function verDetallesLotes(clave) {
            // Actualizar días restantes antes de mostrar
            actualizarDiasRestantesLotes();
            
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            const item = inventario[clave];
            
            if (!item) {
                mostrarMensaje('Error: No se encontró el producto en el inventario', 'error');
                return;
            }
            
            let mensaje = `**📦 DETALLES DE LOTES**\n\n`;
            mensaje += `**Producto:** ${item.producto}\n`;
            mensaje += `**Sede:** ${item.sede}\n`;
            mensaje += `**Stock total en inventario:** ${item.cantidad}\n\n`;
            
            if (fechas.length === 0 && lotesProducto.length === 0) {
                mensaje += `❌ No hay información de lotes o fechas de vencimiento registrada.\n\n`;
                mensaje += `💡 **Recomendación:** Para ver los lotes disponibles, asegúrate de que al registrar las entradas del producto se hayan incluido las fechas de vencimiento y números de lote.\n\n`;
                mensaje += `⚠️ **IMPORTANTE:** El stock total (${item.cantidad}) incluye productos sin lotes registrados.`;
            } else {
                const hoy = new Date();
                const todosLosLotes = [];
                
                const lotesProcesados = new Set(); // Para evitar duplicados
                
                // Agregar fechas de vencimiento
                fechas.forEach(item => {
                    const fechaVenc = new Date(item.fecha);
                    const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                    
                    const loteKey = `${item.lote}_${item.fecha}`;
                    if (!lotesProcesados.has(loteKey)) {
                        todosLosLotes.push({
                            lote: item.lote,
                            fecha: item.fecha,
                            cantidad: item.cantidad,
                            diasRestantes: diasRestantes,
                            prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja',
                            tipo: 'fecha'
                        });
                        lotesProcesados.add(loteKey);
                    }
                });
                
                // Agregar lotes (solo si no están ya procesados)
                lotesProducto.forEach(item => {
                    if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                        // Usar días restantes ya calculados o calcular si no existe
                        let diasRestantes = item.diasRestantes;
                        if (diasRestantes === null || diasRestantes === undefined) {
                            const fechaVenc = new Date(item.fechaVencimiento);
                            diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                        }
                        
                        const loteKey = `${item.lote}_${item.fechaVencimiento}`;
                        if (!lotesProcesados.has(loteKey)) {
                            todosLosLotes.push({
                                lote: item.lote,
                                fecha: item.fechaVencimiento,
                                cantidad: item.cantidad,
                                diasRestantes: diasRestantes,
                                prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja',
                                tipo: 'lote'
                            });
                            lotesProcesados.add(loteKey);
                        }
                    }
                });
                
                // Ordenar por prioridad y fecha (los que vencen primero aparecen primero)
                todosLosLotes.sort((a, b) => {
                    if (a.prioridad !== b.prioridad) {
                        const prioridades = { alta: 3, media: 2, baja: 1 };
                        return prioridades[b.prioridad] - prioridades[a.prioridad];
                    }
                    return a.diasRestantes - b.diasRestantes;
                });
                
                mensaje += `**📋 LOTES DISPONIBLES:**\n\n`;
                todosLosLotes.forEach((lote, index) => {
                    const icono = lote.prioridad === 'alta' ? '🔴' : lote.prioridad === 'media' ? '🟡' : '🟢';
                    const prioridad = lote.prioridad === 'alta' ? 'URGENTE' : lote.prioridad === 'media' ? 'PRONTO' : 'ATENCIÓN';
                    const recomendacion = lote.prioridad === 'alta' ? '⚠️ USAR PRIMERO' : lote.prioridad === 'media' ? '⚡ USAR PRONTO' : '✅ DISPONIBLE';
                    
                    mensaje += `${icono} **Lote ${index + 1}:** ${lote.lote}\n`;
                    mensaje += `   📅 Fecha de vencimiento: ${lote.fecha}\n`;
                    mensaje += `   ⏰ Vence en: ${lote.diasRestantes} días (${prioridad})\n`;
                    mensaje += `   📦 Cantidad disponible: ${lote.cantidad}\n`;
                    mensaje += `   💡 ${recomendacion}\n\n`;
                });
                
                // Calcular stock total en lotes registrados
                const stockEnLotes = todosLosLotes.reduce((total, lote) => total + lote.cantidad, 0);
                const stockSinLotes = item.cantidad - stockEnLotes;
                
                // Agregar información sobre stock sin lotes
                if (stockSinLotes > 0) {
                    const porcentajeSinLotes = Math.round((stockSinLotes / item.cantidad) * 100);
                    mensaje += `**⚠️ STOCK SIN LOTES REGISTRADOS:**\n`;
                    mensaje += `📦 Cantidad: ${stockSinLotes} unidades (${porcentajeSinLotes}% del total)\n`;
                    
                    if (porcentajeSinLotes > 50) {
                        mensaje += `🚨 **ALERTA:** Más del 50% del stock no tiene lotes registrados.\n`;
                    }
                    
                    mensaje += `💡 **Recomendación:** Este stock no tiene información de vencimiento. Considera registrarlo con lotes para mejor control.\n\n`;
                }
                
                // Agregar recomendación general
                const loteMasCercano = todosLosLotes[0];
                if (loteMasCercano) {
                    mensaje += `**🎯 RECOMENDACIÓN:**\n`;
                    mensaje += `Usa primero el **${loteMasCercano.lote}** que vence en ${loteMasCercano.diasRestantes} días.\n\n`;
                }
                
                // Agregar resumen final
                mensaje += `**📊 RESUMEN:**\n`;
                mensaje += `• Stock total en inventario: ${item.cantidad} unidades\n`;
                mensaje += `• Stock en lotes registrados: ${stockEnLotes} unidades\n`;
                if (stockSinLotes > 0) {
                    mensaje += `• Stock sin lotes: ${stockSinLotes} unidades\n`;
                }
                mensaje += `• Lotes disponibles: ${todosLosLotes.length}\n\n`;
            }
            
            // Usar SweetAlert2 para mostrar los detalles
            Swal.fire({
                title: '📦 Detalles de Lotes',
                html: mensaje.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>'),
                icon: 'info',
                confirmButtonText: '✅ Entendido',
                width: '700px',
                customClass: {
                    popup: 'swal-wide'
                }
            });
        }
        
        function mostrarInfoRapidaLotes(clave) {
            const fechas = fechasVencimiento[clave] || [];
            const lotesProducto = lotes[clave] || [];
            
            if (fechas.length === 0 && lotesProducto.length === 0) {
                return; // No mostrar nada si no hay lotes
            }
            
            const hoy = new Date();
            const todosLosLotes = [];
            
            const lotesProcesados = new Set(); // Para evitar duplicados
            
            // Procesar fechas de vencimiento
            fechas.forEach(item => {
                const fechaVenc = new Date(item.fecha);
                const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                
                const loteKey = `${item.lote}_${item.fecha}`;
                if (!lotesProcesados.has(loteKey)) {
                    todosLosLotes.push({
                        lote: item.lote,
                        diasRestantes: diasRestantes,
                        prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                    });
                    lotesProcesados.add(loteKey);
                }
            });
            
            // Procesar lotes (solo si no están ya procesados)
            lotesProducto.forEach(item => {
                if (item.fechaVencimiento && item.fechaVencimiento !== 'Sin fecha') {
                    const fechaVenc = new Date(item.fechaVencimiento);
                    const diasRestantes = Math.ceil((fechaVenc - hoy) / (1000 * 60 * 60 * 24));
                    
                    const loteKey = `${item.lote}_${item.fechaVencimiento}`;
                    if (!lotesProcesados.has(loteKey)) {
                        todosLosLotes.push({
                            lote: item.lote,
                            diasRestantes: diasRestantes,
                            prioridad: diasRestantes <= 7 ? 'alta' : diasRestantes <= 15 ? 'media' : 'baja'
                        });
                        lotesProcesados.add(loteKey);
                    }
                }
            });
            
            // Ordenar por prioridad
            todosLosLotes.sort((a, b) => {
                if (a.prioridad !== b.prioridad) {
                    const prioridades = { alta: 3, media: 2, baja: 1 };
                    return prioridades[b.prioridad] - prioridades[a.prioridad];
                }
                return a.diasRestantes - b.diasRestantes;
            });
            
            // Mostrar información rápida
            const loteMasCercano = todosLosLotes[0];
            if (loteMasCercano) {
                const icono = loteMasCercano.prioridad === 'alta' ? '🔴' : loteMasCercano.prioridad === 'media' ? '🟡' : '🟢';
                const mensaje = `${icono} Lote más cercano a vencer: ${loteMasCercano.lote} (${loteMasCercano.diasRestantes} días)`;
                
                // Mostrar como toast o notificación pequeña
                mostrarMensaje(mensaje, 'info');
            }
        }
        
        function verLotesDisponibles() {
            const productoSeleccionado = document.getElementById('producto-salida').value;
            
            if (!productoSeleccionado || productoSeleccionado === '') {
                Swal.fire({
                    title: '⚠️ Producto no seleccionado',
                    text: 'Por favor, selecciona un producto del inventario para ver sus lotes disponibles.',
                    icon: 'warning',
                    confirmButtonText: '✅ Entendido'
                });
                return;
            }
            
            // Mostrar loading mientras se procesa
            Swal.fire({
                title: '🔍 Buscando lotes...',
                text: 'Consultando información de vencimiento...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });
            
            // Simular un pequeño delay para mejor UX
            setTimeout(() => {
                verDetallesLotes(productoSeleccionado);
            }, 500);
        }
        

        
        // FUNCIONES DE MENSAJES
        function mostrarMensaje(mensaje, tipo) {
            // Crear contenedor de notificaciones si no existe
            let notificacionesContainer = document.getElementById('notificaciones-container');
            if (!notificacionesContainer) {
                notificacionesContainer = document.createElement('div');
                notificacionesContainer.id = 'notificaciones-container';
                notificacionesContainer.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    z-index: 9999;
                    max-width: 400px;
                    display: flex;
                    flex-direction: column;
                    gap: 10px;
                `;
                document.body.appendChild(notificacionesContainer);
            }
            
            // Verificar si ya existe una notificación idéntica para evitar duplicados
            const notificacionesExistentes = notificacionesContainer.querySelectorAll('.notificacion');
            for (let notif of notificacionesExistentes) {
                const mensajeExistente = notif.querySelector('.notificacion-mensaje').textContent;
                if (mensajeExistente === mensaje) {
                    // Si ya existe una notificación idéntica, no crear otra
                    return;
                }
            }
            
            // Crear la notificación
            const notificacion = document.createElement('div');
            notificacion.className = `notificacion notificacion-${tipo}`;
            
            // Determinar el icono según el tipo
            let icono = '';
            switch(tipo) {
                case 'exito':
                    icono = '✅';
                    break;
                case 'error':
                    icono = '❌';
                    break;
                case 'info':
                    icono = 'ℹ️';
                    break;
                case 'warning':
                    icono = '⚠️';
                    break;
                default:
                    icono = '💬';
            }
            
            notificacion.innerHTML = `
                <div class="notificacion-header">
                    <span class="notificacion-icono">${icono}</span>
                    <span class="notificacion-titulo">${tipo.charAt(0).toUpperCase() + tipo.slice(1)}</span>
                    <button class="notificacion-cerrar" onclick="this.parentElement.parentElement.remove()">×</button>
                </div>
                <div class="notificacion-mensaje">${mensaje}</div>
                <div class="notificacion-progreso"></div>
            `;
            
            // Agregar la notificación al contenedor
            notificacionesContainer.appendChild(notificacion);
            
            // Animación de entrada
            notificacion.style.animation = 'slideInRight 0.4s ease-out';
            
            // Efecto de vibración sutil para llamar la atención
            notificacion.style.transform = 'translateX(0) scale(1.02)';
            setTimeout(() => {
                notificacion.style.transform = 'translateX(0) scale(1)';
            }, 200);
            
            // Barra de progreso - Aumentado a 8 segundos
            const barraProgreso = notificacion.querySelector('.notificacion-progreso');
            let progreso = 100;
            const intervalo = setInterval(() => {
                progreso -= 1.25; // Más lento: 8 segundos total
                barraProgreso.style.width = progreso + '%';
                if (progreso <= 0) {
                    clearInterval(intervalo);
                    cerrarNotificacion(notificacion);
                }
            }, 100); // 8 segundos total
            
            // Auto-cerrar después de 8 segundos (aumentado de 4 a 8)
            setTimeout(() => {
                if (notificacion.parentNode) {
                    cerrarNotificacion(notificacion);
                }
            }, 8000);
            
            // Pausar progreso al hacer hover
            notificacion.addEventListener('mouseenter', () => {
                clearInterval(intervalo);
                barraProgreso.style.animationPlayState = 'paused';
            });
            
            notificacion.addEventListener('mouseleave', () => {
                barraProgreso.style.animationPlayState = 'running';
            });
        }
        
        function cerrarNotificacion(notificacion) {
            notificacion.style.animation = 'slideOutRight 0.4s ease-in';
            setTimeout(() => {
                if (notificacion.parentNode) {
                    notificacion.remove();
                }
            }, 400);
        }
        
        // Función para mostrar notificaciones de advertencia
        function mostrarAdvertencia(mensaje) {
            mostrarMensaje(mensaje, 'warning');
        }
        
        // Función para mostrar notificaciones informativas
        function mostrarInformacion(mensaje) {
            mostrarMensaje(mensaje, 'info');
        }
        

        
        // Función para mostrar notificación de éxito con duración personalizada
        function mostrarExito(mensaje, duracion = 8000) {
            const notificacion = mostrarMensaje(mensaje, 'exito');
            if (duracion !== 8000) {
                // Si se especifica una duración diferente, ajustar el tiempo
                setTimeout(() => {
                    if (notificacion && notificacion.parentNode) {
                        cerrarNotificacion(notificacion);
                    }
                }, duracion);
            }
        }
        
        // Función para sincronizar lotes y fechas de vencimiento con Firebase
        async function sincronizarLotesYFechasFirebase(clave) {
            try {
                console.log(`🔄 Iniciando sincronización para ${clave}...`);
                
                // Verificar que las funciones de Firebase estén disponibles
                if (!window.guardarLotesFirebase || !window.guardarFechasVencimientoFirebase) {
                    console.warn('⚠️ Funciones de Firebase no disponibles, guardando solo localmente');
                    return;
                }
                
                // Verificar conexión a Firebase
                if (!window.db || !window.auth) {
                    console.warn('⚠️ Firebase no está inicializado, guardando solo localmente');
                    return;
                }
                
                // Sincronizar lotes
                if (lotes[clave] && lotes[clave].length > 0) {
                    try {
                        console.log(`📦 Sincronizando ${lotes[clave].length} lotes para ${clave}...`);
                        console.log('📦 Datos de lotes a sincronizar:', lotes[clave]);
                        
                        await window.guardarLotesFirebase(clave, lotes[clave]);
                        console.log(`✅ Lotes sincronizados con Firebase para ${clave}`);
                        
                        // Verificar que se guardaron correctamente
                        setTimeout(async () => {
                            try {
                                const lotesVerificados = await window.obtenerLotesFirebase();
                                if (lotesVerificados[clave] && lotesVerificados[clave].length > 0) {
                                    console.log(`✅ Verificación exitosa: ${lotesVerificados[clave].length} lotes encontrados en Firebase para ${clave}`);
                                } else {
                                    console.warn(`⚠️ Verificación fallida: No se encontraron lotes en Firebase para ${clave}`);
                                }
                            } catch (verifError) {
                                console.warn('⚠️ Error en verificación de lotes:', verifError.message);
                            }
                        }, 2000);
                        
                    } catch (error) {
                        console.error(`❌ Error sincronizando lotes para ${clave}:`, error);
                        console.error('❌ Código de error:', error.code);
                        console.error('❌ Mensaje de error:', error.message);
                        
                        // Mostrar mensaje de error específico
                        if (window.mostrarMensaje) {
                            if (error.code === 'permission-denied') {
                                window.mostrarMensaje('❌ Error de permisos al sincronizar lotes. Verifica las reglas de Firebase.', 'error');
                            } else {
                                window.mostrarMensaje(`❌ Error sincronizando lotes: ${error.message}`, 'error');
                            }
                        }
                        
                        // Continuar con fechas de vencimiento aunque fallen los lotes
                    }
                } else {
                    console.log(`ℹ️ No hay lotes para sincronizar para ${clave}`);
                }
                
                // Sincronizar fechas de vencimiento
                if (fechasVencimiento[clave] && fechasVencimiento[clave].length > 0) {
                    try {
                        await window.guardarFechasVencimientoFirebase(clave, fechasVencimiento[clave]);
                        console.log(`✅ Fechas de vencimiento sincronizadas con Firebase para ${clave}`);
                    } catch (error) {
                        console.warn(`⚠️ Error sincronizando fechas de vencimiento para ${clave}:`, error.message);
                        
                        // Solo mostrar mensaje de error si no es un problema de permisos conocido
                        if (error.code === 'permission-denied' || error.message.includes('Missing or insufficient permissions')) {
                            console.log('ℹ️ Sincronización de fechas de vencimiento deshabilitada por permisos de Firebase');
                            // No mostrar mensaje de error al usuario para evitar confusión
                        } else {
                            console.error('❌ Error de sincronización:', error.message);
                            if (window.mostrarMensaje) {
                                window.mostrarMensaje(`⚠️ Error de sincronización: ${error.message}`, 'warning');
                            }
                        }
                    }
                }
                
                // Siempre guardar localmente como respaldo
                console.log(`💾 Guardando datos localmente para ${clave}...`);
                localStorage.setItem('lotes', JSON.stringify(lotes));
                localStorage.setItem('fechasVencimiento', JSON.stringify(fechasVencimiento));
                console.log(`✅ Datos guardados localmente para ${clave}`);
                
            } catch (error) {
                console.error('❌ Error general en sincronización:', error);
                console.log('💾 Guardando datos localmente como respaldo...');
                
                // Guardar localmente como respaldo
                try {
                    localStorage.setItem('lotes', JSON.stringify(lotes));
                    localStorage.setItem('fechasVencimiento', JSON.stringify(fechasVencimiento));
                    console.log('✅ Datos guardados localmente como respaldo');
                } catch (localError) {
                    console.error('❌ Error guardando localmente:', localError);
                }
            }
        }

        // Función para probar conexión básica a Firebase
        async function probarConexionFirebase() {
            try {
                console.log('🧪 PROBANDO CONEXIÓN BÁSICA A FIREBASE...');
                
                // Verificar que Firebase esté disponible
                if (!window.db || !window.auth) {
                    throw new Error('Firebase no está inicializado');
                }
                
                // Verificar autenticación
                if (!window.auth.currentUser) {
                    console.log('⚠️ Usuario no autenticado, intentando autenticación...');
                    await window.auth.signInAnonymously();
                }
                
                // Probar escritura simple
                console.log('📝 Probando escritura simple...');
                const testDoc = await window.addDoc(window.collection(window.db, "test"), {
                    timestamp: new Date().toISOString(),
                    test: true,
                    mensaje: "Prueba de conexión exitosa"
                });
                
                console.log('✅ Escritura exitosa, ID:', testDoc.id);
                
                // Limpiar documento de prueba
                await window.deleteDoc(window.doc(window.db, "test", testDoc.id));
                console.log('✅ Documento de prueba eliminado');
                
                // Mostrar mensaje de éxito
                if (window.mostrarMensaje) {
                    window.mostrarMensaje('✅ Conexión a Firebase funcionando correctamente', 'exito');
                }
                
                console.log('🎉 PRUEBA DE CONEXIÓN COMPLETADA EXITOSAMENTE');
                return true;
                
            } catch (error) {
                console.error('❌ ERROR EN PRUEBA DE CONEXIÓN:', error);
                console.error('❌ Código de error:', error.code);
                console.error('❌ Mensaje de error:', error.message);
                
                if (window.mostrarMensaje) {
                    if (error.code === 'permission-denied') {
                        window.mostrarMensaje('❌ Error de permisos en Firebase. Verifica las reglas de seguridad.', 'error');
                    } else {
                        window.mostrarMensaje(`❌ Error de conexión: ${error.message}`, 'error');
                    }
                }
                
                return false;
            }
        }
        
        // Hacer la función disponible globalmente
        window.probarConexionFirebase = probarConexionFirebase;
        
        // Función para forzar sincronización de todos los lotes
        async function forzarSincronizacionLotes() {
            try {
                console.log('🔄 FORZANDO SINCRONIZACIÓN DE TODOS LOS LOTES...');
                
                let lotesSincronizados = 0;
                let lotesConError = 0;
                
                // Recorrer todos los lotes locales
                for (const clave in lotes) {
                    if (lotes[clave] && lotes[clave].length > 0) {
                        try {
                            console.log(`📦 Sincronizando lotes para ${clave}...`);
                            await window.guardarLotesFirebase(clave, lotes[clave]);
                            lotesSincronizados++;
                            console.log(`✅ Lotes sincronizados para ${clave}`);
                        } catch (error) {
                            lotesConError++;
                            console.error(`❌ Error sincronizando lotes para ${clave}:`, error.message);
                        }
                    }
                }
                
                console.log(`📊 Resumen: ${lotesSincronizados} lotes sincronizados, ${lotesConError} con error`);
                
                if (window.mostrarMensaje) {
                    if (lotesConError === 0) {
                        window.mostrarMensaje(`✅ Todos los lotes sincronizados correctamente (${lotesSincronizados})`, 'exito');
                    } else {
                        window.mostrarMensaje(`⚠️ ${lotesSincronizados} lotes sincronizados, ${lotesConError} con error`, 'warning');
                    }
                }
                
                return { sincronizados: lotesSincronizados, errores: lotesConError };
                
            } catch (error) {
                console.error('❌ Error en sincronización forzada:', error);
                if (window.mostrarMensaje) {
                    window.mostrarMensaje(`❌ Error en sincronización forzada: ${error.message}`, 'error');
                }
                return { sincronizados: 0, errores: 1 };
            }
        }
        
        // Hacer la función disponible globalmente
        window.forzarSincronizacionLotes = forzarSincronizacionLotes;

        // FUNCIONES DE DATOS
        async function guardarDatos() {
            try {
                console.log('🔄 Guardando datos en localStorage...');
                
                // Guardar en localStorage
                localStorage.setItem('inventario', JSON.stringify(inventario));
                localStorage.setItem('historial', JSON.stringify(historial));
                localStorage.setItem('contadores', JSON.stringify(contadores));
                localStorage.setItem('fechasVencimiento', JSON.stringify(fechasVencimiento));
                localStorage.setItem('lotes', JSON.stringify(lotes));
                localStorage.setItem('comentariosStock', JSON.stringify(comentariosStock));
                localStorage.setItem('productosSeleccionadosSalida', JSON.stringify(productosSeleccionadosSalida));
                localStorage.setItem('sedeActual', sedeActual);
                
                console.log('✅ Datos guardados exitosamente en localStorage');
                console.log('📝 Comentarios de stock guardados:', Object.keys(comentariosStock).length, 'productos con comentarios');
                
                // Intentar sincronizar con Firebase si está disponible
                if (window.sincronizarConFirebase) {
                    try {
                        await sincronizarConFirebase();
                        console.log('✅ Datos sincronizados con Firebase');
                    } catch (error) {
                        console.warn('⚠️ Error sincronizando con Firebase:', error);
                    }
                }
                
                return true;
                
            } catch (error) {
                console.error('❌ Error guardando datos:', error);
                return false;
            }
        }
        
        async function cargarDatos() {
            try {
                console.log('🔄 Cargando datos desde Firebase...');
                
                // Verificar si Firebase está disponible
                if (window.obtenerMovimientosFirebase && window.obtenerProductosFirebase) {
                    console.log('🔥 Firebase disponible, cargando datos desde Firebase...');
                    
                    // Cargar movimientos desde Firebase
                    const movimientosFirebase = await window.obtenerMovimientosFirebase();
                    historial = movimientosFirebase;
                    console.log(`✅ Historial cargado desde Firebase: ${historial.length} movimientos`);
                    
                    // Cargar productos desde Firebase
                    const productosFirebase = await window.obtenerProductosFirebase();
                    inventario = {};
                    productosFirebase.forEach(producto => {
                        const clave = `${producto.producto}_${producto.sede}`;
                        inventario[clave] = {
                            producto: producto.producto,
                            cantidad: producto.cantidad,
                            sede: producto.sede,
                            lote: producto.lote || '',
                            fechaVencimiento: producto.fechaVencimiento || '',
                            diasRestantes: producto.diasRestantes || 0
                        };
                    });
                    console.log(`✅ Inventario cargado desde Firebase: ${Object.keys(inventario).length} productos`);
                    
                    // Calcular contadores desde Firebase
                    contadores = { entradas: 0, salidas: 0, devoluciones: 0 };
                    historial.forEach(movimiento => {
                        if (movimiento.tipo === 'entrada') contadores.entradas++;
                        else if (movimiento.tipo === 'salida') contadores.salidas++;
                        else if (movimiento.tipo === 'devolucion') contadores.devoluciones++;
                    });
                    console.log('✅ Contadores calculados desde Firebase:', contadores);
                    
                } else {
                    console.log('⚠️ Firebase no disponible, cargando datos desde localStorage...');
                    
                    // Cargar desde localStorage como respaldo
                    const inventarioGuardado = localStorage.getItem('inventario');
                    const historialGuardado = localStorage.getItem('historial');
                    const contadoresGuardado = localStorage.getItem('contadores');
                    const fechasVencimientoGuardado = localStorage.getItem('fechasVencimiento');
                    const lotesGuardado = localStorage.getItem('lotes');
                    const comentariosStockGuardado = localStorage.getItem('comentariosStock');
                    const productosSeleccionadosSalidaGuardado = localStorage.getItem('productosSeleccionadosSalida');
                    const sedeActualGuardado = localStorage.getItem('sedeActual');
                
                    if (inventarioGuardado) {
                        inventario = JSON.parse(inventarioGuardado);
                        console.log('✅ Inventario cargado desde localStorage');
                    }
                    
                    if (historialGuardado) {
                        historial = JSON.parse(historialGuardado);
                        console.log('✅ Historial cargado desde localStorage');
                    }
                    
                    if (contadoresGuardado) {
                        contadores = JSON.parse(contadoresGuardado);
                        console.log('✅ Contadores cargados desde localStorage');
                    }
                    
                    if (fechasVencimientoGuardado) {
                        fechasVencimiento = JSON.parse(fechasVencimientoGuardado);
                        console.log('✅ Fechas de vencimiento cargadas desde localStorage');
                    }
                    
                    if (lotesGuardado) {
                        lotes = JSON.parse(lotesGuardado);
                        console.log('✅ Lotes cargados desde localStorage');
                    }
                    
                    if (comentariosStockGuardado) {
                        comentariosStock = JSON.parse(comentariosStockGuardado);
                        console.log('✅ Comentarios de stock cargados desde localStorage');
                    }
                    
                    if (productosSeleccionadosSalidaGuardado) {
                        productosSeleccionadosSalida = JSON.parse(productosSeleccionadosSalidaGuardado);
                        console.log('✅ Productos seleccionados para salida cargados desde localStorage');
                    }
                    
                    if (sedeActualGuardado) {
                        sedeActual = sedeActualGuardado;
                        console.log('✅ Sede actual cargada desde localStorage');
                    }
                }
                
                // Cargar datos adicionales desde localStorage (siempre)
                const fechasVencimientoGuardado = localStorage.getItem('fechasVencimiento');
                const lotesGuardado = localStorage.getItem('lotes');
                const comentariosStockGuardado = localStorage.getItem('comentariosStock');
                const productosSeleccionadosSalidaGuardado = localStorage.getItem('productosSeleccionadosSalida');
                const sedeActualGuardado = localStorage.getItem('sedeActual');
                
                if (fechasVencimientoGuardado) {
                    fechasVencimiento = JSON.parse(fechasVencimientoGuardado);
                    console.log('✅ Fechas de vencimiento cargadas desde localStorage');
                }
                
                if (lotesGuardado) {
                    lotes = JSON.parse(lotesGuardado);
                    console.log('✅ Lotes cargados desde localStorage');
                }
                
                if (comentariosStockGuardado) {
                    comentariosStock = JSON.parse(comentariosStockGuardado);
                    console.log('✅ Comentarios de stock cargados desde localStorage');
                }
                
                if (productosSeleccionadosSalidaGuardado) {
                    productosSeleccionadosSalida = JSON.parse(productosSeleccionadosSalidaGuardado);
                    console.log('✅ Productos seleccionados para salida cargados desde localStorage');
                }
                
                if (sedeActualGuardado) {
                    sedeActual = sedeActualGuardado;
                    console.log('✅ Sede actual cargada desde localStorage');
                }
                
                console.log('✅ Datos cargados exitosamente');
                console.log('📊 Inventario:', Object.keys(inventario).length, 'productos');
                console.log('📋 Historial:', historial.length, 'movimientos');
                console.log('📝 Comentarios:', Object.keys(comentariosStock).length, 'productos con comentarios');
                return true;
                
            } catch (error) {
                console.error('❌ Error cargando datos:', error);
                
                // Si falla la carga, inicializar con datos vacíos
                console.log('🆕 Inicializando con datos vacíos...');
                inventario = [];
                historial = [];
                contadores = {};
                fechasVencimiento = {};
                lotes = {};
                comentariosStock = {};
                productosSeleccionadosSalida = [];
                sedeActual = 'BODEGA CENTRAL';
                
                console.log('✅ Aplicación inicializada con datos vacíos');
                return false;
            }
        }
        
        // Función para verificar el estado de los comentarios
        function verificarComentariosStock() {
            console.log('🔍 Verificando estado de comentarios de stock:');
            console.log('📊 Total de productos con comentarios:', Object.keys(comentariosStock).length);
            
            Object.keys(comentariosStock).forEach(clave => {
                const comentarios = comentariosStock[clave];
                console.log(`📦 ${clave}: ${comentarios.length} comentarios`);
                comentarios.forEach((comentario, index) => {
                    console.log(`  ${index + 1}. ${comentario.tipo} - ${comentario.autor} - ${comentario.fecha}`);
                });
            });
        }
        
        // Función de debug simple para revisar movimientos
        function debugMovimientos() {
            console.log('🔍 DEBUG DE MOVIMIENTOS:');
            console.log('📊 Total movimientos:', historial.length);
            
            // Mostrar solo los primeros 10 movimientos para no saturar la consola
            historial.slice(0, 10).forEach((mov, index) => {
                console.log(`📋 Movimiento ${index + 1}:`, {
                    tipo: mov.tipo,
                    sede: mov.sede,
                    sedeDestino: mov.sedeDestino,
                    producto: mov.producto
                });
            });
            
            if (historial.length > 10) {
                console.log(`... y ${historial.length - 10} movimientos más`);
            }
        }
        
        // Hacer la función disponible globalmente
        window.debugMovimientos = debugMovimientos;
        
        // INICIALIZACIÓN
        document.addEventListener('DOMContentLoaded', async function() {
            await cargarDatos();
            
            // Migrar fechas del historial (corregir movimientos antiguos)
            migrarFechasHistorial();
            
            // Actualizar días restantes de todos los lotes
            actualizarDiasRestantesLotes();
            
            // Verificar comentarios después de cargar datos
            setTimeout(() => {
                verificarComentariosStock();
            }, 1000);
            
            // Sistema de conexión eliminado - modo solo local
            
            // Datos de prueba eliminados - el inventario puede estar vacío
            // Historial de prueba eliminado - puede estar vacío
            
            // Inicializar autocompletado
            inicializarAutocompletado('producto-entrada', 'sugerencias-entrada');
            inicializarAutocompletado('producto-devolucion', 'sugerencias-devolucion');
            
            // Inicializar autocompletado de responsables
            inicializarAutocompletadoResponsable('responsable-salida', 'sugerencias-responsable-salida');
            inicializarAutocompletadoResponsable('responsable-entrada', 'sugerencias-responsable-entrada');
            inicializarAutocompletadoResponsable('responsable-devolucion', 'sugerencias-responsable-devolucion');
            

            
            // Inicializar sección de salida
            // cargarProductosParaSalida(); // Ya no se usa, se reemplazó por cargarProductosPorSede()
            
            // Agregar event listener adicional para el select de sede
            const selectSede = document.getElementById('sede-salida');
            if (selectSede) {
                selectSede.addEventListener('change', cargarProductosPorSede);
                console.log('✅ Event listener agregado al select de sede');
            }
            
            // Configurar filtros
            document.getElementById('filtro-sede-stock').addEventListener('change', cargarStock);
            document.getElementById('filtro-tipo-stock').addEventListener('change', cargarStock);
            // Los filtros del historial se configuran cuando se accede a esa sección
            
            // Configurar checkboxes
            document.getElementById('fecha-no-aplica-entrada').addEventListener('change', function() {
                const fechaInput = document.getElementById('fecha-vencimiento-entrada');
                fechaInput.disabled = this.checked;
                if (this.checked) fechaInput.value = '';
            });
            
            document.getElementById('lote-no-aplica-entrada').addEventListener('change', function() {
                const loteInput = document.getElementById('lote-entrada');
                loteInput.disabled = this.checked;
                if (this.checked) loteInput.value = '';
            });
            
            // Inicializar mes del reporte con el mes actual
            const mesActual = new Date().toISOString().split('T')[0].substring(0, 7);
            document.getElementById('mes-reporte').value = mesActual;
            console.log('📅 Mes inicializado:', mesActual);
            
            // Inicializar selector de institución con BODEGA CENTRAL por defecto
            document.getElementById('institucion-reporte').value = 'BODEGA CENTRAL';
            
            // Evento para cerrar sugerencias al hacer clic fuera
            document.addEventListener('click', function(event) {
                const campoBusqueda = document.getElementById('filtro-producto-historial');
                const sugerencias = document.getElementById('sugerencias-producto-historial');
                
                if (!campoBusqueda.contains(event.target) && !sugerencias.contains(event.target)) {
                    sugerencias.style.display = 'none';
                }
            });
            
            // Verificar estado inicial del selector de destino para salidas
            setTimeout(() => {
                const sedeSalida = document.getElementById('sede-salida');
                if (sedeSalida.value === 'BODEGA CENTRAL') {
                    console.log('BODEGA CENTRAL ya seleccionada al cargar, ejecutando mostrarOcultarDestino...');
                    mostrarOcultarDestino();
                }
            }, 100);

            // MEJORAS PARA DISPOSITIVOS MÓVILES
            inicializarMejorasMoviles();
        });

        // Función para inicializar mejoras específicas para dispositivos móviles
        function inicializarMejorasMoviles() {
            // Detectar si es un dispositivo móvil
            const esMovil = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
                           window.innerWidth <= 768 || 
                           ('ontouchstart' in window);

            if (esMovil) {
                console.log('📱 Dispositivo móvil detectado, aplicando mejoras...');
                
                // Mejorar experiencia táctil en listas desplegables
                mejorarSelectsMoviles();
                
                // Mejorar navegación táctil
                mejorarNavegacionTactil();
                
                // Optimizar formularios para móviles
                optimizarFormulariosMoviles();
                
                // Mejorar scroll en tablas
                mejorarScrollTablas();
            }
        }

        // Mejorar experiencia en elementos select para móviles
        function mejorarSelectsMoviles() {
            const selects = document.querySelectorAll('select');
            selects.forEach(select => {
                // Agregar clase para identificar selects móviles
                select.classList.add('select-movil');
                
                // Mejorar el evento de cambio para móviles
                select.addEventListener('change', function() {
                    // Agregar feedback visual
                    this.style.transform = 'scale(0.98)';
                    setTimeout(() => {
                        this.style.transform = 'scale(1)';
                    }, 150);
                    
                    // Scroll suave al elemento si está fuera de vista
                    setTimeout(() => {
                        this.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 200);
                });

                // Mejorar el evento de focus
                select.addEventListener('focus', function() {
                    // Scroll al elemento cuando se enfoca
                    setTimeout(() => {
                        this.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center' 
                        });
                    }, 300);
                });
            });
        }

        // Mejorar navegación táctil
        function mejorarNavegacionTactil() {
            const botones = document.querySelectorAll('.boton-menu, .boton-accion, .nav-button');
            
            botones.forEach(boton => {
                // Agregar feedback táctil
                boton.addEventListener('touchstart', function(e) {
                    this.style.transform = 'scale(0.95)';
                    this.style.transition = 'transform 0.1s ease';
                });

                boton.addEventListener('touchend', function(e) {
                    this.style.transform = 'scale(1)';
                    this.style.transition = 'transform 0.2s ease';
                });

                // Prevenir doble tap zoom
                boton.addEventListener('touchend', function(e) {
                    e.preventDefault();
                });
            });

            // Mejorar sugerencias táctiles
            const sugerencias = document.querySelectorAll('.sugerencia-item');
            sugerencias.forEach(sugerencia => {
                sugerencia.addEventListener('touchstart', function() {
                    this.style.backgroundColor = '#e3f2fd';
                });

                sugerencia.addEventListener('touchend', function() {
                    this.style.backgroundColor = '';
                });
            });
        }

        // Optimizar formularios para móviles
        function optimizarFormulariosMoviles() {
            const inputs = document.querySelectorAll('input, textarea');
            
            inputs.forEach(input => {
                // Prevenir zoom en iOS cuando se enfoca un input
                if (input.type !== 'range' && input.type !== 'checkbox' && input.type !== 'radio') {
                    input.addEventListener('focus', function() {
                        // Scroll al elemento
                        setTimeout(() => {
                            this.scrollIntoView({ 
                                behavior: 'smooth', 
                                block: 'center' 
                            });
                        }, 300);
                    });
                }

                // Mejorar experiencia en campos de texto
                if (input.type === 'text' || input.tagName === 'TEXTAREA') {
                    input.addEventListener('input', function() {
                        // Agregar clase para indicar que hay contenido
                        if (this.value.length > 0) {
                            this.classList.add('tiene-contenido');
                        } else {
                            this.classList.remove('tiene-contenido');
                        }
                    });
                }
            });
        }

        // Mejorar scroll en tablas para móviles
        function mejorarScrollTablas() {
            const tablas = document.querySelectorAll('.tabla-stock, .tabla-reporte');
            
            tablas.forEach(tabla => {
                // Agregar scroll suave
                tabla.style.scrollBehavior = 'smooth';
                
                // Mejorar el contenedor de la tabla
                const contenedor = tabla.parentElement;
                if (contenedor) {
                    contenedor.style.overflowX = 'auto';
                    contenedor.style.webkitOverflowScrolling = 'touch';
                    contenedor.style.borderRadius = '8px';
                    contenedor.style.boxShadow = '0 2px 8px rgba(0,0,0,0.1)';
                }
            });
        }
        
        // Función para confirmar limpieza del inventario
        function confirmarLimpiarInventario() {
            Swal.fire({
                title: '⚠️ CONFIRMAR LIMPIEZA',
                html: `
                    <div style="text-align: left;">
                        <p><strong>¿Estás seguro de que quieres limpiar todo el inventario?</strong></p>
                        <p>Esta acción eliminará:</p>
                        <ul style="text-align: left; margin: 10px 0;">
                            <li>📦 Todo el inventario actual</li>
                            <li>📋 Todo el historial de movimientos</li>
                            <li>📊 Todos los contadores y estadísticas</li>
                        </ul>
                        <p style="color: #d32f2f; font-weight: bold;">⚠️ Esta acción es IRREVERSIBLE.</p>
                    </div>
                `,
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#dc3545',
                cancelButtonColor: '#6c757d',
                confirmButtonText: '🗑️ SÍ, LIMPIAR TODO',
                cancelButtonText: '❌ CANCELAR',
                reverseButtons: true,
                allowOutsideClick: false
            }).then((result) => {
                if (result.isConfirmed) {
                    limpiarInventario();
                }
            });
        }

        // Función para limpiar todo el inventario
        function limpiarInventario() {
            // Pedir contraseña de administrador
            Swal.fire({
                title: '🔐 AUTENTICACIÓN DE ADMINISTRADOR',
                html: `
                    <div style="text-align: left;">
                        <p style="margin-bottom: 15px; font-weight: bold;">⚠️ ACCIÓN CRÍTICA:</p>
                        <p style="margin-bottom: 15px;">Esta acción eliminará:</p>
                        <ul style="margin-left: 20px; margin-bottom: 20px;">
                            <li>• Todo el inventario</li>
                            <li>• Todo el historial</li>
                            <li>• Todos los lotes</li>
                            <li>• Todas las fechas de vencimiento</li>
                            <li>• Todos los comentarios</li>
                        </ul>
                        <p style="color: #dc3545; font-weight: bold;">Esta acción NO se puede deshacer.</p>
                    </div>
                    <div style="margin-top: 20px;">
                        <label style="font-weight: bold;">Contraseña de administrador:</label><br>
                        <input type="password" id="admin-password" placeholder="Ingresa la contraseña de admin..." 
                               style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px; margin-top: 5px;">
                    </div>
                `,
                width: '500px',
                showCancelButton: true,
                confirmButtonText: '🗑️ LIMPIAR TODO',
                cancelButtonText: '❌ CANCELAR',
                confirmButtonColor: '#dc3545',
                cancelButtonColor: '#6c757d',
                preConfirm: () => {
                    const password = document.getElementById('admin-password').value;
                    
                    if (!password) {
                        Swal.showValidationMessage('Por favor, ingresa la contraseña de administrador');
                        return false;
                    }
                    
                    // Contraseña de administrador (puedes cambiarla)
                    const adminPassword = 'PAE2024ADMIN';
                    
                    if (password !== adminPassword) {
                        Swal.showValidationMessage('❌ Contraseña incorrecta');
                        return false;
                    }
                    
                    return true;
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    // Confirmación final
                    Swal.fire({
                        title: '⚠️ CONFIRMACIÓN FINAL',
                        text: '¿Estás ABSOLUTAMENTE SEGURO de que quieres eliminar todo el inventario? Esta acción es irreversible.',
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonText: '🗑️ SÍ, ELIMINAR TODO',
                        cancelButtonText: '❌ CANCELAR',
                        confirmButtonColor: '#dc3545',
                        cancelButtonColor: '#6c757d'
                    }).then((finalResult) => {
                        if (finalResult.isConfirmed) {
                            // Mostrar loading
                            Swal.fire({
                                title: '🗑️ LIMPIANDO INVENTARIO...',
                                text: 'Por favor espera mientras se elimina toda la información',
                                icon: 'info',
                                allowOutsideClick: false,
                                showConfirmButton: false,
                                didOpen: () => {
                                    Swal.showLoading();
                                }
                            });
                            
                            // Limpiar variables globales
                            inventario = {};
                            historial = [];
                            contadores = {};
                            fechasVencimiento = {};
                            lotes = {};
                            comentariosStock = {};
                            productosSeleccionadosSalida = [];
                            
                            // Limpiar localStorage
                            localStorage.removeItem('inventario');
                            localStorage.removeItem('historial');
                            localStorage.removeItem('contadores');
                            localStorage.removeItem('fechasVencimiento');
                            localStorage.removeItem('lotes');
                            localStorage.removeItem('comentariosStock');
                            localStorage.removeItem('productosSeleccionadosSalida');
                            localStorage.removeItem('sedeActual');
                            localStorage.removeItem('paeDigitalData');
                            
                            
                            // Limpiar pantalla
                            const container = document.getElementById('tabla-stock-container');
                            if (container) {
                                container.innerHTML = '<div class="mensaje-info" style="background: #d4edda; color: #155724; padding: 20px; border-radius: 10px; text-align: center;"><h3>✅ INVENTARIO COMPLETAMENTE LIMPIO</h3><p>Puedes empezar a registrar productos desde cero</p></div>';
                            }
                            
                            // Limpiar historial
                            const containerHistorial = document.getElementById('tabla-historial-container');
                            if (containerHistorial) {
                                containerHistorial.innerHTML = '<div class="mensaje-info" style="background: #d4edda; color: #155724; padding: 20px; border-radius: 10px; text-align: center;"><h3>✅ HISTORIAL LIMPIO</h3><p>No hay movimientos registrados</p></div>';
                            }
                            
                            // Mostrar confirmación de éxito
                            Swal.fire({
                                title: '✅ INVENTARIO LIMPIADO',
                                text: 'Todo el inventario ha sido eliminado exitosamente. Ahora puedes empezar a registrar productos desde cero.',
                                icon: 'success',
                                confirmButtonText: '✅ ENTENDIDO',
                                confirmButtonColor: '#28a745'
                            });
                        }
                    });
                }
            });
        }
    </script>
    
    <!-- Bootstrap 5 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- SweetAlert2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    
    <script>
        // Función mejorada para mostrar notificaciones con SweetAlert
        function mostrarNotificacion(titulo, mensaje, tipo = 'success', duracion = 3000) {
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: duracion,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                }
            });

            Toast.fire({
                icon: tipo,
                title: titulo,
                text: mensaje
            });
        }

        // Función para actualizar hora y fecha en el header
        function actualizarHoraFecha() {
            const ahora = new Date();
            
            // Formatear hora
            const hora = ahora.toLocaleTimeString('es-CO', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            // Formatear fecha
            const fecha = ahora.toLocaleDateString('es-CO', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            // Actualizar elementos en el DOM
            const elementoHora = document.getElementById('current-time');
            const elementoFecha = document.getElementById('current-date');
            
            if (elementoHora) {
                elementoHora.textContent = hora;
            }
            
            if (elementoFecha) {
                elementoFecha.textContent = fecha;
            }
        }

        // Actualizar hora y fecha cada segundo
        setInterval(actualizarHoraFecha, 1000);
        
        // Actualizar inmediatamente al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            actualizarHoraFecha();
        });
        
        // Función para confirmaciones elegantes
        function confirmarAccion(titulo, mensaje, callback) {
            Swal.fire({
                title: titulo,
                text: mensaje,
                icon: 'question',
                showCancelButton: true,
                confirmButtonColor: '#4CAF50',
                cancelButtonColor: '#FF6B35',
                confirmButtonText: 'Sí, continuar',
                cancelButtonText: 'Cancelar',
                reverseButtons: true
            }).then((result) => {
                if (result.isConfirmed && callback) {
                    callback();
                }
            });
        }

        // FUNCIONES DE CONEXIÓN Y SINCRONIZACIÓN
        let estadoConexion = 'verificando';
        let ultimaSincronizacion = null;

        // Función para verificar el estado de conexión
        function verificarConexion() {
            console.log('🔍 Verificando estado de conexión...');
            
            // Simular verificación de conexión
            // En un sistema real, aquí se haría una petición al servidor
            const indicador = document.getElementById('indicador-conexion');
            const elementoUltimaSync = document.getElementById('ultima-sincronizacion');
            
            if (indicador) {
                indicador.className = 'indicador-conexion verificando';
                indicador.innerHTML = '🔄 Verificando conexión...';
            }
            
            // Simular verificación (en un sistema real sería una petición HTTP)
            setTimeout(() => {
                // Simular que la conexión es exitosa
                estadoConexion = 'conectado';
                
                if (indicador) {
                    indicador.className = 'indicador-conexion conectado';
                    indicador.innerHTML = '✅ Sincronización Simple Activa';
                }
                
                console.log('✅ Conexión verificada exitosamente');
            }, 2000);
        }

        // Función para sincronización manual
        function sincronizarManual() {
            console.log('🔄 Iniciando sincronización manual...');
            
            const indicador = document.getElementById('indicador-conexion');
            const elementoUltimaSync = document.getElementById('ultima-sincronizacion');
            
            if (indicador) {
                indicador.className = 'indicador-conexion verificando';
                indicador.innerHTML = '🔄 Sincronizando...';
            }
            
            // Simular proceso de sincronización
            setTimeout(() => {
                // Guardar datos localmente (simular sincronización)
                guardarDatos();
                
                // Actualizar estado
                estadoConexion = 'conectado';
                ultimaSincronizacion = new Date();
                
                if (indicador) {
                    indicador.className = 'indicador-conexion conectado';
                    indicador.innerHTML = '✅ Sincronización Simple Activa';
                }
                
                if (elementoUltimaSync) {
                    const fechaHora = ultimaSincronizacion.toLocaleString('es-ES', {
                        year: 'numeric',
                        month: '2-digit',
                        day: '2-digit',
                        hour: '2-digit',
                        minute: '2-digit',
                        second: '2-digit'
                    });
                    elementoUltimaSync.textContent = `Última sincronización: ${fechaHora}`;
                }
                
                // Mostrar notificación de éxito
                Swal.fire({
                    title: 'Sincronización Exitosa',
                    text: 'Los datos se han sincronizado correctamente.',
                    icon: 'success',
                    timer: 3000,
                    showConfirmButton: false,
                    toast: true,
                    position: 'top-end'
                });
                
                console.log('✅ Sincronización manual completada');
            }, 3000);
        }

        // Función para verificar conexión periódicamente
        function iniciarVerificacionPeriodica() {
            // Verificar conexión cada 30 segundos
            setInterval(() => {
                if (estadoConexion === 'conectado') {
                    // Verificación rápida de estado
                    console.log('🔍 Verificación periódica de conexión...');
                    
                    // En un sistema real, aquí se haría una petición ligera al servidor
                    // Por ahora, mantenemos el estado como conectado
                }
            }, 30000);
        }

        // Función para actualizar el estado de conexión
        function actualizarEstadoConexion(estado) {
            const indicador = document.getElementById('indicador-conexion');
            
            if (!indicador) return;
            
            switch (estado) {
                case 'conectado':
                    indicador.className = 'indicador-conexion conectado';
                    indicador.innerHTML = '✅ Sincronización Simple Activa';
                    break;
                case 'desconectado':
                    indicador.className = 'indicador-conexion desconectado';
                    indicador.innerHTML = '❌ Sin conexión';
                    break;
                case 'verificando':
                    indicador.className = 'indicador-conexion verificando';
                    indicador.innerHTML = '🔄 Verificando conexión...';
                    break;
                case 'sincronizando':
                    indicador.className = 'indicador-conexion verificando';
                    indicador.innerHTML = '🔄 Sincronizando...';
                    break;
            }
            
            estadoConexion = estado;
        }

        // Hacer las funciones disponibles globalmente
        window.sincronizarManual = sincronizarManual;
        window.verificarConexion = verificarConexion;
        window.actualizarEstadoConexion = actualizarEstadoConexion;
    </script>

    <!-- FOOTER CON DERECHOS DE AUTOR -->
    <footer class="footer-copyright">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="bi bi-shield-check"></i>
                    <span>SISTEMA PAE DIGITAL</span>
                </div>
                <div class="footer-info">
                    <p class="footer-text">
                        <i class="bi bi-c-circle"></i>
                        <span class="copyright-year">2025</span>
                        Todos los derechos reservados
                    </p>
                    <p class="footer-authors">
                        Desarrollado por:
                    </p>
                    <div class="authors-details">
                        
                        <div class="author-item">
                            <strong>Juan Felipe Ceballos Fernández</strong>
                            <span class="author-role">Profesional Financiero y Administrativo</span>
                        </div>
                        <div class="author-item">
                            <strong>Juan José Geovo Morales</strong>
                            <span class="author-role">Aprendiz en Desarrollo de Software y Programación</span>
                        </div>
                    </div>
                    <p class="footer-version">
                        <i class="bi bi-code-slash"></i>
                        Versión 3.0 - Sistema de Control de Inventario
                    </p>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-disclaimer">
                    <i class="bi bi-info-circle"></i>
                    Sistema desarrollado para la Alcaldía de Envigado - Programa de Alimentación Escolar (PAE)
                </p>
            </div>
        </div>
    </footer>

    <style>
        /* Estilos para el footer de derechos de autor */
        .footer-copyright {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            margin-top: 50px;
            border-top: 4px solid #FF6B35;
            position: relative;
            overflow: hidden;
        }

        .footer-copyright::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #FF6B35, #4CAF50, #FF6B35);
            animation: footerGradient 3s ease-in-out infinite;
        }

        @keyframes footerGradient {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px 20px 20px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .footer-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.2rem;
            font-weight: 700;
            color: #FF6B35;
        }

        .footer-logo i {
            font-size: 1.5rem;
        }

        .footer-info {
            text-align: right;
            flex: 1;
        }

        .footer-text {
            margin: 5px 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .footer-authors {
            margin: 5px 0 10px 0;
            font-size: 0.95rem;
            color: #4CAF50;
            font-weight: 500;
        }

        .authors-details {
            margin: 10px 0;
        }

        .author-item {
            margin: 8px 0;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 3px solid #4CAF50;
            transition: all 0.3s ease;
        }

        .author-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }

        .author-item strong {
            display: block;
            color: #FF6B35;
            font-size: 0.9rem;
            margin-bottom: 3px;
        }

        .author-role {
            display: block;
            color: #e8f5e8;
            font-size: 0.8rem;
            font-style: italic;
            opacity: 0.9;
        }

        .footer-version {
            margin: 5px 0;
            font-size: 0.85rem;
            opacity: 0.8;
            font-style: italic;
        }

        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 15px;
            text-align: center;
        }

        .footer-disclaimer {
            margin: 0;
            font-size: 0.8rem;
            opacity: 0.7;
            line-height: 1.4;
        }

        .copyright-year {
            color: #FF6B35;
            font-weight: 600;
        }

        /* Responsividad del footer */
        @media (max-width: 768px) {
            .footer-content {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }

            .footer-info {
                text-align: center;
            }

            .footer-logo {
                justify-content: center;
            }

            .footer-container {
                padding: 20px 15px 15px 15px;
            }
        }

        @media (max-width: 480px) {
            .footer-logo {
                font-size: 1rem;
            }

            .footer-text,
            .footer-authors {
                font-size: 0.85rem;
            }

            .author-item strong {
                font-size: 0.8rem;
            }

            .author-role {
                font-size: 0.7rem;
            }

            .footer-version,
            .footer-disclaimer {
                font-size: 0.75rem;
            }
        }
    </style>
</body>
</html>
