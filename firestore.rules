rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // ==================== SISTEMA DE INVENTARIO PAE DIGITAL ====================
    
    // Colección principal para movimientos de inventario
    match /movimientos/{movimientoId} {
      allow read, write: if true;
    }
    
    // Colección para productos del inventario
    match /productos/{productoId} {
      allow read, write: if true;
    }
    
    // Colección para sedes/lugares
    match /sedes/{sedeId} {
      allow read, write: if true;
    }
    
    // Colección para usuarios del sistema
    match /usuarios/{userId} {
      allow read, write: if true;
    }
    
    // Colección para lotes de productos
    match /lotes/{loteId} {
      allow read, write: if true;
    }
    
    // Colección para fechas de vencimiento (FALTABA ESTA)
    match /fechasVencimiento/{fechaVencimientoId} {
      allow read, write: if true;
    }
    
    // Colección para proveedores
    match /proveedores/{proveedorId} {
      allow read, write: if true;
    }
    
    // Colección para categorías de productos
    match /categorias/{categoriaId} {
      allow read, write: if true;
    }
    
    // Colección para reportes
    match /reportes/{reporteId} {
      allow read, write: if true;
    }
    
    // Colección para configuración del sistema
    match /configuracion/{configId} {
      allow read, write: if true;
    }
    
    // Colección para notificaciones
    match /notificaciones/{notificacionId} {
      allow read, write: if true;
    }
    
    // Colección para alertas
    match /alertas/{alertaId} {
      allow read, write: if true;
    }
    
    // Colección para estadísticas
    match /estadisticas/{estadisticaId} {
      allow read, write: if true;
    }
    
    // Colección para auditoría
    match /auditoria/{auditoriaId} {
      allow read, write: if true;
    }
    
    // Colección para backups
    match /backups/{backupId} {
      allow read, write: if true;
    }
    
    // Colección para sesiones de usuario
    match /sesiones/{sesionId} {
      allow read, write: if true;
    }
    
    // Colección para preferencias de usuario
    match /preferencias/{preferenciaId} {
      allow read, write: if true;
    }
    
    // Colección para datos temporales
    match /temporales/{temporalId} {
      allow read, write: if true;
    }
    
    // Colección para logs del sistema
    match /logs/{logId} {
      allow read, write: if true;
    }
    
    // Colección para pruebas (solo en desarrollo)
    match /test/{testId} {
      allow read, write: if true;
    }
    
    // Mantener la colección paeDigital existente
    match /paeDigital/{document=**} {
      allow read, write: if true;
    }
    
    // Bloquear acceso a cualquier otra colección no especificada
    match /{document=**} {
      allow read, write: if false;
    }
  }
}
